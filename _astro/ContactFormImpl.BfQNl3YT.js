import{v as H,q as O,g as o,a as k,i as v,b as e,d as T,h as B,t as D,u as G,n as R,l as E,S as u,F as _,f as U,M as A}from"./web.DeeAupxM.js";import{g as W,k as z,a as N,B as p,A as j,T as J}from"./utils.Qj-9Nncv.js";var K=D("<form method=post><!$><!/><!$><!/>");function Q(r){const i=H({language:"de",submitLabel:r.language==="en"?"Submit":"Absenden"},r);let f;O(()=>{f.setAttribute("novalidate",""),[...f.querySelectorAll('input[name^="redirect"][type="hidden"]')].forEach(a=>a.remove())});async function F(l){const{target:a}=l;if(a!==null&&a instanceof HTMLFormElement){l.preventDefault();const h=new FormData(a);if(!i.isValid(h))return;try{const m=await fetch(i.actionUrl,{method:"post",body:h});m.ok?i.onSuccess():i.onError(await m.text())}catch(m){i.onError(m)}}}return(()=>{var l=o(K),a=l.firstChild,[h,m]=k(a.nextSibling),M=h.nextSibling,[w,x]=k(M.nextSibling),b=f;return typeof b=="function"?G(b,l):f=l,l.addEventListener("submit",F),v(l,()=>i.children,h,m),v(l,e(W,{type:"submit",get label(){return i.submitLabel}}),w,x),T(()=>B(l,"action",i.actionUrl.href)),l})()}var X=D("<input type=hidden>");function y(r){return(()=>{var i=o(X);return T(()=>B(i,"name",r.name)),T(()=>R(i,"value",r.value)),i})()}var P=D("<br>"),S=D("<p>");function V(){return{name:"",email:"",captcha:"",message:""}}function L(){return{name:[],email:[],captcha:[],message:[]}}const Y=z("/forms");function te(r){const i="Name",f=r.language!=="en"?"E-Mail":"Email",F=r.language!=="en"?"Bitte leer lassen":"leave this field empty",l=r.language!=="en"?"Nachricht":"Message",[a,h]=E(V());let m;const[M,w]=E(!1),[x,b]=E(!1);function I(){b(!1),h(V()),w(!0)}function q(t){w(!1),b(!0),console.error(t)}const[c,d]=E(L());function $(t){return n=>{b(!1),d(L()),h(g=>({...g,[t]:n}))}}function C(t){d(L());const n=r.language==="en";if(a().name.trim().length===0){const g=n?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";d(s=>({...s,name:[...s.name,g]}))}if(a().email.trim().length===0){const g=n?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";d(s=>({...s,email:[...s.email,g]}))}if(m.validity.typeMismatch){const g=n?"The input does not seem to be a valid email address.":"Die Eingabe scheint keine gÃ¼ltige E-Mail-Adresse zu sein.";d(s=>({...s,email:[...s.email,g]}))}if(a().captcha.trim().length>0){const g=n?"This is field must be empty.":"Dieses Feld muss leer bleiben.";d(s=>({...s,captcha:[...s.captcha,g]}))}if(a().message.trim().length===0){const g=n?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";d(s=>({...s,message:[...s.message,g]}))}return c().name.length===0&&c().email.length===0&&c().captcha.length===0&&c().message.length===0}return[e(Q,{actionUrl:Y,get language(){return r.language??"de"},isValid:C,onSuccess:I,onError:q,get children(){return[e(N,{label:i,name:"private-name",get value(){return a().name},get onValueUpdate(){return $("name")}}),e(u,{get when(){return c().name.length>0},get children(){return e(p,{type:"danger",get children(){return e(_,{get each(){return c().name},children:t=>(()=>{var n=o(S);return v(n,t),n})()})}})}}),e(j,{label:f,name:"private-email",type:"email",get value(){return a().email},get onValueUpdate(){return $("email")},ref(t){var n=m;typeof n=="function"?n(t):m=t}}),e(u,{get when(){return c().email.length>0},get children(){return e(p,{type:"danger",get children(){return e(_,{get each(){return c().email},children:t=>(()=>{var n=o(S);return v(n,t),n})()})}})}}),e(N,{label:F,name:"private-captcha",type:"email",required:!1,isHoneypot:!0,get value(){return a().captcha},get onValueUpdate(){return $("captcha")}}),e(u,{get when(){return c().captcha.length>0},get children(){return e(p,{type:"danger",get children(){return e(_,{get each(){return c().captcha},children:t=>(()=>{var n=o(S);return v(n,t),n})()})}})}}),e(J,{label:l,name:"private-message",get value(){return a().message},get onValueUpdate(){return $("message")}}),e(u,{get when(){return c().message.length>0},get children(){return e(p,{type:"danger",get children(){return e(_,{get each(){return c().message},children:t=>(()=>{var n=o(S);return v(n,t),n})()})}})}}),e(u,{get when(){return r.language},children:t=>e(y,{name:"language",get value(){return t()}})}),e(u,{get when(){return r.category},children:t=>e(y,{name:"category",get value(){return t()}})}),e(u,{get when(){return r.referer},children:t=>e(y,{name:"referer",get value(){return t().href}})}),e(u,{get when(){return r.redirectOnSuccess},children:t=>e(y,{name:"redirect-on-success",get value(){return t().href}})}),e(u,{get when(){return r.redirectOnFailure},children:t=>e(y,{name:"redirect-on-failure",get value(){return t().href}})}),e(u,{get when(){return r.redirectOnSpam},children:t=>e(y,{name:"redirect-on-spam",get value(){return t().href}})})]}}),e(u,{get when(){return x()},get children(){return[o(P),e(p,{type:"danger",get children(){return e(U,{fallback:"Leider konnten wir die Nachricht nicht absenden. Bitte versuche es erneut.",get children(){return e(A,{get when(){return r.language==="en"},children:"There was a problem sending your message. Please try again."})}})}})]}}),e(u,{get when(){return M()},get children(){return[o(P),e(p,{type:"success",get children(){return e(U,{fallback:"Nachricht wurde erfolgreich gesendet.",get children(){return e(A,{get when(){return r.language==="en"},children:"Message successfully sent."})}})}})]}})]}export{te as ContactFormImpl};
