import{c as tt,I as En,B as C,d as Cn,f as ne,g as bt,h as j,b as re,s as wn,i as Jt,S as Ot,j as ft,k as Rn,e as rt,l as An,m as Qt,n as Tn,u as Dn}from"./utils.BUgdVUvM.js";import{b as Xt,g as d,t as c,a as u,u as Un,i as s,c as r,S as E,d as ge,e as Ae,F as W,M as R,f as $e,s as vt,h as nt,j as it,k as lt,m as O,r as at,l as Rt,n as je,o as st,p as et,q as en,E as On}from"./web.BCh8zNxO.js";/* empty css                                 */import{c as D,u as Mn}from"./store.BK-5lGMP.js";import{T as Nn}from"./Textarea.BaP5nL_S.js";import{s as f,n as J,e as ot,T as x,o as v,a as ie,C as At,d as tn,b as Ge,l as U,c as Ie,u as Tt,f as In}from"./texts.CWjYF-lE.js";var Pn=c("<dialog><!$><!/><!$><!/><!$><!/>"),Ln=c("<h4>");function we(e=!1){return{open:e}}function Te(e){let t;const[n,i]=D(e.store);Xt(()=>{n.open?t.showModal():t.close()});function l(){i({open:!1}),e.onClose?.()}const a=()=>{const o=[];return e.type!==void 0&&o.push(e.type),e.size!==void 0&&o.push(e.size),e.onClose!==void 0&&o.push("dialog-with-close"),o};return(()=>{var o=d(Pn),g=o.firstChild,[$,m]=u(g.nextSibling),h=$.nextSibling,[S,_]=u(h.nextSibling),b=S.nextSibling,[k,y]=u(b.nextSibling);o.addEventListener("close",l);var p=t;return typeof p=="function"?Un(p,o):t=o,s(o,r(E,{get when(){return e.onClose},get children(){return r(tt,{onClick:l,icon:"circle-xmark",kind:"gray"})}}),$,m),s(o,r(E,{get when(){return e.title},children:w=>(()=>{var M=d(Ln);return s(M,w),M})()}),S,_),s(o,()=>e.children,k,y),ge(()=>Ae(o,a().join(" "))),o})()}var Dt=c("<p>");function Ye(e){const[t,n]=D(e.store),i=e.showErrors==="ALWAYS",l=()=>i||t.isDirty?e.errors??[]:[];return[r(En,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:a=>n("value",a),onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),r(E,{get when(){return l().length>0},get children(){return r(C,{type:"danger",get children(){return r(W,{get each(){return l()},children:a=>(()=>{var o=d(Dt);return s(o,a),o})()})}})}})]}function Mt(e){const[t,n]=D(e.store),i=e.showErrors==="ALWAYS",l=()=>i||t.isDirty?e.errors??[]:[];return[r(Cn,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:a=>n("value",a),onBlur:()=>n("isDirty",!0),get required(){return e.required},get isHoneypot(){return e.isHoneypot},get min(){return e.min},get max(){return e.max},get disabled(){return e.disabled}}),r(E,{get when(){return l().length>0},get children(){return r(C,{type:"danger",get children(){return r(W,{get each(){return l()},children:a=>(()=>{var o=d(Dt);return s(o,a),o})()})}})}})]}function Ct(e){const[t,n]=D(e.store),i=e.showErrors==="ALWAYS",l=()=>i||t.isDirty?e.errors??[]:[];return[r(Nn,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:a=>n("value",a),onBlur:()=>n("isDirty",!0),get required(){return e.required},get size(){return e.size},get disabled(){return e.disabled}}),r(E,{get when(){return l().length>0},get children(){return r(C,{type:"danger",get children(){return r(W,{get each(){return l()},children:a=>(()=>{var o=d(Dt);return s(o,a),o})()})}})}})]}const Je=f().transform(e=>({value:e,isDirty:!1}));function kt(e){return{value:e,isDirty:!1}}const Nt=J().transform(e=>({value:e,isDirty:!1})),Re={SATURDAY:{open:{from:10,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}};ot(["SATURDAY","SUNDAY"]);function Qe(e,t){const{from:n,to:i}=t;return n<e&&e<i}function Fn(e,t){const{from:n,to:i}=e,{from:l,to:a}=t;return Qe(n,t)||Qe(i,t)||Qe(l,e)||Qe(a,e)||n===l&&i===a}function We(e,t=!1){const{from:n,to:i}=e;if(n>i)return[];const l=i-n;return nn(t?l+1:l,n)}function nn(e,t=0){return[...Array(e)].map((n,i)=>i+t)}var Gn=c("<div class=dynamic-columns style=gap:1rem;--min-width:30rem;><!$><!/><!$><!/>"),Hn=c("<div><h4 style=margin-block-end:1.5rem;></h4><!$><!/>"),Bn=c("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich Ã¼berlappende Spielrunden eingetragen hast:"),Yn=c('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem;"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem;></span><!$><!/>'),zn=c("<div class=timetable><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),jn=c("<div><div class=annotation></div><div class=background>"),Wn=c("<div class=entry>");function Zn(e){return(()=>{var t=d(Gn),n=t.firstChild,[i,l]=u(n.nextSibling),a=i.nextSibling,[o,g]=u(a.nextSibling);return s(t,r(It,{get programEntries(){return e.programEntries.SATURDAY},get openingHours(){return Re.SATURDAY},day:"SATURDAY"}),i,l),s(t,r(It,{get programEntries(){return e.programEntries.SUNDAY},get openingHours(){return Re.SUNDAY},day:"SUNDAY"}),o,g),t})()}function It(e){const t=Vn(e.programEntries);return(()=>{var n=d(Hn),i=n.firstChild,l=i.nextSibling,[a,o]=u(l.nextSibling);return s(i,()=>x.days[e.day]),s(n,r($e,{get fallback(){return[r(C,{type:"danger",get children(){return d(Bn)}}),r(W,{each:t,children:([g,$])=>(()=>{var m=d(Yn),h=m.firstChild,[S,_]=u(h.nextSibling),b=S.nextSibling,k=b.nextSibling,[y,p]=u(k.nextSibling);return s(m,()=>g.component(),S,_),s(b,r(ne,{icon:"triangle-exclamation"})),s(m,()=>$.component(),y,p),m})()})]},get children(){return r(R,{get when(){return t.length===0},get children(){return r(Kn,{get programEntries(){return e.programEntries},get openingHours(){return e.openingHours},get day(){return e.day}})}})}}),a,o),n})()}function Kn(e){const t=We(e.openingHours.open),n=e.openingHours.breaks.map(({from:a})=>a),i=(t[0]??0)-1,l=t.at(-1)??0;return(()=>{var a=d(zn),o=a.firstChild,[g,$]=u(o.nextSibling),m=g.nextSibling,h=m.nextSibling,S=h.firstChild;return s(a,r(W,{each:t,children:_=>{const b=n.includes(_);return(()=>{var k=d(jn),y=k.firstChild;return Ae(k,`hour ${b?"break":""}`),s(y,_),ge(p=>vt(k,Pt({from:_,to:_},i,e.day),p)),k})()}}),g,$),s(m,r(W,{get each(){return e.programEntries},children:_=>(()=>{var b=d(Wn);return s(b,()=>_.component()),ge(k=>vt(b,Pt(_.range,i,e.day),k)),b})()})),s(S,l+1),ge(_=>vt(m,`grid-row: 1 / ${l-i+1};`,_)),a})()}function Pt(e,t,n){const{from:i,to:l}=e,a=i-t,o=l-t,g=Re[n].open.to;return bt(a>0,`Entry can't start at ${i}.`),bt(o>0,`Entry can't end at ${l}.`),bt(l<=g,`Entry can't end at ${l}.`),`grid-row: ${a} / ${o};`}function Vn(e){const t=[];return e.forEach((n,i)=>{e.slice(i+1).forEach(l=>{Fn(n.range,l.range)&&t.push([n,l])})}),t}var qn=c("<span>");function rn(e){const t=()=>{const n=["chip"];return n.push(e.kind??"gray"),e.inverted&&n.push("inverted"),e.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=d(qn);return s(n,()=>e.children),ge(i=>{var l=t(),a=e.title;return l!==i.e&&Ae(n,i.e=l),a!==i.t&&nt(n,"title",i.t=a),i},{e:void 0,t:void 0}),n})()}var ln=c("<br>"),Jn=c("<div>"),Qn=c("<div style=display:grid;gap:1rem;><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),Xn=c("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>"),er=c("<h3>Mein Programm"),tr=c("<div><!$><!/><!$><!/><h5></h5><p class=duration>von <!$><!/> bis <!$><!/> Uhr <em><small>(<!$><!/> <!$><!/>)");function nr(e){const t=e.store.master.games.flatMap(a=>a.slots.map(o=>({status:a.kind,uuid:a.uuid,title:a.title.value,dateTime:o}))),n=()=>{const a=e.program();return a?.kind==="SUCCESS"?a.data:[]},i=()=>{const a=e.store.playing.reservations.map(o=>o.gameRound);return new Set(a)},l=()=>n().filter(a=>i().has(a.uuid)).map(a=>({uuid:a.uuid,title:a.title,dateTime:a.slot}));return[r(rr,{get store(){return e.store.init},get isEditable(){return e.isEditable}}),d(ln),r(lr,{get entries(){return{play:l(),master:t,help:[]}},get changePage(){return e.changePage},get isEditable(){return e.isEditable}})]}function rr(e){const[t,n]=D(e.store),[i,l]=D(we());return r(C,{get children(){return[r(E,{get when(){return i.open},get children(){return r(ir,{dialogStore:i,get currentState(){return e.store},updateCurrentState:n})}}),(()=>{var a=d(Qn),o=a.firstChild,g=o.nextSibling,$=g.firstChild,m=$.nextSibling,h=m.nextSibling,[S,_]=u(h.nextSibling),b=g.nextSibling,k=b.firstChild,y=k.nextSibling,p=y.nextSibling,[w,M]=u(p.nextSibling),N=b.nextSibling,P=N.firstChild,Y=P.nextSibling,L=Y.nextSibling,[I,Q]=u(L.nextSibling),ee=N.nextSibling,[Z,F]=u(ee.nextSibling);return s(g,()=>e.store.name,S,_),s(b,()=>e.store.email,w,M),s(N,()=>e.store.mobile,I,Q),s(a,r(E,{get when(){return e.isEditable},get children(){var X=d(Jn);return s(X,r(j,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>l("open",!0)})),X}}),Z,F),a})()]}})}function ir(e){const[t]=D({name:kt(e.currentState.name),email:kt(e.currentState.email),mobile:kt(e.currentState.mobile)}),n=it(()=>{const a={name:[],email:[]};return t.name.value.trim().length===0&&a.name.push(x.mandatoryField),t.email.value.trim().length===0?a.email.push(x.mandatoryField):t.email.value.includes("@")||a.email.push(x.invalidEmail),{...a,hasErrors:a.name.length+a.email.length>0}}),[i,l]=D(e.dialogStore);return r(Te,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var a=d(Xn),o=a.firstChild,[g,$]=u(o.nextSibling),m=g.nextSibling,[h,S]=u(m.nextSibling),_=h.nextSibling,[b,k]=u(_.nextSibling),y=b.nextSibling,[p,w]=u(y.nextSibling);return s(a,r(Ye,{get store(){return t.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return n().name}}),g,$),s(a,r(Ye,{get store(){return t.email},label:"E-Mail",name:"email",showErrors:"ON_BLUR",get errors(){return n().email}}),h,S),s(a,r(Ye,{get store(){return t.mobile},label:"Handynummer",name:"mobile"}),b,k),s(a,r(re,{label:"Speichern",get disabled(){return n().hasErrors},onClick:()=>{n().hasErrors||(e.updateCurrentState({name:t.name.value,email:t.email.value,mobile:t.mobile.value}),l("open",!1))}}),p,w),a}})}function lr(e){const t=ar(e.entries,e.changePage,e.isEditable);return[d(er),d(ln),r(Zn,{programEntries:t})]}function yt(e){const t=e.range.to-e.range.from,n={"master-draft":{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},master:{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},play:{label:"TN",help:"Teilnehmer:in",link:{icon:"link",label:"Zur Spielrunde"}},help:{label:"HL",help:"Helfen",link:{icon:"link",label:""}}}[e.kind],i=()=>{const l=["timeview-entry","box-simple"];return e.kind==="master-draft"&&l.push("gray"),e.kind==="master"&&l.push("special"),e.kind==="play"&&l.push("danger"),l.join(" ")};return(()=>{var l=d(tr),a=l.firstChild,[o,g]=u(a.nextSibling),$=o.nextSibling,[m,h]=u($.nextSibling),S=m.nextSibling,_=S.nextSibling,b=_.firstChild,k=b.nextSibling,[y,p]=u(k.nextSibling),w=y.nextSibling,M=w.nextSibling,[N,P]=u(M.nextSibling),Y=N.nextSibling,L=Y.nextSibling,I=L.firstChild,Q=I.firstChild,ee=Q.nextSibling,[Z,F]=u(ee.nextSibling),X=Z.nextSibling,z=X.nextSibling,[le,ae]=u(z.nextSibling);return le.nextSibling,s(l,r(rn,{get title(){return n.help},inverted:!0,size:"small",get children(){return n.label}}),o,g),s(l,r(E,{get when(){return e.onClick},children:G=>r(tt,{get icon(){return n.link.icon},kind:"ghost",get onClick(){return G()},get title(){return n.link.label}})}),m,h),s(S,()=>e.title),s(_,()=>e.range.from,y,p),s(_,()=>e.range.to,N,P),s(I,t,Z,F),s(I,t===1?"Stunde":"Stunden",le,ae),ge(G=>{var te=i(),K=e.title;return te!==G.e&&Ae(l,G.e=te),K!==G.t&&nt(S,"title",G.t=K),G},{e:void 0,t:void 0}),l})()}function ar(e,t,n){const i={SATURDAY:[],SUNDAY:[]};return n&&(e.play.forEach(l=>{i[l.dateTime.day].push({range:l.dateTime,component:()=>r(yt,{get title(){return l.title},get range(){return l.dateTime},kind:"play",onClick:()=>t({kind:"GAME",uuid:l.uuid})})})}),e.master.forEach(l=>{if(l.status==="archived")return;const a=[l.title];l.status==="draft"&&a.unshift("(noch nicht verÃ¶ffentlicht)"),i[l.dateTime.day].push({range:l.dateTime,component:()=>r(yt,{get title(){return a.join(" ")},get range(){return l.dateTime},get kind(){return l.status==="published"?"master":"master-draft"},onClick:()=>t({kind:"EDIT_GAMEROUND",uuid:l.uuid})})})}),e.help.forEach(l=>{i[l.dateTime.day].push({range:l.dateTime,component:()=>r(yt,{get title(){return l.title},get range(){return l.dateTime},kind:"help"})})})),i}var sr=c("<p>Diese Seite ist leider noch nicht bereit. Komm bitte spÃ¤ter nochmal zurÃ¼ck.");function or(){return r(C,{type:"danger",get children(){return d(sr)}})}var dr=c("<div class=grid><!$><!/><div>"),ur=c("<div class=boxLink>");function Ne(e){const t=e.type??"special";return(()=>{var n=d(ur);return s(n,r(C,{type:t,get onClick(){return e.onClick},get children(){var i=d(dr),l=i.firstChild,[a,o]=u(l.nextSibling),g=a.nextSibling;return s(i,r(ne,{get icon(){return e.icon}}),a,o),s(g,()=>e.children),i}})),n})()}const Ut=ot(["SATURDAY","SUNDAY"]),an=v({uuid:f().uuid(),day:Ut,from:J(),to:J()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});v({name:f(),label:f(),description:f()});const dt=ot(["draft","published","archived"]),gr=v({uuid:f().uuid(),kind:dt,title:f(),system:f(),description:v({short:f(),long:f()}),slots:ie(an),playerCount:v({min:J().min(1),max:J()}).transform(e=>{const[t,n]=wn([e.min,e.max]);return{min:t,max:n}}),tagNames:ie(f())}),sn=v({uuid:f().uuid(),kind:dt,title:Je,system:Je,description:v({short:Je,long:Je}),slots:ie(an),playerCount:v({min:Nt,max:Nt}),tagNames:ie(f())});function cr(){const e={uuid:crypto.randomUUID(),kind:"draft",title:"",system:"",description:{short:"",long:""},slots:[],playerCount:{min:2,max:4},tagNames:["deutsch"]},t=mr(e);if(t.success)return t.data;throw console.error(t),Error("should not happen")}function mr(e){return sn.safeParse(e)}function $r(e){return{...e,title:e.title.value,system:e.system.value,description:{short:e.description.short.value,long:e.description.long.value},playerCount:{min:e.playerCount.min.value,max:e.playerCount.max.value}}}const ut=[{name:"ab6jahren",label:"Ab 6 Jahren",description:"Spannungs- und Bedrohungsmomente werden kurz gehalten. In Begleitung oder nach Absprache mit einem Elternteil. Beispiele: My Little Pony, ..."},{name:"ab12jahren",label:"Ab 12 Jahren",description:"Antisoziales und destruktives wird auf ein Minimum begrenzt. Keine Diskriminierung, keine Radikalisierung, SexualitÃ¤t wird nicht explizit dargestellt."},{name:"ab18jahren",label:"Ab 18 Jahren",description:"Keinerlei Richtlinien bezÃ¼glich Inhalt, in der Gruppe sollte aber diskutiert werden, was akzeptabel ist und was nicht. Beispiele: Vampire the Masquerade, ..."},{name:"fantasy",label:"Fantasy",description:"Spielt in einer alternativen Vergangenheit, in welcher Elemente wie: Ritterinnen, Hexenmeister, RÃ¼stungen, Magie, Goblins, Turniere usw. vorkommen kÃ¶nnen. Beispiele: Das Schwarze Auge, Dungeons & Dragons, ..."},{name:"sciencefiction",label:"Science Fiction",description:"Spielt in einer alternativen Zukunft, in welcher Elemente wie: Raumschiffe, Sternenportale, KÃ¼nstliche Intelligenzen, Laserkanonen usw. vorkommen kÃ¶nnen. Beispiele: Shadowrun, Alien, ..."},{name:"postapokalyptisch",label:"Postapokalyptisch",description:"Spielt in einer Welt mitten oder nach einem Kollaps, wo die Mehrheit ums Ãberleben kÃ¤mpft. Beispiele: Mutant Year Zero, Apocalypse World"},{name:"horror",label:"Horror",description:"Eine gruselige AtmosphÃ¤re, psychologischen Druck oder unvorhersehbare Schreckensmomente. Beispiele: Cthulhu, ..."},{name:"offenewelt",label:"Offene Welt",description:"Es gibt nur einen losen Handlungsfaden, die Rollenspiel-Gruppe muss sich ihre Ziele selber festlegen. Beispiele: Ironsworn, Blades in the Dark, ..."},{name:"gemeinsamespielleitung",label:"Gemeinsame Spielleitung",description:"Die Regeln und die Umwelt werden gemeinsam von allen Spielenden umgesetzt. Beispiele: Microscope, The Quiet Year, ..."},{name:"regelleicht",label:"Regelleicht",description:"Die kompletten Regeln haben alle auf einer Seite Platz. Beispiele: Fiasco, Everyone is John, ..."},{name:"deutsch",label:"Deutsch",description:"Bei der Spielrunde reden die Spielenden miteinander Deutsch."},{name:"englisch",label:"Englisch",description:"Bei der Spielrunde reden die Spielenden miteinander Englisch."},{name:"workshop",label:"Workshop",description:"Unter Anleitung, gemeinsam ein Rollenspiel-Thema vertiefen. Kreative Techniken stehen im Vordergrund. Beispiele: Gemeinsam ein Dungeon erschaffen, Gemeinsam ein Hintergrundgeschichte schreiben, ..."}],gt=200,on=500,dn=200;function hr(e){const t=e.title.value.trim().length===0,n=e.description.short.value.trim().length===0,i=e.description.short.value.length>gt,l=e.description.long.value.length>on,a=e.slots.length===0;return{titleMissing:t,descriptionShortMissing:n,descriptionShortTooLong:i,descriptionLongTooLong:l,slotMissing:a,hasErrors:t||n||i||l||a}}function Sr(e){const t=e.updateText.value.trim().length===0,n=e.updateText.value.length>dn;return{missing:t,tooLong:n,hasErrors:t||n}}var _r=c("<h3>"),br=c("<br>"),fr=c("<div style=margin-top:2rem;><h3 style=margin-bottom:1rem;></h3><ul class=event-list role=list>"),vr=c('<li><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Status:</strong><!$><!/></div><div class=event-tags><strong>System:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><!$><!/></div><div class=event-tags><strong>Spielende:</strong> <!$><!/> - <!$><!/></div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li><button class=event-link><span>Bearbeiten'),He=c("<em>"),kr=c("<span><!$><!/>, <!$><!/> - <!$><!/> Uhr");function yr(e){const[t,n]=D(e.store);function i(){const l=cr();n("games",t.games.length,l),e.changePage({kind:"EDIT_GAMEROUND",uuid:l.uuid})}return[r(E,{get when(){return e.isEditable},get children(){return r(Ne,{icon:"grid-2-plus",type:"success",onClick:i,get children(){var l=d(_r);return s(l,()=>x.createNewGameRound),l}})}}),d(br),r(At,{label:"Ich habe wenig bis keine Spielleitung-Erfahrung und mÃ¶chte gerne in der Vorbereitung und/oder wÃ¤hrend der Spielrunde unterstÃ¼tzt werden.",get checked(){return t.wantsHelp},name:"wantsHelp",value:"wantsHelp",onValueUpdate:l=>{n("wantsHelp",l)},get disabled(){return!e.isEditable}}),r(E,{get when(){return e.store.games},children:l=>(()=>{var a=d(fr),o=a.firstChild,g=o.nextSibling;return s(o,()=>x.myGameRounds),s(g,r(W,{get each(){return l().filter($=>$.kind!=="archived")},children:$=>{const m=$.tagNames.map(h=>ut.find(({name:S})=>S===h)).filter(h=>h!==void 0).map(({label:h})=>h);return r(W,{get each(){return $.slots},get fallback(){return r(Lt,{game:$,slot:null,tags:m,get changePage(){return e.changePage}})},children:h=>r(Lt,{game:$,slot:h,tags:m,get changePage(){return e.changePage}})})}})),a})()})]}function Lt(e){const{game:t,slot:n,tags:i,changePage:l}=e;return(()=>{var a=d(vr),o=a.firstChild,g=o.nextSibling,$=g.firstChild,m=$.firstChild,h=m.nextSibling,[S,_]=u(h.nextSibling),b=$.nextSibling,k=b.firstChild,y=k.nextSibling,[p,w]=u(y.nextSibling),M=b.nextSibling,N=M.firstChild,P=N.nextSibling,[Y,L]=u(P.nextSibling),I=M.nextSibling,Q=I.firstChild,ee=Q.nextSibling,Z=ee.nextSibling,[F,X]=u(Z.nextSibling),z=F.nextSibling,le=z.nextSibling,[ae,G]=u(le.nextSibling),te=I.nextSibling,K=te.nextSibling,V=K.firstChild,ce=V.nextSibling,T=ce.nextSibling,[se,oe]=u(T.nextSibling),de=g.nextSibling,q=de.firstChild,he=q.firstChild,be=he.nextSibling,ye=be.nextSibling,[fe,Se]=u(ye.nextSibling),me=de.nextSibling,xe=me.firstChild,pe=xe.firstChild;return s(o,(()=>{var A=O(()=>t.title.value.length>0);return()=>A()?t.title.value:(()=>{var ue=d(He);return s(ue,()=>x.missingTitle),ue})()})()),s($,()=>x.publishingSteps[t.kind],S,_),s(b,()=>t.system.value||(()=>{var A=d(He);return s(A,()=>x.missingSystem),A})(),p,w),s(M,n!==null?(()=>{var A=d(kr),ue=A.firstChild,[De,Ee]=u(ue.nextSibling),Pe=De.nextSibling,Le=Pe.nextSibling,[ve,ct]=u(Le.nextSibling),mt=ve.nextSibling,Ve=mt.nextSibling,[qe,$t]=u(Ve.nextSibling);return qe.nextSibling,s(A,()=>x.days[n.day],De,Ee),s(A,()=>n.from,ve,ct),s(A,()=>n.to,qe,$t),A})():(()=>{var A=d(He);return s(A,()=>x.missingSlot),A})(),Y,L),s(I,()=>t.playerCount.min.value,F,X),s(I,()=>t.playerCount.max.value,ae,G),s(K,()=>i.join(", ")||(()=>{var A=d(He);return s(A,()=>x.missingTags),A})(),se,oe),s(q,(()=>{var A=O(()=>t.description.short.value.length===0);return()=>A()?(()=>{var ue=d(He);return s(ue,()=>x.missingShortDescription),ue})():Jt(t.description.short.value,gt)})(),fe,Se),pe.$$click=()=>l({kind:"EDIT_GAMEROUND",uuid:t.uuid}),ge(()=>Ae(a,["event-entry",t.kind==="draft"?"gray":""].join(" "))),at(),a})()}lt(["click"]);var xr=c("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem;><li><strong style=color:var(--clr-accent-1);>Spielleitung:</strong><br> <!$><!/></li><li><strong style=color:var(--clr-accent-1);>System:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1);>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1);>Freie PlÃ¤tze:</strong><br><!$><!/> (von <!$><!/>)</li><li><strong style=color:var(--clr-accent-1);>Kategorien:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1);>Kurze Beschreibung:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1);>Lange Beschreibung:</strong><br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>PlÃ¤tze reservieren</h5><div class=reservation-table>"),pr=c("<em>kein System angegeben"),Er=c("<em>keine Kategorien"),Cr=c("<em>Keine lange Beschreibung angegeben."),wr=c("<div class=count>"),Rr=c("<div class=reservation-table-entry><p>Reserviert fÃ¼r mich </p><!$><!/>"),Ar=c('<div class=reservation-table-entry><p>Reserviert fÃ¼r "<!$><!/>"</p><!$><!/>'),Tr=c('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr;"><!$><!/><!$><!/>'),Dr=c('<form style="display:grid;gap:0rem;grid-template-columns:1fr max-content"class=input-button><input type=text style=border-color:var(--clr-special-9);><!$><!/>');function Ur(e){const t=()=>e.reservations.filter(g=>g.gameRound===e.entry.uuid),n=Math.max(e.entry.playerCount.reserved+1-t.length,1),i=e.entry.tags.map(g=>ut.find(({name:$})=>$===g)).filter(g=>g!==void 0).map(({label:g})=>g),l=e.entry.playerCount.max,a=()=>nn(l).map(g=>{const $=t()[g];return $!==void 0?$:g+1===l?{kind:"RESERVED_SPONTANIOUS"}:l-n<=g?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),o=()=>t().find(g=>g.kind==="SELF")!==void 0;return(()=>{var g=d(xr),$=g.firstChild,m=$.firstChild,h=m.firstChild,S=h.nextSibling,_=S.nextSibling,b=_.nextSibling,[k,y]=u(b.nextSibling),p=m.nextSibling,w=p.firstChild,M=w.nextSibling,N=M.nextSibling,[P,Y]=u(N.nextSibling),L=p.nextSibling,I=L.firstChild,Q=I.nextSibling,ee=Q.nextSibling,Z=ee.nextSibling,[F,X]=u(Z.nextSibling),z=F.nextSibling,le=z.nextSibling,[ae,G]=u(le.nextSibling),te=ae.nextSibling,K=te.nextSibling,[V,ce]=u(K.nextSibling);V.nextSibling;var T=L.nextSibling,se=T.firstChild,oe=se.nextSibling,de=oe.nextSibling,[q,he]=u(de.nextSibling),be=q.nextSibling,ye=be.nextSibling,[fe,Se]=u(ye.nextSibling);fe.nextSibling;var me=T.nextSibling,xe=me.firstChild,pe=xe.nextSibling,A=pe.nextSibling,[ue,De]=u(A.nextSibling),Ee=me.nextSibling,Pe=Ee.firstChild,Le=Pe.nextSibling,ve=Le.nextSibling,[ct,mt]=u(ve.nextSibling),Ve=Ee.nextSibling,qe=Ve.firstChild,$t=qe.nextSibling,_n=$t.nextSibling,[bn,fn]=u(_n.nextSibling),vn=$.nextSibling,kn=vn.firstChild,yn=kn.nextSibling;return s(m,()=>e.entry.gamemaster,k,y),s(p,(()=>{var H=O(()=>e.entry.system.trim().length>0);return()=>H()?e.entry.system:d(pr)})(),P,Y),s(L,()=>x.days[e.entry.slot.day],F,X),s(L,()=>e.entry.slot.from,ae,G),s(L,()=>e.entry.slot.to,V,ce),s(T,()=>Math.max(e.entry.playerCount.max-1-e.entry.playerCount.reserved,0),q,he),s(T,()=>e.entry.playerCount.max-1,fe,Se),s(me,(()=>{var H=O(()=>i.length>0);return()=>H()?i.join(", "):d(Er)})(),ue,De),s(Ee,()=>e.entry.description.short,ct,mt),s(Ve,(()=>{var H=O(()=>e.entry.description.long.trim().length>0);return()=>H()?O(()=>e.entry.description.long):d(Cr)})(),bn,fn),s(yn,r(W,{get each(){return a()},children:(H,xn)=>[(()=>{var B=d(wr);return s(B,()=>xn()+1),B})(),r($e,{get children(){return[r(R,{get when(){return H.kind==="RESERVED_OTHER"},get children(){return r(C,{children:"Bereits reserviert"})}}),r(R,{get when(){return H.kind==="RESERVED_SPONTANIOUS"},get children(){return r(C,{children:"Reserviert fÃ¼r spontane Spieler:innen"})}}),r(R,{get when(){return!e.isEditable},get children(){return r(C,{children:"Freier Platz"})}}),r(R,{get when(){return H.kind==="SELF"},get children(){return r(Ot,{type:"success",get children(){var B=d(Rr),Ce=B.firstChild,Ue=Ce.nextSibling,[Fe,Oe]=u(Ue.nextSibling);return s(B,r(tt,{icon:"trash",onClick:()=>e.removeReservation(H.kind==="SELF"?H.uuid:"should not happen")}),Fe,Oe),B}})}}),r(R,{get when(){return H.kind==="FRIEND"},get children(){return r(Ot,{type:"success",get children(){var B=d(Ar),Ce=B.firstChild,Ue=Ce.firstChild,Fe=Ue.nextSibling,[Oe,ht]=u(Fe.nextSibling);Oe.nextSibling;var St=Ce.nextSibling,[_t,pn]=u(St.nextSibling);return s(Ce,()=>H.kind==="FRIEND"?H.name:"[Fehler beim Laden]",Oe,ht),s(B,r(tt,{icon:"trash",onClick:()=>e.removeReservation(H.kind==="FRIEND"?H.uuid:"should not happen")}),_t,pn),B}})}}),r(R,{get when(){return H.kind==="FREE"},get children(){return r(E,{get when(){return o()},get fallback(){return(()=>{var B=d(Tr),Ce=B.firstChild,[Ue,Fe]=u(Ce.nextSibling),Oe=Ue.nextSibling,[ht,St]=u(Oe.nextSibling);return s(B,r(j,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",gameRound:e.entry.uuid})}),Ue,Fe),s(B,r(Ft,{addFriend:_t=>e.addReservation({kind:"FRIEND",gameRound:e.entry.uuid,name:_t})}),ht,St),B})()},get children(){return r(Ft,{addFriend:B=>e.addReservation({kind:"FRIEND",gameRound:e.entry.uuid,name:B})})}})}})]}})]})),g})()}function Ft(e){const[t,n]=Rt("");return(()=>{var i=d(Dr),l=i.firstChild,a=l.nextSibling,[o,g]=u(a.nextSibling);return i.addEventListener("submit",$=>{$.preventDefault();const m=t();m.trim().length>0&&e.addFriend(m)}),je(i,"novalidate",!0),l.$$input=$=>n($.target.value),s(i,r(j,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),o,g),ge(()=>je(l,"value",t())),at(),i})()}lt(["input"]);var Or=c("<p>WIP"),ze=c("<br>"),Mr=c("<p>Diese Seite ist leider noch nicht bereit. Komm bitte spÃ¤ter nochmal zurÃ¼ck."),Nr=c("<p>Programm konnte nicht geladen werden."),Ir=c("<h3>"),Pr=c("<h4 style=margin-block-start:2rem;margin-block-end:1rem;>Start: <!$><!/> Uhr"),Lr=c('<ul class="event-list max"role=list>'),Fr=c("<small><!$><!/> - <!$><!/> Uhr"),Gr=c("<h4 style=margin-block-end:0.5rem;>"),Hr=c("<p>Wir kochen: <span>"),Br=c("<div style=margin-block-start:2rem;>"),Yr=c('<li><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Spielleitung:</strong><!$><!/></div><div class=event-tags><strong>System:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><span><!$><!/>, <!$><!/> - <!$><!/> Uhr</span></div><div class=event-tags><strong>Freie PlÃ¤tze:</strong> <!$><!/> (von <!$><!/>)</div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li><button class=event-link><span>Details & Teilnahme'),zr=c("<em>kein System angegeben"),jr=c("<em>keine Kategorien");function Wr(e){const[t,n]=D(e.store);return r($e,{get fallback(){return r(C,{type:"danger",get children(){return d(Mr)}})},get children(){return r(R,{get when(){return e.isDebugging},get children(){return[r(C,{type:"danger",get children(){return d(Or)}}),d(ze),r(At,{label:"Schickt mir bitte E-Mails, wenn neue Spielrunden verÃ¶ffentlicht werden.",get checked(){return t.wantsUpdates},name:"wantsUpdates",value:"wantsUpdates",onValueUpdate:i=>{n("wantsUpdates",i)}}),d(ze),r(st,{get fallback(){return r(C,{get children(){return x.loading.program}})},get children(){return r(E,{get when(){return e.program()},get fallback(){return r(C,{type:"danger",get children(){return x.error.program}})},children:i=>r(E,{get when(){return i().kind==="SUCCESS"},get fallback(){return r(C,{type:"danger",get children(){return d(Nr)}})},get children(){return r(Zr,{get program(){return i().data},get reservations(){return t.reservations},get isEditable(){return e.isEditable},addReservation:l=>n("reservations",t.reservations.length,{...l,uuid:crypto.randomUUID()}),removeReservation:l=>{n("reservations",t.reservations.filter(a=>a.uuid!==l))},get uuid(){return e.uuid},get changePage(){return e.changePage}})}})})}})]}})}})}function Zr(e){const[t,n]=D(we(e.uuid!==void 0));Xt(()=>{n("open",e.uuid!==null)});const i=()=>e.program.find(a=>a.uuid===e.uuid),l=qr(Vr(e.program));return[r(E,{get when(){return i()},children:a=>r(Te,{store:t,get title(){return a().title},onClose:()=>e.changePage({kind:"PLAYER"},{disableScroll:!0}),size:"large",get children(){return r(Ur,{get entry(){return a()},get reservations(){return e.reservations},get isEditable(){return e.isEditable},get addReservation(){return e.addReservation},get removeReservation(){return e.removeReservation}})}})}),d(ze),r(Gt,{day:"SATURDAY",get programOfDay(){return l.SATURDAY},get changePage(){return e.changePage}}),d(ze),d(ze),r(Gt,{day:"SUNDAY",get programOfDay(){return l.SUNDAY},get changePage(){return e.changePage}})]}function Gt(e){const n=Re[e.day].breaks.map(l=>l.from),i=l=>n.indexOf(l)===0?"LUNCH":"DINNER";return[(()=>{var l=d(Ir);return s(l,()=>x.days[e.day]),l})(),r(W,{get each(){return Object.entries(e.programOfDay)},get fallback(){return r(C,{children:"Keine Spielrunden gefunden."})},children:([l,a])=>n.includes(Number(l))?r(Kr,{get type(){return i(Number(l))},get range(){return{from:Number(l),to:Number(l)-1}}}):a.length===0?null:[(()=>{var o=d(Pr),g=o.firstChild,$=g.nextSibling,[m,h]=u($.nextSibling);return m.nextSibling,s(o,l,m,h),o})(),(()=>{var o=d(Lr);return s(o,r(W,{each:a,children:g=>r(Jr,{entry:g,get changePage(){return e.changePage}})})),o})()]})]}function Kr(e){const t=e.type==="LUNCH"?"Mittagessen":"Nachtessen";return(()=>{var n=d(Br);return s(n,r(C,{get children(){return[(()=>{var i=d(Fr),l=i.firstChild,[a,o]=u(l.nextSibling),g=a.nextSibling,$=g.nextSibling,[m,h]=u($.nextSibling);return m.nextSibling,s(i,()=>e.range.from,a,o),s(i,()=>e.range.to,m,h),i})(),(()=>{var i=d(Gr);return s(i,t),i})(),(()=>{var i=d(Hr),l=i.firstChild,a=l.nextSibling;return je(a,"innerHTML","Pilzrisotto (vegi&nbsp;/&nbsp;vegan), Penne All'Arrabbiata und Penne Pesto (vegi&nbsp;/&nbsp;vegan)."),i})()]}})),n})()}function Vr(e){const t=Object.groupBy(e,n=>n.slot.day);return{SATURDAY:t.SATURDAY??[],SUNDAY:t.SUNDAY??[]}}function qr(e){function t(o,g){const{from:$,to:m}=o.slot,{from:h,to:S}=g.slot;return $===h?m-S:$-h}const n=e.SATURDAY.toSorted(t),i=e.SUNDAY.toSorted(t),l=We(Re.SATURDAY.open).reduce((o,g)=>(o[g]=n.filter($=>$.slot.from===g),o),{}),a=We(Re.SUNDAY.open).reduce((o,g)=>(o[g]=i.filter($=>$.slot.from===g),o),{});return{SATURDAY:l,SUNDAY:a}}function Jr(e){const t=e.entry.tags.map(n=>ut.find(({name:i})=>i===n)).filter(n=>n!==void 0).map(({label:n})=>n);return(()=>{var n=d(Yr),i=n.firstChild,l=i.nextSibling,a=l.firstChild,o=a.firstChild,g=o.nextSibling,[$,m]=u(g.nextSibling),h=a.nextSibling,S=h.firstChild,_=S.nextSibling,[b,k]=u(_.nextSibling),y=h.nextSibling,p=y.firstChild,w=p.nextSibling,M=w.firstChild,[N,P]=u(M.nextSibling),Y=N.nextSibling,L=Y.nextSibling,[I,Q]=u(L.nextSibling),ee=I.nextSibling,Z=ee.nextSibling,[F,X]=u(Z.nextSibling);F.nextSibling;var z=y.nextSibling,le=z.firstChild,ae=le.nextSibling,G=ae.nextSibling,[te,K]=u(G.nextSibling),V=te.nextSibling,ce=V.nextSibling,[T,se]=u(ce.nextSibling);T.nextSibling;var oe=z.nextSibling,de=oe.nextSibling,q=de.firstChild,he=q.nextSibling,be=he.nextSibling,[ye,fe]=u(be.nextSibling),Se=l.nextSibling,me=Se.firstChild,xe=me.firstChild,pe=xe.nextSibling,A=pe.nextSibling,[ue,De]=u(A.nextSibling),Ee=Se.nextSibling,Pe=Ee.firstChild,Le=Pe.firstChild;return s(i,()=>e.entry.title),s(a,()=>e.entry.gamemaster,$,m),s(h,(()=>{var ve=O(()=>e.entry.system.trim().length>0);return()=>ve()?e.entry.system:d(zr)})(),b,k),s(w,()=>x.days[e.entry.slot.day],N,P),s(w,()=>e.entry.slot.from,I,Q),s(w,()=>e.entry.slot.to,F,X),s(z,()=>Math.max(e.entry.playerCount.max-1-e.entry.playerCount.reserved,0),te,K),s(z,()=>e.entry.playerCount.max-1,T,se),s(de,(()=>{var ve=O(()=>t.length>0);return()=>ve()?t.join(", "):d(jr)})(),ye,fe),s(me,()=>Jt(e.entry.description.short,gt),ue,De),Le.$$click=()=>e.changePage({kind:"GAME",uuid:e.entry.uuid},{disableScroll:!0}),ge(()=>Ae(n,["event-entry"].join(" "))),at(),n})()}lt(["click"]);var Ht=c("<h3>Spielrunden ansehen"),Bt=c("<p>Melde dich (und deine Freunde) fÃ¼r diverse Spielrunden an."),xt=c("<br>"),Qr=c("<h3>Spielrunden erstellen"),Xr=c("<p>Falls du wenig oder gar keine Erfahrung als Spielleiter:in hast, werden wir dich vor und wÃ¤hrend dem Anlass unterstÃ¼tzen."),ei=c("<h3>Helfen"),ti=c("<p>Beim Kiosk und der Essensausgabe kÃ¶nnen wir immer ein paar helfende HÃ¤nde gebrauchen."),Yt=c("<p><strong>Noch nicht verfÃ¼gbar."),ni=c("<h3>Zusammenfassung"),ri=c("<p>Erhalte einen Ãberblick Ã¼ber dein gesamtes Programm.");function ii(e){return[r($e,{get fallback(){return r(Ne,{type:"gray",icon:"dice-d20",onClick:()=>e.changePage({kind:"PLAYER"}),get children(){return[d(Ht),d(Bt),d(Yt)]}})},get children(){return r(R,{get when(){return e.isDebugging},get children(){return r(Ne,{icon:"dice-d20",onClick:()=>e.changePage({kind:"PLAYER"}),get children(){return[d(Ht),d(Bt)]}})}})}}),d(xt),r(Ne,{icon:"grid-2-plus",onClick:()=>e.changePage({kind:"GAMEMASTER"}),get children(){return[d(Qr),d(Xr)]}}),d(xt),r(Ne,{type:"gray",icon:"hand-heart",onClick:()=>e.changePage({kind:"HELPING"}),get children(){return[d(ei),d(ti),d(Yt)]}}),d(xt),r(Ne,{icon:"list",onClick:()=>e.changePage({kind:"SUMMARY"}),get children(){return[d(ni),d(ri)]}})]}var li=c("<fieldset><legend>Zeitslots</legend><!$><!/><!$><!/>"),zt=c("<br>"),ai=c("<div style=margin-block-end:0.5rem;>Zeitslot: <!$><!/>, <!$><!/> -<!$><!/> Uhr"),si=c("<ul class=event-list role=list>"),oi=c("<em>werden geladen..."),di=c("<li class=event-entry><h3 class=event-title><!$><!/>, <!$><!/> - <!$><!/> Uhr</h3><div class=event-details><div class=event-tags><strong>Dauer:</strong><!$><!/> <!$><!/></div><div class=event-tags><strong>Spielende:</strong> <!$><!/></div></div><div></div><ul role=list class=event-links>"),ui=c("<em>Fehler beim Laden."),gi=c("<em>noch keine Anmeldungen"),ci=c("<li><em style=font-size:smaller;>Aktionen werden geladen..."),jt=c("<li><em style=font-size:smaller;>kann nicht gelÃ¶scht werden"),mi=c("<li><button type=button class=event-link><div style=display:flex;gap:0.25rem;align-items:center;><!$><!/><span>LÃ¶schen"),$i=c("<div style=display:grid;gap:0.5rem;>"),hi=c("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/>"),Si=c("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/><!$><!/>"),_i=c("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/><!$><!/><div style=margin-block-start:1rem;>"),bi=c("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center;><!$><!/> <span>Neuen Slot erfassen"),fi=c("<em>WÃ¤hle eine Tag:"),vi=c("<div style=display:flex;flex-wrap:wrap;gap:.5rem;><!$><!/><!$><!/>"),ki=c("<em>WÃ¤hle eine Startzeit:"),un=c("<div style=display:flex;flex-wrap:wrap;gap:.5rem;>"),gn=c("<span style=white-space:nowrap;><!$><!/> Uhr"),yi=c("<em>WÃ¤hle eine Endzeit:");function xi(e){return(()=>{var t=d(li),n=t.firstChild,i=n.nextSibling,[l,a]=u(i.nextSibling),o=l.nextSibling,[g,$]=u(o.nextSibling);return s(t,r(Ei,{get store(){return e.store},get registrations(){return e.registrations},get isEditable(){return e.isEditable}}),l,a),s(t,r(E,{get when(){return e.slotMissing},get children(){return r(C,{type:"danger",children:"WÃ¤hle mindestens einen Zeitslot aus."})}}),g,$),t})()}const Wt=1;function pi(e){function t(n){const i=We(n.open,!0);return n.breaks.map(a=>We(a,!0)).reduce((a,o)=>{const g=o.at(0),$=o.at(-1);if(g===void 0||$===void 0)return a;const m=[];return a.forEach(h=>{const S=[],_=[];h.forEach(b=>{b<=g&&S.push(b),$<=b&&_.push(b)}),S.length>0&&m.push(S),_.length>0&&m.push(_)}),m},[i]).map(a=>{const o=a.slice(0,Wt*-1);return Rn(o.map(g=>{const $=a.filter(m=>m>=g+Wt);return[g,$]}))}).reduce((a,o)=>({...a,...o}),{})}return{SATURDAY:t(e.SATURDAY),SUNDAY:t(e.SUNDAY)}}function Ei(e){const[t,n]=D(e.store),[i,l]=D({dialog:we()}),a=it(()=>pi(Re));function o(m){n(t.concat(m))}function g(m){l("dialog","open",!1),l("slot",void 0),n(t.filter(h=>h.uuid!==m))}function $(m){l("dialog","open",!0),l("slot",t.find(h=>h.uuid===m))}return[r(wi,{get daySections(){return a()},chooseTimeSlot:o,get isEditable(){return e.isEditable}}),d(zt),d(zt),r(Te,{get store(){return i.dialog},title:"Zeitslot lÃ¶schen",onClose:()=>l("slot",void 0),get children(){return[(()=>{var m=d(ai),h=m.firstChild,S=h.nextSibling,[_,b]=u(S.nextSibling),k=_.nextSibling,y=k.nextSibling,[p,w]=u(y.nextSibling),M=p.nextSibling,N=M.nextSibling,[P,Y]=u(N.nextSibling);return P.nextSibling,s(m,()=>x.days[i.slot?.day],_,b),s(m,()=>i.slot?.from,p,w),s(m,()=>i.slot?.to,P,Y),m})(),r(j,{kind:"danger",icon:"trash",label:"LÃ¶schen",onClick:()=>g(i.slot?.uuid)})]}}),r(Ci,{slots:t,get registrations(){return e.registrations},confirmRemoval:$,get isEditable(){return e.isEditable}})]}function Ci(e){return(()=>{var t=d(si);return s(t,r(W,{get each(){return Ri(e.slots)},children:n=>(()=>{var i=d(di),l=i.firstChild,a=l.firstChild,[o,g]=u(a.nextSibling),$=o.nextSibling,m=$.nextSibling,[h,S]=u(m.nextSibling),_=h.nextSibling,b=_.nextSibling,[k,y]=u(b.nextSibling);k.nextSibling;var p=l.nextSibling,w=p.firstChild,M=w.firstChild,N=M.nextSibling,[P,Y]=u(N.nextSibling),L=P.nextSibling,I=L.nextSibling,[Q,ee]=u(I.nextSibling),Z=w.nextSibling,F=Z.firstChild,X=F.nextSibling,z=X.nextSibling,[le,ae]=u(z.nextSibling),G=p.nextSibling,te=G.nextSibling;return s(l,()=>x.days[n.day],o,g),s(l,()=>n.from,h,S),s(l,()=>n.to,k,y),s(w,()=>n.to-n.from,P,Y),s(w,()=>n.to-n.from>1?"Stunden":"Stunde",Q,ee),s(Z,r($e,{get children(){return[r(R,{get when(){return e.registrations.loading},get children(){return d(oi)}}),r(R,{get when(){return e.registrations()},children:K=>{const V=K();if(V.kind==="FAILURE")return d(ui);const ce=V.data.filter(T=>T.uuid===n.uuid).map(T=>T.name);return O(()=>ce.join(", ")||d(gi))}})]}}),le,ae),s(te,r(st,{get fallback(){return d(ci)},get children(){return r(E,{get when(){return e.registrations()},children:K=>{const V=K();return V.kind==="FAILURE"?d(jt):V.data.filter(T=>T.uuid===n.uuid).map(T=>T.name).length>0?d(jt):(()=>{var T=d(mi),se=T.firstChild,oe=se.firstChild,de=oe.firstChild,[q,he]=u(de.nextSibling);return q.nextSibling,se.$$click=()=>e.confirmRemoval(n.uuid),s(oe,r(ne,{icon:"trash"}),q,he),ge(()=>je(se,"disabled",!e.isEditable)),at(),T})()}})}})),i})()})),t})()}function wi(e){const[t,n]=D({slot:{kind:"CHOOSE_DAY"},dialog:we()});function i(){n("slot",{kind:"CHOOSE_DAY"}),n("dialog","open",!1)}function l(a){e.chooseTimeSlot(a),i()}return[r(re,{kind:"success",get label(){return(()=>{var a=d(bi),o=a.firstChild,[g,$]=u(o.nextSibling);return g.nextSibling,s(a,r(ne,{icon:"circle-plus"}),g,$),a})()},onClick:()=>n("dialog","open",!0),get disabled(){return!e.isEditable}}),r(Te,{title:"Zeitslot erfassen",get store(){return t.dialog},size:"medium",onClose:i,get children(){return r($e,{get children(){return[r(R,{get when(){return t.slot.kind==="CHOOSE_DAY"},get children(){var a=d($i);return s(a,r(Xe,{changeDay:o=>n("slot",{kind:"CHOOSE_START",day:o})})),a}}),r(R,{get when(){return t.slot.kind==="CHOOSE_START"},get children(){var a=d(hi),o=a.firstChild,[g,$]=u(o.nextSibling),m=g.nextSibling,[h,S]=u(m.nextSibling);return s(a,r(Xe,{get chosenDay(){return t.slot.kind==="CHOOSE_START"?t.slot.day:void 0},changeDay:_=>n("slot",{kind:"CHOOSE_START",day:_})}),g,$),s(a,r(pt,{get startTimes(){return O(()=>t.slot.kind==="CHOOSE_START")()?ft(e.daySections[t.slot.day]):[]},changeStart:_=>n("slot",{kind:"CHOOSE_END",start:_})}),h,S),a}}),r(R,{get when(){return t.slot.kind==="CHOOSE_END"},get children(){var a=d(Si),o=a.firstChild,[g,$]=u(o.nextSibling),m=g.nextSibling,[h,S]=u(m.nextSibling),_=h.nextSibling,[b,k]=u(_.nextSibling);return s(a,r(Xe,{get chosenDay(){return t.slot.kind==="CHOOSE_END"?t.slot.day:void 0},changeDay:y=>n("slot",{kind:"CHOOSE_START",day:y})}),g,$),s(a,r(pt,{get chosenStart(){return t.slot.kind==="CHOOSE_END"?t.slot.start:void 0},get startTimes(){return O(()=>t.slot.kind==="CHOOSE_END")()?ft(e.daySections[t.slot.day]):[]},changeStart:y=>n("slot",{kind:"CHOOSE_END",start:y})}),h,S),s(a,r(Zt,{get endTimes(){return t.slot.kind==="CHOOSE_END"?e.daySections[t.slot.day][t.slot.start]??[]:[]},changeEnd:y=>{t.slot.kind==="CHOOSE_END"&&n("slot",{kind:"WAIT_FOR_CONFIRMATION",day:t.slot.day,start:t.slot.start,end:y})}}),b,k),a}}),r(R,{get when(){return t.slot.kind==="WAIT_FOR_CONFIRMATION"},get children(){var a=d(_i),o=a.firstChild,[g,$]=u(o.nextSibling),m=g.nextSibling,[h,S]=u(m.nextSibling),_=h.nextSibling,[b,k]=u(_.nextSibling),y=b.nextSibling;return s(a,r(Xe,{get chosenDay(){return t.slot.kind==="WAIT_FOR_CONFIRMATION"?t.slot.day:void 0},changeDay:p=>n("slot",{kind:"CHOOSE_START",day:p})}),g,$),s(a,r(pt,{get chosenStart(){return t.slot.kind==="WAIT_FOR_CONFIRMATION"?t.slot.start:void 0},get startTimes(){return O(()=>t.slot.kind==="WAIT_FOR_CONFIRMATION")()?ft(e.daySections[t.slot.day]):[]},changeStart:p=>n("slot",{kind:"CHOOSE_END",start:p})}),h,S),s(a,r(Zt,{get chosenEnd(){return t.slot.kind==="WAIT_FOR_CONFIRMATION"?t.slot.end:void 0},get endTimes(){return t.slot.kind==="WAIT_FOR_CONFIRMATION"?e.daySections[t.slot.day][t.slot.start]??[]:[]},changeEnd:p=>{t.slot.kind==="WAIT_FOR_CONFIRMATION"&&n("slot",{kind:"WAIT_FOR_CONFIRMATION",day:t.slot.day,start:t.slot.start,end:p})}}),b,k),s(y,r(re,{get label(){return`Slot "${t.slot.kind==="WAIT_FOR_CONFIRMATION"?`${x.days[t.slot.day]}, von ${t.slot.start} bis ${t.slot.end} Uhr`:""}" erstellen`},kind:"success",onClick:()=>{t.slot.kind==="WAIT_FOR_CONFIRMATION"&&l({uuid:crypto.randomUUID(),day:t.slot.day,from:t.slot.start,to:t.slot.end})}})),a}})]}})}})]}function Xe(e){return[d(fi),(()=>{var t=d(vi),n=t.firstChild,[i,l]=u(n.nextSibling),a=i.nextSibling,[o,g]=u(a.nextSibling);return s(t,r(re,{get kind(){return e.chosenDay==="SATURDAY"?"success":"gray"},label:"Samstag",onClick:()=>e.changeDay("SATURDAY")}),i,l),s(t,r(re,{get kind(){return e.chosenDay==="SUNDAY"?"success":"gray"},label:"Sonntag",onClick:()=>e.changeDay("SUNDAY")}),o,g),t})()]}function pt(e){return[d(ki),(()=>{var t=d(un);return s(t,r(W,{get each(){return e.startTimes},children:n=>r(re,{get kind(){return e.chosenStart===n?"success":"gray"},get label(){return(()=>{var i=d(gn),l=i.firstChild,[a,o]=u(l.nextSibling);return a.nextSibling,s(i,n,a,o),i})()},onClick:()=>e.changeStart(n)})})),t})()]}function Zt(e){return[d(yi),(()=>{var t=d(un);return s(t,r(W,{get each(){return e.endTimes},children:n=>r(re,{get kind(){return e.chosenEnd===n?"success":"gray"},get label(){return(()=>{var i=d(gn),l=i.firstChild,[a,o]=u(l.nextSibling);return a.nextSibling,s(i,n,a,o),i})()},onClick:()=>e.changeEnd(n)})})),t})()]}function Ri(e){return e.toSorted((t,n)=>t.day!==n.day?t.day==="SATURDAY"?-1:1:t.from-n.from)}lt(["click"]);function Ai(e){const t=new Date;return async()=>new Promise(n=>{setTimeout(()=>(console.error("NOT YET IMPLEMENTED: `publishGameround`",e,t),n()),500)})}function Ti(e,t){const n=new Date;return async()=>new Promise(i=>{setTimeout(()=>(console.error("NOT YET IMPLEMENTED: `sendGameroundUpdate`",e,t.join(", "),n),i()),500)})}var Ze=c("<br>"),Di=c("<div class=content><p>MÃ¶chtest du diese Spielrunde gerne verÃ¶ffentlichen?</p><!$><!/>"),Ui=c("<em>Informationen zu den Anmeldungen mÃ¼ssen geladen werden..."),Oi=c("<em>Du kannst kein Update versenden, da sich noch niemand fÃ¼r diese Spielrunde angemeldet hat."),Mi=c("<p>An: <!$><!/>"),Ni=c("<em>Du kannst die Spielrunde nur lÃ¶schen, wenn du zuerst alle Zeitslots entfernt hast."),Ii=c("<div class=content><p>Bist du sicher, dass du die Spielrunde lÃ¶schen mÃ¶chtest?</p><!$><!/>"),Pi=c('<form novalidate><!$><!/><!$><!/><!$><!/><div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem;"><!$><!/><!$><!/></div><!$><!/><!$><!/><!$><!/><fieldset><legend>Kategorien (optional)</legend><!$><!/></fieldset><!$><!/><div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between;><!$><!/><div style=display:flex;flex-wrap:wrap;gap:1rem;><!$><!/><!$><!/><!$><!/>'),Li=c("<h4>Spielrunde inkomplett"),Fi=c("<p>Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde:"),Gi=c("<li>Â«TitelÂ» ist ein Pflichtfeld."),Hi=c("<li>Â«kurz BeschreibungÂ» ist ein Pflichtfeld."),Bi=c("<li>Â«kurz BeschreibungÂ» ist zu lang."),Yi=c("<li>Â«lange BeschreibungÂ» ist zu lang."),zi=c("<li>Mindest einen Zeitslot muss ausgewÃ¤hlt werden."),ji=c("<ul><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),Wi=c("<p><strong>ErklÃ¤rung:</strong> Hast du eine wichtige Ãnderung an dieser Spielrunde durchgefÃ¼hrt, wÃ¤hrend bereits Spielende angemeldet waren? Lass hiermit die Angemeldeten wissen, was du geÃ¤ndert hast. Wichtige Ãnderungen kÃ¶nnen sein: System geÃ¤ndert, Kategorien geÃ¤ndert. FÃ¼r kleine Ãnderungen, wie z.B. Rechtschreibfehler, sollte dies nicht genutzt werden."),Zi=c("<p><em>Halte dich kurz und am besten Stichwortartig."),Ki=c("<form><!$><!/><!$><!/>"),Vi=c("<div style=display:grid;gap:0.5rem;margin-block-end:1rem;>");function qi(e){const t=e.allRounds.find(n=>n.uuid===e.uuid);return r(E,{get fallback(){return e.fallback},when:t,children:n=>e.children(n())})}function Ji(e){const[t,n]=D(e.store),[i,l]=D({delete:we(),publish:we(),sendUpdate:we()});function a(g){g.preventDefault(),l("publish","open",!0)}function o(){e.changePage({kind:"GAMEMASTER"})}return[r(rn,{kind:"special",get children(){return["Status: ",O(()=>x.publishingSteps[t.kind])]}}),d(Ze),d(Ze),r(tl,{store:t,get registrations(){return e.registrations},onSubmit:a,onCancel:()=>l("delete","open",!0),onSendUpdate:()=>l("sendUpdate","open",!0),goBack:o,get isEditable(){return e.isEditable}}),r(Qi,{get store(){return i.publish},get title(){return t.title.value},onPublish:()=>{n("kind","published"),l("publish","open",!1),e.queue.enqueue(Ai(t.uuid))}}),r(Xi,{get store(){return i.sendUpdate},get players(){return il(e.registrations,t.slots.map(g=>g.uuid))},onSend:g=>{e.queue.enqueue(Ti(g,t.slots.map($=>$.uuid)))}}),r(el,{get store(){return i.delete},get hasSlots(){return t.slots.length!==0},get title(){return t.title.value},onDelete:()=>{n("kind","archived"),e.changePage({kind:"GAMEMASTER"})}})]}function Qi(e){return r(Te,{get store(){return e.store},title:"Spielrunde verÃ¶ffentlichen",onClose:()=>{},get children(){var t=d(Di),n=t.firstChild,i=n.nextSibling,[l,a]=u(i.nextSibling);return s(t,r(j,{kind:"success",icon:"circle-plus",get label(){return`Ja, bitte "${e.title||"["+x.missingTitle+"]"}" verÃ¶ffentlichen.`},get onClick(){return e.onPublish}}),l,a),t}})}function Xi(e){return r(Te,{get store(){return e.store},title:"Update senden",onClose:()=>{},size:"medium",get children(){return()=>e.players.kind==="LOADING"?d(Ui):e.players.kind==="ERROR"?O(()=>x.error.general):e.players.data.length===0?d(Oi):[(()=>{var t=d(Mi),n=t.firstChild,i=n.nextSibling,[l,a]=u(i.nextSibling);return s(t,()=>e.players.data.map(o=>o.name).join(", "),l,a),t})(),d(Ze),r(nl,{get onSend(){return e.onSend}})]}})}function el(e){return r(Te,{get store(){return e.store},title:"Spielrunde lÃ¶schen",onClose:()=>{},get children(){return[r(E,{get when(){return e.hasSlots},get children(){return d(Ni)}}),r(E,{get when(){return!e.hasSlots},get children(){var t=d(Ii),n=t.firstChild,i=n.nextSibling,[l,a]=u(i.nextSibling);return s(t,r(j,{kind:"danger",icon:"trash",get label(){return`Ja, bitte "${e.title||"["+x.missingTitle+"]"}" lÃ¶schen.`},get onClick(){return e.onDelete}}),l,a),t}})]}})}function tl(e){const[t]=D(e.store),n=it(()=>hr(t));return(()=>{var i=d(Pi),l=i.firstChild,[a,o]=u(l.nextSibling),g=a.nextSibling,[$,m]=u(g.nextSibling),h=$.nextSibling,[S,_]=u(h.nextSibling),b=S.nextSibling,k=b.firstChild,[y,p]=u(k.nextSibling),w=y.nextSibling,[M,N]=u(w.nextSibling),P=b.nextSibling,[Y,L]=u(P.nextSibling),I=Y.nextSibling,[Q,ee]=u(I.nextSibling),Z=Q.nextSibling,[F,X]=u(Z.nextSibling),z=F.nextSibling,le=z.firstChild,ae=le.nextSibling,[G,te]=u(ae.nextSibling),K=z.nextSibling,[V,ce]=u(K.nextSibling),T=V.nextSibling,se=T.firstChild,[oe,de]=u(se.nextSibling),q=oe.nextSibling,he=q.firstChild,[be,ye]=u(he.nextSibling),fe=be.nextSibling,[Se,me]=u(fe.nextSibling),xe=Se.nextSibling,[pe,A]=u(xe.nextSibling);return s(i,r(E,{get when(){return t.kind==="published"},get children(){return r(Kt,{get errors(){return n()}})}}),a,o),s(i,r(Ye,{get store(){return t.title},label:"Titel",name:"title",get showErrors(){return t.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return n().titleMissing?[x.mandatoryField]:[]},get disabled(){return!e.isEditable}}),$,m),s(i,r(Ye,{get store(){return t.system},label:"System (optional)",name:"System",get disabled(){return!e.isEditable}}),S,_),s(b,r(Mt,{get store(){return t.playerCount.min},label:"Anzahl Mitspielende (Minimum)",name:"playerCountMin",min:1,get max(){return t.playerCount.max.value},get disabled(){return!e.isEditable}}),y,p),s(b,r(Mt,{get store(){return t.playerCount.max},label:"Anzahl Mitspielende (Maximum)",name:"playerCountMax",get min(){return t.playerCount.min.value},get disabled(){return!e.isEditable}}),M,N),s(i,r(Ct,{get store(){return t.description.short},label:"kurze Beschreibung",name:"descriptionShort",size:"small",get showErrors(){return t.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return O(()=>!!n().descriptionShortMissing)()?[x.mandatoryField]:O(()=>!!n().descriptionShortTooLong)()?[x.charLimitBy.replace("{}",String(gt))]:[]},get disabled(){return!e.isEditable}}),Y,L),s(i,r(Ct,{get store(){return t.description.long},label:"lange Beschreibung (optional)",name:"descriptionLong",get showErrors(){return t.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return O(()=>!!n().descriptionLongTooLong)()?[x.charLimitBy.replace("{}",String(on))]:[]},get disabled(){return!e.isEditable}}),Q,ee),s(i,r(xi,{get store(){return e.store.slots},get registrations(){return e.registrations},get slotMissing(){return n().slotMissing},get isEditable(){return e.isEditable}}),F,X),s(z,r(rl,{get store(){return t.tagNames},get isEditable(){return e.isEditable}}),G,te),s(i,r(Kt,{get errors(){return n()}}),V,ce),s(T,r(j,{icon:"backward",label:"ZurÃ¼ck zu deinen Spielrunden",get onClick(){return e.goBack}}),oe,de),s(q,r(E,{get when(){return t.kind!=="archived"},get children(){return r(j,{icon:"trash",kind:"danger",label:"LÃ¶schen",onClick:()=>e.onCancel(),get disabled(){return!e.isEditable}})}}),be,ye),s(q,r(E,{get when(){return t.kind==="draft"},get children(){return r(j,{icon:"circle-plus",get kind(){return n().hasErrors?"gray":"success"},get disabled(){return n().hasErrors||!e.isEditable},label:"Spielrunde verÃ¶ffentlichen",get onClick(){return n().hasErrors?void 0:e.onSubmit}})}}),Se,me),s(q,r(E,{get when(){return t.kind==="published"},get children(){return r(j,{icon:"circle-plus",kind:"success",label:"Update an Spielende schicken",get onClick(){return e.onSendUpdate},get disabled(){return!e.isEditable}})}}),pe,A),i})()}function Kt(e){return r(E,{get when(){return e.errors.hasErrors},get children(){return r(C,{type:"danger",get children(){return[d(Li),d(Fi),(()=>{var t=d(ji),n=t.firstChild,[i,l]=u(n.nextSibling),a=i.nextSibling,[o,g]=u(a.nextSibling),$=o.nextSibling,[m,h]=u($.nextSibling),S=m.nextSibling,[_,b]=u(S.nextSibling),k=_.nextSibling,[y,p]=u(k.nextSibling);return s(t,r(E,{get when(){return e.errors.titleMissing},get children(){return d(Gi)}}),i,l),s(t,r(E,{get when(){return e.errors.descriptionShortMissing},get children(){return d(Hi)}}),o,g),s(t,r(E,{get when(){return e.errors.descriptionShortTooLong},get children(){return d(Bi)}}),m,h),s(t,r(E,{get when(){return e.errors.descriptionLongTooLong},get children(){return d(Yi)}}),_,b),s(t,r(E,{get when(){return e.errors.slotMissing},get children(){return d(zi)}}),y,p),t})()]}})}})}function nl(e){const[t,n]=D({updateText:{value:"",isDirty:!1},hasBeenSent:!1}),i=it(()=>Sr(t));return r($e,{get fallback(){return r(C,{type:"success",children:"Nachricht wurde registriert und wird in den nÃ¤chsten 24 Stunden an die Spielenden verschickt."})},get children(){return r(R,{get when(){return!t.hasBeenSent},get children(){return[d(Wi),d(Ze),d(Zi),d(Ze),(()=>{var l=d(Ki),a=l.firstChild,[o,g]=u(a.nextSibling),$=o.nextSibling,[m,h]=u($.nextSibling);return je(l,"novalidate",!0),s(l,r(Ct,{get store(){return t.updateText},label:"Zusammenfassung der Ãnderung",name:"updateText",size:"small",showErrors:"ALWAYS",get errors(){return O(()=>!!i().missing)()?[x.mandatoryField]:O(()=>!!i().tooLong)()?[x.charLimitBy.replace("{}",String(dn))]:[]}}),o,g),s(l,r(j,{icon:"paper-plane",label:"Spielende informieren",get kind(){return i().hasErrors?"gray":"success"},get disabled(){return i().hasErrors},get onClick(){return i().hasErrors?void 0:()=>{e.onSend(t.updateText.value),n("hasBeenSent",!0)}}}),m,h),l})()]}})}})}function rl(e){const[t,n]=D(e.store);return[(()=>{var i=d(Vi);return s(i,r(W,{each:ut,children:l=>r(At,{get label(){return l.label},get description(){return l.description},get checked(){return t.includes(l.name)},get name(){return l.name},get value(){return l.name},onValueUpdate:a=>{n(a?t.concat([l.name]):t.filter(o=>o!==l.name))},get disabled(){return!e.isEditable}})})),i})(),r(C,{get children(){return x.tagIdeas}})]}const il=(e,t)=>{if(e.loading)return{kind:"LOADING"};if(e.error)return{kind:"ERROR"};const n=e();return n===void 0||n.kind==="FAILURE"?{kind:"ERROR"}:{kind:"SUCCESS",data:n.data.filter(i=>t.includes(i.uuid))}},ll=tn("kind",[v({kind:U("CHOOSE"),uuid:Ge()}),v({kind:U("PLAYER"),uuid:Ge()}),v({kind:U("GAME"),uuid:f().uuid()}),v({kind:U("GAMEMASTER"),uuid:Ge()}),v({kind:U("HELPING"),uuid:Ge()}),v({kind:U("SUMMARY"),uuid:Ge()}),v({kind:U("EDIT_GAMEROUND"),uuid:f().uuid()})]);tn("kind",[v({kind:U("CHOOSE")}),v({kind:U("PLAYER")}),v({kind:U("GAME"),uuid:f().uuid()}),v({kind:U("GAMEMASTER")}),v({kind:U("HELPING")}),v({kind:U("SUMMARY")}),v({kind:U("EDIT_GAMEROUND"),uuid:f().uuid()})]);const al=ot(["SAVING","IDLE","ERROR"]),sl=v({saveState:al,page:ll,secret:f(),showCreateMessage:Ie(),isDebugging:Ie()});function cn(e){const t=e.searchParams.get("page")??"",n=e.searchParams.get("uuid")??null,i=e.searchParams.get("secret")??"",l=e.searchParams.get("showCreateMessage")==="true",a=e.searchParams.get("debug")==="true",o=sl.safeParse({saveState:"IDLE",page:{kind:t.toUpperCase(),uuid:n},secret:i,showCreateMessage:l,isDebugging:a});return o.success?o.data:{saveState:"IDLE",page:{kind:"CHOOSE",uuid:null},secret:i,showCreateMessage:l,isDebugging:a}}function ol(e,t){return e.kind!==t.kind?!1:e.kind==="EDIT_GAMEROUND"&&t.kind==="EDIT_GAMEROUND"||e.kind==="GAME"&&t.kind==="GAME"?e.uuid===t.uuid:!0}const dl="2024-08-15T07:45:21.335Z",_e={game:"37831e19-29d6-40bd-b99d-fb91b78aa7f9",slot:"bfcbd156-b703-4664-9944-8936aede8476",slot2:"f58e7242-e1ff-4cfc-a992-ca18dd5207c3",program:"16f387ab-0adf-406b-ba5c-2e4eb200fda8",program2:"11b6b38a-a4d3-40ed-9d4a-d2abcab661a5",program3:"5294bc63-4857-404e-b72d-53ecbd87a27b",program4:"6e9477f1-6dd5-4cd7-b3c3-03085022d967"};function ul(e,t){const n=localStorage.getItem(e);return n===null?t:n}function gl(e,t){localStorage.setItem(e,t)}const mn="SAVE",cl={version:1,init:{name:"John Doe",email:"john@doe.ch",mobile:"+41 66 123 45 67"},lastSaved:dl,playing:{wantsUpdates:!1,reservations:[]},master:{games:[{uuid:_e.game,kind:"published",title:"Grolle in der Dunkelheit",system:"Warhammer Fantasy Rollenspiel",description:{short:"Ein kurzes Abenteuer bei dem es um Fantasy, Action und einfaches Rollenspiel geht.",long:"Eine kleine Gruppe wagt sich in die dunklen SchÃ¤chten einer Mine und weiter hinab, um einen mÃ¤chtigen Gegenstand wieder zu erlangen. Wie werden die GefÃ¤hrten auf die Gefahren des Untergrundes reagieren und welche Gefahren lauern in der Finsternis?"},slots:[{uuid:_e.slot,day:"SATURDAY",from:10,to:12},{uuid:_e.slot2,day:"SUNDAY",from:14,to:17}],playerCount:{min:1,max:3},tagNames:["deutsch"]}],wantsHelp:!1},helping:{},publishState:"published"};async function ml(){return new Promise(e=>setTimeout(()=>e({kind:"SUCCESS",data:JSON.parse(ul(mn,JSON.stringify(cl)))}),1e3))}async function $l(e,t){return new Promise(n=>setTimeout(()=>(gl(mn,JSON.stringify(e)),n({kind:"SUCCESS",data:t})),1e3))}const hl=[{uuid:_e.program,gamemaster:"Game Master",title:"Grolle in der Dunkelheit",system:"Warhammer Fantasy Rollenspiel",description:{short:"Ein kurzes Abenteuer bei dem es um Fantasy, Action und einfaches Rollenspiel geht.",long:"Eine kleine Gruppe wagt sich in die dunklen SchÃ¤chten einer Mine und weiter hinab, um einen mÃ¤chtigen Gegenstand wieder zu erlangen. Wie werden die GefÃ¤hrten auf die Gefahren des Untergrundes reagieren und welche Gefahren lauern in der Finsternis?"},slot:{day:"SATURDAY",from:10,to:13},playerCount:{min:1,max:3,reserved:0},tags:["ab12jahren"]},{uuid:_e.program2,gamemaster:"Other Game Master",title:"Acrimony",system:"D&D",description:{short:"Ein Lo-Fi Space Western Abenteuer",long:'Ein Lo-Fi Space Western Abenteuer: "Eine frisch formierte Gruppe von KopfgeldjÃ¤gern wird mit einer riskanten Mission betraut: Sie mÃ¼ssen den berÃ¼chtigten Outlaw Jeb "Rusty" Rourke in der abgeschiedenen Grenzstadt aufspÃ¼ren. Bei dieser unbarmherzigen Jagd lernen die Spieler die harte RealitÃ¤t der Kopfgeldjagd kennen, wo jeder Schuss und jede Entscheidung Ã¼ber ihr Schicksal entscheidet.'},slot:{day:"SATURDAY",from:10,to:13},playerCount:{min:2,max:8,reserved:3},tags:["ab12jahren","horror"]},{uuid:_e.program3,gamemaster:"Other Game Master",title:"Acrimony",system:"D&D",description:{short:"Ein Lo-Fi Space Western Abenteuer",long:'Ein Lo-Fi Space Western Abenteuer: "Eine frisch formierte Gruppe von KopfgeldjÃ¤gern wird mit einer riskanten Mission betraut: Sie mÃ¼ssen den berÃ¼chtigten Outlaw Jeb "Rusty" Rourke in der abgeschiedenen Grenzstadt aufspÃ¼ren. Bei dieser unbarmherzigen Jagd lernen die Spieler die harte RealitÃ¤t der Kopfgeldjagd kennen, wo jeder Schuss und jede Entscheidung Ã¼ber ihr Schicksal entscheidet.'},slot:{day:"SATURDAY",from:14,to:18},playerCount:{min:2,max:8,reserved:3},tags:["ab12jahren","horror"]},{uuid:_e.program4,gamemaster:"Some Other Game Master",title:"Solo RPGs",system:"",description:{short:"Wir spielen primÃ¤r das Solo Rollenspiel NoteQuest, werden aber kurz auch noch ein paar andere Solo Rollenspiele miteinander anschauen.",long:""},slot:{day:"SATURDAY",from:14,to:18},playerCount:{min:2,max:4,reserved:3},tags:[]}];async function Sl(){return new Promise(e=>setTimeout(()=>e({kind:"SUCCESS",data:hl}),5e3))}const _l=[{uuid:_e.slot,name:"Alice"},{uuid:_e.slot,name:"Bob"}];async function bl(e){return new Promise(t=>setTimeout(()=>t({kind:"SUCCESS",data:_l.filter(n=>e.includes(n.uuid))}),5e3))}var fl=c("<div aria-atomic=true><!$><!/><!$><!/>"),vl=c("<div class=toast-container aria-live=polite aria-atomic=true>");const[ke,Ke]=D([]);function kl(e){const t=()=>{const n=["toast"];return e.options.kind!==void 0&&n.push(`toast-${e.options.kind}`),n.join(" ")};return(()=>{var n=d(fl),i=n.firstChild,[l,a]=u(i.nextSibling),o=l.nextSibling,[g,$]=u(o.nextSibling);return s(n,()=>e.options.message,l,a),s(n,r(E,{get when(){return e.options.dismissable},get children(){return r(re,{kind:"ghost",get label(){return r(ne,{icon:"xmark",classes:["toast-dismiss"]})},get onClick(){return e.dismiss}})}}),g,$),ge(m=>{var h=t(),S=e.options.kind==="danger"?"alert":"status",_=e.options.kind==="danger"?"assertive":"polite";return h!==m.e&&Ae(n,m.e=h),S!==m.t&&nt(n,"role",m.t=S),_!==m.a&&nt(n,"aria-live",m.a=_),m},{e:void 0,t:void 0,a:void 0}),n})()}function yl(){function e(t){ke.find(n=>n.uuid===t)?.cleanup(),Ke(ke.filter(n=>n.uuid!==t))}return(()=>{var t=d(vl);return s(t,r(W,{each:ke,children:n=>r(kl,{options:n,dismiss:()=>e(n.uuid)})})),t})()}function $n(e,t){if(t?.uuid!==void 0&&ke.find(g=>g.uuid===t.uuid)!==void 0)return wt(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),i=t?.duration??5e3,l=t?.kind??"gray",a=t?.dismissable??!0,o=setTimeout(()=>{Ke(ke.filter(g=>g.uuid!==n))},i);return Ke(ke.length,{uuid:n,kind:l,message:e,duration:i,dismissable:a,cleanup:()=>clearTimeout(o)}),n}function wt(e,t,n){const i=ke.find($=>$.uuid===e);if(i===void 0)return e;i.cleanup();const l=n.duration??i.duration,a=n.kind??i.kind,o=n?.dismissable??i.dismissable,g=setTimeout(()=>{Ke(ke.filter($=>$.uuid!==e))},l);return Ke($=>$.uuid===e,{uuid:e,kind:a,message:t,duration:l,dismissable:o,cleanup:()=>clearTimeout(g)}),e}const xl={version:1,init:{name:"",email:"",mobile:""},lastSaved:new Date().toISOString(),playing:{wantsUpdates:!0,reservations:[]},master:{games:[],wantsHelp:!1},helping:{},publishState:"draft"};async function pl(e){const t=new URL(rt("/rst25/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const i=await n.json();return typeof i=="object"&&i!==null?{kind:"SUCCESS",data:Object.assign(xl,i)}:(console.error("`last_save` not found on ",i),{kind:"FAILURE"})}async function El(e,t){try{const n=await fetch(rt("/rst25/save"),{method:"post",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function Cl(){try{const e=await fetch(rt("/rst25/program"),{headers:{"Content-Type":"application/json"}});return e.ok?{kind:"SUCCESS",data:await e.json()}:(console.error(await e.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}async function wl(e){try{const t=new URL(rt("/rst25/registrations"));t.searchParams.append("secret",e);const n=await fetch(t);return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}const Rl=v({name:f(),email:f(),mobile:f()}),Al=v({name:f(),email:f(),mobile:f()}),Tl=Tt([v({kind:U("SELF"),gameRound:f().uuid(),uuid:f().uuid()}),v({kind:U("FRIEND"),gameRound:f().uuid(),name:f(),uuid:f().uuid()})]),Dl=v({wantsUpdates:Ie(),reservations:ie(Tl)}),Ul=Tt([v({kind:U("SELF"),gameRound:f().uuid(),uuid:f().uuid()}),v({kind:U("FRIEND"),gameRound:f().uuid(),name:f(),uuid:f().uuid()})]);Tt([v({kind:U("SELF"),gameRound:f().uuid()}),v({kind:U("FRIEND"),gameRound:f().uuid(),name:f()})]);const Ol=v({wantsUpdates:Ie(),reservations:ie(Ul)}),Ml=v({games:ie(gr),wantsHelp:Ie()}),Nl=v({games:ie(sn),wantsHelp:Ie()}),Il=v({}),Pl=v({}),Ll=v({version:U(1),init:Rl,lastSaved:f(),playing:Dl,master:Ml,helping:Il,publishState:dt}),Fl=v({version:U(1),init:Al,lastSaved:In.date(),playing:Ol,master:Nl,helping:Pl,publishState:dt});async function Gl(e){const t=e==="demo"?await ml():await pl(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Ll.safeParse(t.data);if(!n.success)return console.error(n.error),{kind:"FAILURE"};const i=Hl(n.data);return i.success?{kind:"SUCCESS",data:i.data}:{kind:"FAILURE"}}function Hl(e){return Fl.safeParse(e)}const Et=crypto.randomUUID();async function Bl(e,t,n){const[i,l]=D(e);l("saveState","SAVING"),$n("Am Speichern...",{uuid:Et,dismissable:!1});const a=new Date;t.lastSaved=a;const o=Yl(t);try{if((n==="demo"?await $l(o,n):await El(o,n)).kind==="FAILURE")throw Error("")}catch(g){return l("saveState","ERROR"),console.error(g),wt(Et,"Speichern war nicht mÃ¶glich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return wt(Et,`Zuletzt gespeichert um: ${Qt(a)} Uhr`,{kind:"success",dismissable:!0}),l("saveState","IDLE"),{kind:"SUCCESS",data:a}}function Yl(e){return{...e,lastSaved:String(e.lastSaved),master:{...e.master,games:e.master.games.map($r)}}}const zl=An(Bl,1e3);var jl=c("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Be(e){return(()=>{var t=d(jl),n=t.firstChild,i=n.nextSibling,[l,a]=u(i.nextSibling);return s(n,()=>e.tooltip),s(t,()=>e.children,l,a),t})()}var Wl=c("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),Zl=c('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>'),Kl=c("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center;><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),Vl=c("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center;><!$><!/><em>Am Speichern..."),ql=c("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center;><!$><!/><em>Speichern war nicht mÃ¶glich!");function Jl(e){return(()=>{var t=d(Wl),n=t.firstChild,i=n.firstChild,[l,a]=u(i.nextSibling),o=l.nextSibling,[g,$]=u(o.nextSibling),m=g.nextSibling,[h,S]=u(m.nextSibling),_=h.nextSibling,[b,k]=u(_.nextSibling),y=b.nextSibling,[p,w]=u(y.nextSibling);return s(n,r(Be,{tooltip:"Zur Ãbersicht",get children(){return r(re,{get label(){return r(ne,{icon:"backward"})},onClick:()=>e.changePage({kind:"CHOOSE"})})}}),l,a),s(n,r(Be,{tooltip:"Zu den Spielrunden",get children(){return r(re,{get label(){return r(ne,{icon:"dice-d20"})},onClick:()=>e.changePage({kind:"PLAYER"})})}}),g,$),s(n,r(Be,{tooltip:"Zu deinen Spielrunden",get children(){return r(re,{get label(){return r(ne,{icon:"grid-2-plus"})},onClick:()=>e.changePage({kind:"GAMEMASTER"})})}}),h,S),s(n,r(Be,{tooltip:"Zum Helferplan",get children(){return r(re,{get label(){return r(ne,{icon:"hand-heart"})},onClick:()=>e.changePage({kind:"HELPING"})})}}),b,k),s(n,r(Be,{tooltip:"Zur Zusammenfassung",get children(){return r(re,{get label(){return r(ne,{icon:"list"})},onClick:()=>e.changePage({kind:"SUMMARY"})})}}),p,w),t})()}function Ql(e){return[r(C,{type:"gray",get children(){var t=d(Zl),n=t.firstChild,[i,l]=u(n.nextSibling),a=i.nextSibling,[o,g]=u(a.nextSibling),$=o.nextSibling,[m,h]=u($.nextSibling),S=m.nextSibling,[_,b]=u(S.nextSibling),k=_.nextSibling,[y,p]=u(k.nextSibling);return s(t,r(j,{icon:"backward",label:"Zur Ãbersicht",onClick:()=>e.changePage({kind:"CHOOSE"})}),i,l),s(t,r(j,{icon:"dice-d20",label:"Zu den Spielrunden",onClick:()=>e.changePage({kind:"PLAYER"})}),o,g),s(t,r(j,{icon:"grid-2-plus",label:"Zu deinen Spielrunden",onClick:()=>e.changePage({kind:"GAMEMASTER"})}),m,h),s(t,r(j,{icon:"hand-heart",label:"Zum Helferplan",onClick:()=>e.changePage({kind:"HELPING"})}),_,b),s(t,r(j,{icon:"list",label:"Zur Zusammenfassung",onClick:()=>e.changePage({kind:"SUMMARY"})}),y,p),t}}),r(Xl,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function Xl(e){return r($e,{get children(){return[r(R,{get when(){return e.saveState==="IDLE"},get children(){var t=d(Kl),n=t.firstChild,[i,l]=u(n.nextSibling),a=i.nextSibling,o=a.firstChild,g=o.nextSibling,[$,m]=u(g.nextSibling);return $.nextSibling,s(t,r(ne,{icon:"circle-check"}),i,l),s(a,()=>Qt(e.lastSaved),$,m),t}}),r(R,{get when(){return e.saveState==="SAVING"},get children(){var t=d(Vl),n=t.firstChild,[i,l]=u(n.nextSibling);return i.nextSibling,s(t,r(ne,{icon:"floppy-disk-circle-arrow-right"}),i,l),t}}),r(R,{get when(){return e.saveState==="ERROR"},get children(){var t=d(ql),n=t.firstChild,[i,l]=u(n.nextSibling);return i.nextSibling,s(t,r(ne,{icon:"triangle-exclamation"}),i,l),t}})]}})}var ea=c("<div class=page><!$><!/><div class=page-content><h2></h2><br><!$><!/></div><!$><!/>"),ta=c("<div class=extended-wrapper style=margin-block-start:1rem;>");function Me(e){return(()=>{var t=d(ea),n=t.firstChild,[i,l]=u(n.nextSibling),a=i.nextSibling,o=a.firstChild,g=o.nextSibling,$=g.nextSibling,[m,h]=u($.nextSibling),S=a.nextSibling,[_,b]=u(S.nextSibling);return s(t,(()=>{var k=O(()=>e.showQuickmenu!==!1);return()=>k()?r(Jl,{get changePage(){return e.changePage},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}}):null})(),i,l),s(o,()=>e.title),s(a,()=>e.children,m,h),s(t,(()=>{var k=O(()=>e.showQuickmenu!==!1);return()=>k()?(()=>{var y=d(ta);return s(y,r(Ql,{get changePage(){return e.changePage},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})),y})():null})(),_,b),t})()}const na=v({uuid:f().uuid(),name:f()}),hn=ie(na),ra=hn;async function ia(e,t){const n=e==="demo"?await bl(t):await wl(e);if(n.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const i=hn.safeParse(n.data);if(!i.success)return{kind:"FAILURE"};const l=la(i.data);return l.success?{kind:"SUCCESS",data:l.data}:{kind:"FAILURE"}}function la(e){return ra.safeParse(e)}const aa=v({uuid:f().uuid(),title:f(),system:f(),gamemaster:f(),description:v({short:f(),long:f()}),slot:v({day:Ut,from:J(),to:J()}),playerCount:v({min:J(),max:J(),reserved:J()}),tags:ie(f())}),sa=ie(aa),oa=v({uuid:f().uuid(),title:f(),system:f(),gamemaster:f(),description:v({short:f(),long:f()}),slot:v({day:Ut,from:J(),to:J()}),playerCount:v({min:J(),max:J(),reserved:J()}),tags:ie(f())}),da=ie(oa);async function ua(e){const t=e==="demo"?await Sl():await Cl();if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=sa.safeParse(t.data);if(!n.success)return{kind:"FAILURE"};const i=ga(n.data);return i.success?{kind:"SUCCESS",data:i.data}:{kind:"FAILURE"}}function ga(e){return da.safeParse(e)}var Vt=c("<br>"),qt=c("<pre>"),ca=c("<hr>"),ma=c("<div><code>Registrations (read-only)"),$a=c("<em>loading...");function ha(e){const t=new URL(location.href);t.searchParams.set("page",e.page.kind.toLowerCase()),e.page.kind==="EDIT_GAMEROUND"&&t.searchParams.set("uuid",e.page.uuid),t.searchParams.delete("showCreateMessage"),history.replaceState({page:e},"",t);const n=x.pageTitle[e.page.kind];document.title=x.metaTitle.replace("{}",n)}function Sa(e){const[t,n]=D(e.page);return(i,l)=>{if(ol(i,t))return;const a=l?.backButton??!1,o=l?.disableScroll??!1,g=new URL(location.href);g.searchParams.set("page",i.kind.toLowerCase()),i.kind==="EDIT_GAMEROUND"||i.kind==="GAME"?(g.searchParams.set("uuid",i.uuid),n(i)):(g.searchParams.delete("uuid"),n({...i,uuid:null})),a||history.pushState({page:i},"",g);const $=x.pageTitle[i.kind];document.title=x.metaTitle.replace("{}",$),o||window.scrollTo({top:0})}}function _a(e){ha(e.meta);const[t,n]=D({meta:e.meta,save:e.save}),i=()=>t.save.master.games.flatMap(S=>S.slots.map(_=>_.uuid)),[l]=et(i(),S=>ia(t.meta.secret,S)),[a]=et(()=>ua(t.meta.secret)),o=crypto.randomUUID(),[g,$]=Rt(!1);et(()=>JSON.stringify(t.save),async()=>{if(!g()){$(!0);return}if(t.save.publishState!=="published"){$n("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:o});return}const S=Mn(t.save);try{const _=await zl(t.meta,S,t.meta.secret);_.kind==="FAILURE"?console.error(_):n("save","lastSaved",_.data)}catch(_){console.error(_),n("meta","saveState","ERROR")}});const m=Sa(t.meta),h=Tn();return en(()=>{window.addEventListener("popstate",S=>{if(typeof S=="object"&&S!==null&&"state"in S){const _=new URL(location.href),b=cn(_);m(b.page,{backButton:!0})}}),setInterval(async()=>{const S=h.dequeue();S.kind==="NEXT_ELEMENT"&&await S.data()},1e3)}),[r(E,{get when(){return t.meta.showCreateMessage},get children(){return[r(C,{type:"success",get children(){return x.registrationStarted}}),d(Vt)]}}),r(E,{get when(){return t.save.publishState!=="published"},get children(){return[r(C,{type:"danger",children:"Diese Anmeldung wurde deaktiviert. Sollte dies ein Fehler sein, kontaktiere uns bitte."}),d(Vt)]}}),r($e,{get fallback(){return r(Me,{title:"Wo mÃ¶chtest du starten?",showQuickmenu:!1,changePage:m,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return r(ii,{changePage:m,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get isDebugging(){return t.meta.isDebugging}})}})},get children(){return[r(R,{get when(){return t.meta.page.kind==="PLAYER"||t.meta.page.kind==="GAME"},get children(){return r(Me,{title:"SpielrundenÃ¼bersicht",changePage:m,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return r(Wr,{get store(){return t.save.playing},program:a,get uuid(){return t.meta.page.kind==="GAME"?t.meta.page.uuid:null},get isEditable(){return t.save.publishState==="published"},changePage:m,get isDebugging(){return t.meta.isDebugging}})}})}}),r(R,{get when(){return t.meta.page.kind==="GAMEMASTER"},get children(){return r(Me,{title:"Meine Spielrunden",changePage:m,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return r(yr,{get store(){return t.save.master},get isEditable(){return t.save.publishState==="published"},changePage:m})}})}}),r(R,{get when(){return t.meta.page.kind==="EDIT_GAMEROUND"},get children(){return r(Me,{title:"Spielrunde editieren",changePage:m,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return r(qi,{get allRounds(){return t.save.master.games},get uuid(){return t.meta.page.kind==="EDIT_GAMEROUND"?t.meta.page.uuid:"should never happen"},get fallback(){return r(C,{type:"danger",get children(){return x.error.gameroundUuidError}})},children:S=>r(Ji,{store:S,registrations:l,queue:h,get isEditable(){return t.save.publishState==="published"},changePage:m})})}})}}),r(R,{get when(){return t.meta.page.kind==="HELPING"},get children(){return r(Me,{title:"Helfen",changePage:m,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return r(or,{})}})}}),r(R,{get when(){return t.meta.page.kind==="SUMMARY"},get children(){return r(Me,{title:"Zusammenfassung",changePage:m,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return r(nr,{get store(){return t.save},program:a,get isEditable(){return t.save.publishState==="published"},changePage:m})}})}})]}}),r(E,{get when(){return t.meta.isDebugging},get children(){return[(()=>{var S=d(qt);return s(S,()=>JSON.stringify(t,null,2)),S})(),d(ca),d(ma),r(st,{get fallback(){return d($a)},get children(){return r(E,{get when(){return l()},children:S=>(()=>{var _=d(qt);return s(_,()=>JSON.stringify(S(),null,2)),_})()})}})]}}),r(yl,{})]}function Sn(){return r(C,{get children(){return x.loading.registration}})}function Ea(){const[e,t]=Rt(null);return en(()=>{const n=new URL(location.href);t(cn(n))}),r(E,{get fallback(){return r(Sn,{})},get when(){return e()},children:n=>r(ba,{get page(){return n()}})})}function ba(e){const[t]=et(()=>Gl(e.page.secret));return r(On,{fallback:n=>(console.error(n),r(C,{type:"danger",get children(){return x.error.general}})),get children(){return r(st,{get fallback(){return r(Sn,{})},get children(){return r($e,{get children(){return r(R,{get when(){return t()},children:n=>{const{kind:i,value:l}=Dn(n());return i==="SECRET_INVALID"?r(C,{type:"danger",get children(){return x.error.secretError}}):i==="FAILURE"?(console.error(l),r(C,{type:"danger",get children(){return x.error.ourMistake}})):r(_a,{get meta(){return e.page},get save(){return l.data}})}})}})}})}})}export{Ea as MeineAnmeldungWrapper};
