import{d as B,g as o,t as D,i as b,c as S,s as F,a as G,b as U,r as C,m as H,o as j,e as N,f as e,u as z,h as k,S as m,F as L,j as V,M as I}from"./web.CZTMu7FX.js";import{I as P,B as E,a as J}from"./Box.C1feTEyg.js";var K=D("<button>");function Q(t){return(()=>{var n=o(K);return n.$$click=()=>t.onClick?.(),b(n,()=>t.label),S(s=>{var f=t.type??"button",i=`button-${t.kind??(t.disabled?"gray":"accent")}`,l=t.disabled===!0;return f!==s.e&&F(n,"type",s.e=f),i!==s.t&&G(n,s.t=i),l!==s.a&&U(n,"disabled",s.a=l),s},{e:void 0,t:void 0,a:void 0}),C(),n})()}B(["click"]);var X=D("<form method=post><!$><!/><!$><!/>");function Y(t){const n=H({language:"de",submitLabel:t.language==="en"?"Submit":"Absenden"},t);let s;j(()=>{s.setAttribute("novalidate",""),[...s.querySelectorAll('input[name^="redirect"][type="hidden"]')].forEach(l=>l.remove())});async function f(i){const{target:l}=i;if(l!==null&&l instanceof HTMLFormElement){i.preventDefault();const c=new FormData(l);if(!n.isValid(c))return;try{const u=await fetch(n.actionUrl,{method:"post",body:c});u.ok?n.onSuccess():n.onError(await u.text())}catch(u){n.onError(u)}}}return(()=>{var i=o(X),l=i.firstChild,[c,u]=N(l.nextSibling),$=c.nextSibling,[v,p]=N($.nextSibling),w=s;return typeof w=="function"?z(w,i):s=i,i.addEventListener("submit",f),b(i,()=>n.children,c,u),b(i,e(Q,{type:"submit",get label(){return n.submitLabel}}),v,p),S(()=>F(i,"action",n.actionUrl.href)),i})()}var Z=D("<label><!$><!/><textarea>");function ee(t){const n=H({required:!0},t);return(()=>{var s=o(Z),f=s.firstChild,[i,l]=N(f.nextSibling),c=i.nextSibling;return b(s,()=>n.label,i,l),c.$$input=u=>n.onValueUpdate(u.target.value),S(u=>{var $=n.name,v=n.label,p=n.required;return $!==u.e&&F(c,"name",u.e=$),v!==u.t&&F(c,"placeholder",u.t=v),p!==u.a&&U(c,"required",u.a=p),u},{e:void 0,t:void 0,a:void 0}),S(()=>U(c,"value",n.value)),C(),s})()}B(["input"]);var te=D("<input type=hidden>");function _(t){return(()=>{var n=o(te);return S(()=>F(n,"name",t.name)),S(()=>U(n,"value",t.value)),n})()}var q=D("<br>"),M=D("<p>");function A(){return{name:"",email:"",captcha:"",message:""}}function T(){return{name:[],email:[],captcha:[],message:[]}}const ne=new URL("https://elysium.gildedernacht.ch/forms");function le(t){const n="Name",s=t.language!=="en"?"E-Mail":"Email",f=t.language!=="en"?"Bitte leer lassen":"leave this field empty",i=t.language!=="en"?"Nachricht":"Message",[l,c]=k(A());let u;const[$,v]=k(!1),[p,w]=k(!1);function O(){w(!1),c(A()),v(!0)}function R(r){v(!1),w(!0),console.error(r)}const[d,y]=k(T());function x(r){return a=>{w(!1),y(T()),c(h=>({...h,[r]:a}))}}function W(r){y(T());const a=t.language==="en";if(l().name.trim().length===0){const h=a?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";y(g=>({...g,name:[...g.name,h]}))}if(l().email.trim().length===0){const h=a?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";y(g=>({...g,email:[...g.email,h]}))}if(u.validity.typeMismatch){const h=a?"The input does not seem to be a valid email address.":"Die Eingabe scheint keine gÃ¼ltige E-Mail-Adresse zu sein.";y(g=>({...g,email:[...g.email,h]}))}if(l().captcha.trim().length>0){const h=a?"This is field must be empty.":"Dieses Feld muss leer bleiben.";y(g=>({...g,captcha:[...g.captcha,h]}))}if(l().message.trim().length===0){const h=a?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";y(g=>({...g,message:[...g.message,h]}))}return d().name.length===0&&d().email.length===0&&d().captcha.length===0&&d().message.length===0}return[e(Y,{actionUrl:ne,get language(){return t.language??"de"},isValid:W,onSuccess:O,onError:R,get children(){return[e(P,{label:n,name:"private-name",get value(){return l().name},get onValueUpdate(){return x("name")}}),e(m,{get when(){return d().name.length>0},get children(){return e(E,{type:"danger",get children(){return e(L,{get each(){return d().name},children:r=>(()=>{var a=o(M);return b(a,r),a})()})}})}}),e(J,{label:s,name:"private-email",type:"email",get value(){return l().email},get onValueUpdate(){return x("email")},ref(r){var a=u;typeof a=="function"?a(r):u=r}}),e(m,{get when(){return d().email.length>0},get children(){return e(E,{type:"danger",get children(){return e(L,{get each(){return d().email},children:r=>(()=>{var a=o(M);return b(a,r),a})()})}})}}),e(P,{label:f,name:"private-captcha",type:"email",required:!1,isHoneypot:!0,get value(){return l().captcha},get onValueUpdate(){return x("captcha")}}),e(m,{get when(){return d().captcha.length>0},get children(){return e(E,{type:"danger",get children(){return e(L,{get each(){return d().captcha},children:r=>(()=>{var a=o(M);return b(a,r),a})()})}})}}),e(ee,{label:i,name:"private-message",get value(){return l().message},get onValueUpdate(){return x("message")}}),e(m,{get when(){return d().message.length>0},get children(){return e(E,{type:"danger",get children(){return e(L,{get each(){return d().message},children:r=>(()=>{var a=o(M);return b(a,r),a})()})}})}}),e(m,{get when(){return t.language},children:r=>e(_,{name:"language",get value(){return r()}})}),e(m,{get when(){return t.category},children:r=>e(_,{name:"category",get value(){return r()}})}),e(m,{get when(){return t.referer},children:r=>e(_,{name:"referer",get value(){return r().href}})}),e(m,{get when(){return t.redirectOnSuccess},children:r=>e(_,{name:"redirect-on-success",get value(){return r().href}})}),e(m,{get when(){return t.redirectOnFailure},children:r=>e(_,{name:"redirect-on-failure",get value(){return r().href}})}),e(m,{get when(){return t.redirectOnSpam},children:r=>e(_,{name:"redirect-on-spam",get value(){return r().href}})})]}}),e(m,{get when(){return p()},get children(){return[o(q),e(E,{type:"danger",get children(){return e(V,{fallback:"Leider konnten wir die Nachricht nicht absenden. Bitte versuche es erneut.",get children(){return e(I,{get when(){return t.language==="en"},children:"There was a problem sending your message. Please try again."})}})}})]}}),e(m,{get when(){return $()},get children(){return[o(q),e(E,{type:"success",get children(){return e(V,{fallback:"Nachricht wurde erfolgreich gesendet.",get children(){return e(I,{get when(){return t.language==="en"},children:"Message successfully sent."})}})}})]}})]}export{le as ContactFormImpl};
