import{g as o,t as c,a as g,i as l,c as t,m as L,S as N,F as H,M as T,b as J,d as Mn,e as kn,r as Rn,f as Tn,o as wn,h as He,j as On,E as Dn}from"./web.1RVVorbY.js";import{e as de,b as A,c as O,I as Fe,B as w,d as Ge,g as Oe,f as Nn}from"./utils.1P71LoqB.js";/* empty css                                 */import{e as Pn,a as I,o as C,s as v,b as G,n as y,c as In,l as rn,u as ln,d as an,C as Ln}from"./Checkbox.CSjWijbd.js";import{c as Ie}from"./store.-NeFskb4.js";import{T as We}from"./Textarea.DI0zCfac.js";const W=1,Ze="SAVE",Ke="PROGRAM",ze={registrationId:-1,name:"Demo",email:"demo@mail.com",handynummer:"+41 12 123 12 12",wantsEmailUpdates:!0,games:[],lastSaved:"2024-08-15T07:45:21.335Z",gameMaster:{games:[{uuid:crypto.randomUUID(),titel:"My game",system:"My own",descriptionShort:"lorem",descriptionLong:"",slots:{SATURDAY:[{from:10,to:12}],SUNDAY:[]},playerCountMin:4,playerCountMax:5,tags:[]}]}};function Un(){const n=localStorage.getItem(Ze);let e;return n===null?e={version:W,data:ze}:e=JSON.parse(n),e.version!==W&&(console.error("Your local storage data was outdated and has been replaced with new demo content."),e={version:W,data:ze}),localStorage.setItem(Ze,JSON.stringify(e)),e.data}const Be={gameList:[],reservedList:[],openingHours:{SATURDAY:{open:{from:10,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}}};function Yn(){const n=localStorage.getItem(Ke);let e;return n===null?e={version:W,data:Be}:e=JSON.parse(n),e.version!==W&&(console.error("Your local storage data was outdated and has been replaced with new demo content."),e={version:W,data:Be}),localStorage.setItem(Ke,JSON.stringify(e)),e.data}const sn=Pn(["SATURDAY","SUNDAY"]);function je(n,e=!1){const{from:r,to:i}=n;if(r>i)return[];const s=i-r;return[...Array(e?s+1:s)].map((a,u)=>u+r)}I(C({uuid:v(),description:G(v()),title:G(v()),system:v(),master:C({first:v(),last:G(v())}),playerCount:C({min:y(),max:y()}),slot:C({day:sn,start:y(),end:y()})}));const on=C({game:v(),self:rn(!0),spielerName:In()}),gn=C({game:v(),self:rn(!1),spielerName:v()}),Hn=ln([on.extend({id:y()}),gn.extend({id:y()})]),Fn=ln([on,gn]),Gn=C({titel:v(),system:v(),descriptionShort:v(),descriptionLong:v(),slots:C({SATURDAY:I(C({from:y(),to:y()})),SUNDAY:I(C({from:y(),to:y()}))}),playerCountMin:y(),playerCountMax:y(),tags:I(v())}),Wn=Gn.extend({uuid:v().uuid()}),Zn=C({games:I(Wn)}),Kn=C({registrationId:y(),name:v(),email:v(),handynummer:v(),wantsEmailUpdates:an(),games:I(Hn),gameMaster:Zn,lastSaved:v()});C({registrationId:y(),name:v(),email:v(),handynummer:v(),wantsEmailUpdates:an(),games:I(Fn),lastSaved:v()});async function zn(n){if(n==="demo")return{kind:"SUCCESS",save:Un()};const e=de("/rst24/load");e.searchParams.append("secret",n);const r=await fetch(e);if(!r.ok)return{kind:"FAILED"};const i=await r.json(),s=Kn.safeParse(i);return s.success?{kind:"SUCCESS",save:s.data}:{kind:"FAILED"}}const Bn=C({uuid:v(),title:G(v()),system:v(),description:G(v()),playerCount:C({min:y(),max:y()}),master:C({first:v(),last:G(v())}),slot:C({day:sn,start:y(),end:y()})}),jn=C({id:y(),gameId:v()});async function Vn(n){if(n)return{kind:"SUCCESS",program:Yn()};const e=de("/rst24/program"),r=de("/rst24/reserved"),[i,s]=await Promise.all([fetch(e),fetch(r)]);if(!i.ok)return{kind:"FAILED"};if(!s.ok)return{kind:"FAILED"};const a=await i.json(),u=await s.json(),_=I(Bn).safeParse(a);if(!_.success)return{kind:"FAILED"};const p=I(jn).safeParse(u);return p.success?{kind:"SUCCESS",program:{gameList:_.data,reservedList:p.data,openingHours:{SATURDAY:{open:{from:10,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}}}}:{kind:"FAILED"}}const cn=[{name:"children",label:"Kinderfreundlich",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{name:"selfmade",label:"Mein eigenes System",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}];function dn(){return{titel:"",system:"",descriptionShort:"",descriptionLong:"",slots:{SATURDAY:[],SUNDAY:[]},playerCountMin:3,playerCountMax:6,tags:[]}}function un(){return{titleMissing:!1,descriptionShortMissing:!1,descriptionShortTooLong:!1,descriptionLongTooLong:!1,slotMissing:!1}}const ge=200,ce=500;function De(n){return n.titleMissing||n.descriptionShortMissing||n.descriptionShortTooLong||n.descriptionLongTooLong||n.slotMissing}const Ve={CHOOSE:"Übersicht",PLAYER:"Spielanmeldung",GAMEMASTER:"Spielleitung",GAMEMASTER_NEW:"Neue Spielrunde",GAMEMASTER_EDIT:"Spielrunde editieren",HELPING:"Helfen",SUMMARY:"Zusammenfassung"},qn=["CHOOSE","PLAYER","GAMEMASTER","GAMEMASTER_NEW","GAMEMASTER_EDIT","HELPING","SUMMARY"];function mn(n){const e=n.searchParams.get("page"),r=qn.find(i=>e?.toUpperCase()===i.toUpperCase())??"CHOOSE";if(r==="GAMEMASTER_EDIT"){const i=n.searchParams.get("uuid");return i!==null?[r,i]:["GAMEMASTER"]}return[r]}function Jn(){const n=new URL(location.href),e=n.searchParams.get("secret"),r=mn(n),i=n.searchParams.get("showCreateMessage")==="true";return{secret:e,pageMeta:r,showCreateMessage:i}}async function hn(n){if(n.secret===null)throw Error("SECRET_ERROR");const e=await zn(n.secret);if(e.kind==="FAILED")throw Error("SECRET_ERROR");return{state:"IDLE",secret:n.secret,pageMeta:n.pageMeta,showCreateMessage:n.showCreateMessage,gameRoundEdit:{form:dn(),errors:un()},currentSave:e.save,activeTab:"Contact",lastSaved:e.save.lastSaved,hasChanged:!1,tentativeReservations:[],markedForDeletionReservations:[]}}async function Qn(n=!1){const e=await Vn(n);if(e.kind==="FAILED")throw Error("PROGRAM_ERROR");return e.program}function Xn(n){const[e,r]=Ie(n);function i(d){r("activeTab",d),window.scrollTo({top:0})}function s(d){const[m,S]=d,h=new URL(location.href);h.searchParams.set("page",m.toLowerCase()),S!==void 0&&h.searchParams.set("uuid",S),h.searchParams.delete("showCreateMessage"),history.replaceState({pageMeta:d},"",h);const M=Ve[m];document.title=`Meine Anmeldung: ${M} | Luzerner Rollenspieltage `}s(n.pageMeta);function a(d,m){if(d[0]===e.pageMeta[0]&&d[1]===e.pageMeta[1])return;const[S,h]=d;if(!m){const k=new URL(location.href);k.searchParams.set("page",S.toLowerCase()),h!==void 0&&k.searchParams.set("uuid",h),history.pushState({pageMeta:d},"",k)}const M=Ve[S];document.title=`Meine Anmeldung: ${M} | Luzerner Rollenspieltage `,r("pageMeta",d),window.scrollTo({top:0})}function u(){if(e.state!=="IDLE")throw Error("ASSERTION_ERROR");r("currentSave","gameMaster","games",e.currentSave.gameMaster.games.length,{...e.gameRoundEdit.form,uuid:crypto.randomUUID()}),r("gameRoundEdit","form",dn()),r("gameRoundEdit","errors",un())}function _(d,m){r("hasChanged",!0),r("currentSave",d,m)}async function p(){if(e.state!=="IDLE")throw Error("ASSERTION_ERROR");r("state","SAVING");const d=de("/rst24/save"),m={...e.currentSave,games:[...e.currentSave.games.filter(h=>!e.markedForDeletionReservations.includes(h.id)),...e.tentativeReservations.map(h=>h.friendsName===null?{game:h.gameUuid,self:!0,spielerName:null}:{game:h.gameUuid,self:!1,spielerName:h.friendsName})]};if((await fetch(d,{method:"post",body:JSON.stringify(m),headers:{"Content-Type":"application/json"}})).ok){const h=await hn({secret:e.secret,pageMeta:e.pageMeta,showCreateMessage:!1});r({...h,activeTab:e.activeTab})}else throw Error("SAVE_ERROR")}function b(d){r("hasChanged",!0),r("tentativeReservations",m=>[...m,d])}function $(d){if(r("hasChanged",!0),d.confirmed)r("markedForDeletionReservations",m=>[...m,d.reservationId]);else{const m=e.currentSave.name;r("tentativeReservations",S=>S.filter(h=>h.gameUuid!==d.gameUuid?!0:h.friendsName===d.name?!1:d.name!==m))}}return{state:e,actions:{changePage:a,createNewGame:u,changeTab:i,updateSave:_,saveCurrentState:p,addTentativeReservation:b,deleteReservation:$}}}var et=c("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function V(n){return(()=>{var e=o(et),r=e.firstChild,i=r.nextSibling,[s,a]=g(i.nextSibling);return l(r,()=>n.tooltip),l(e,()=>n.children,s,a),e})()}var nt=c("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),tt=c('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>'),rt=c("<div class=grid><!$><!/><span>Zur Übersicht"),it=c("<div class=grid><!$><!/><span>Zu den Spielrunden"),lt=c("<div class=grid><!$><!/><span>Zu deinen Spielrunden"),at=c("<div class=grid><!$><!/><span>Zum Helferplan"),st=c("<div class=grid><!$><!/><span>Zur Zusammenfassung");function ot(n){return(()=>{var e=o(nt),r=e.firstChild,i=r.firstChild,[s,a]=g(i.nextSibling),u=s.nextSibling,[_,p]=g(u.nextSibling),b=_.nextSibling,[$,d]=g(b.nextSibling),m=$.nextSibling,[S,h]=g(m.nextSibling),M=S.nextSibling,[k,x]=g(M.nextSibling);return l(r,t(V,{tooltip:"Zur Übersicht",get children(){return t(A,{get label(){return t(O,{icon:"backward"})},onClick:()=>n.changePage(["CHOOSE"])})}}),s,a),l(r,t(V,{tooltip:"Zu den Spielrunden",get children(){return t(A,{get label(){return t(O,{icon:"dice-d20"})},onClick:()=>n.changePage(["PLAYER"])})}}),_,p),l(r,t(V,{tooltip:"Zu deinen Spielrunden",get children(){return t(A,{get label(){return t(O,{icon:"grid-2-plus"})},onClick:()=>n.changePage(["GAMEMASTER"])})}}),$,d),l(r,t(V,{tooltip:"Zum Helferplan",get children(){return t(A,{get label(){return t(O,{icon:"hand-heart"})},onClick:()=>n.changePage(["HELPING"])})}}),S,h),l(r,t(V,{tooltip:"Zur Zusammenfassung",get children(){return t(A,{get label(){return t(O,{icon:"list"})},onClick:()=>n.changePage(["SUMMARY"])})}}),k,x),e})()}function gt(n){return(()=>{var e=o(tt),r=e.firstChild,[i,s]=g(r.nextSibling),a=i.nextSibling,[u,_]=g(a.nextSibling),p=u.nextSibling,[b,$]=g(p.nextSibling),d=b.nextSibling,[m,S]=g(d.nextSibling),h=m.nextSibling,[M,k]=g(h.nextSibling);return l(e,t(A,{get label(){return(()=>{var x=o(rt),D=x.firstChild,[E,R]=g(D.nextSibling);return E.nextSibling,l(x,t(O,{icon:"backward"}),E,R),x})()},onClick:()=>n.changePage(["CHOOSE"])}),i,s),l(e,t(A,{get label(){return(()=>{var x=o(it),D=x.firstChild,[E,R]=g(D.nextSibling);return E.nextSibling,l(x,t(O,{icon:"dice-d20"}),E,R),x})()},onClick:()=>n.changePage(["PLAYER"])}),u,_),l(e,t(A,{get label(){return(()=>{var x=o(lt),D=x.firstChild,[E,R]=g(D.nextSibling);return E.nextSibling,l(x,t(O,{icon:"grid-2-plus"}),E,R),x})()},onClick:()=>n.changePage(["GAMEMASTER"])}),b,$),l(e,t(A,{get label(){return(()=>{var x=o(at),D=x.firstChild,[E,R]=g(D.nextSibling);return E.nextSibling,l(x,t(O,{icon:"hand-heart"}),E,R),x})()},onClick:()=>n.changePage(["HELPING"])}),m,S),l(e,t(A,{get label(){return(()=>{var x=o(st),D=x.firstChild,[E,R]=g(D.nextSibling);return E.nextSibling,l(x,t(O,{icon:"list"}),E,R),x})()},onClick:()=>n.changePage(["SUMMARY"])}),M,k),e})()}var ct=c("<div class=page><!$><!/><div class=page-content><h2></h2><br><!$><!/></div><!$><!/>");function Z(n){return(()=>{var e=o(ct),r=e.firstChild,[i,s]=g(r.nextSibling),a=i.nextSibling,u=a.firstChild,_=u.nextSibling,p=_.nextSibling,[b,$]=g(p.nextSibling),d=a.nextSibling,[m,S]=g(d.nextSibling);return l(e,(()=>{var h=L(()=>n.showQuickmenu!==!1);return()=>h()?t(ot,{get changePage(){return n.changePage}}):null})(),i,s),l(u,()=>n.title),l(a,()=>n.children,b,$),l(e,(()=>{var h=L(()=>n.showQuickmenu!==!1);return()=>h()?t(gt,{get changePage(){return n.changePage}}):null})(),m,S),e})()}var dt=c("<pre><code>Noch nicht implementiert");function ut(n){return t(Z,{title:"Zusammenfassung",get changePage(){return n.changePage},get children(){return o(dt)}})}var mt=c("<pre><code>Noch nicht implementiert");function ht(n){return t(Z,{title:"Helfen",get changePage(){return n.changePage},get children(){return o(mt)}})}var qe=c("<br>"),$t=c("<strong>Donnerstag, 21. August 2025");const $n=function(){const e="Donnerstag, 21. August 2025",r=["Deine Anmeldung wurde erfolgreich gestartet.",o(qe),o(qe),"Wir haben eine E-Mail an deine Adresse gesendet. In dieser E-Mail findest du einen persönlichen Link, um deine Anmeldung bis am"," ",o($t)," anzupassen."];return{registrationDeadline:e,registrationStarted:r,days:{SATURDAY:"Samstag",SUNDAY:"Sonntag"}}}();var Je=c("<br>"),St=c("<h4>Spielrunde inkomplett"),_t=c("<div style=margin-top:1rem;display:flex;justify-content:flex-end;>"),ft=c('<form novalidate><!$><!/><!$><!/><!$><!/><div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem;"><!$><!/><!$><!/></div><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/><fieldset><legend>Zeitslots</legend><!$><!/><!$><!/></fieldset><fieldset><legend>Kategorien (optional)</legend><div style=display:grid;gap:0.5rem;></div></fieldset><!$><!/><div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between;><!$><!/><!$><!/>'),pt=c("<h6>Samstag, 23. August 2025"),Qe=c("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;>"),bt=c("<h6>Sonntag, 24. August 2025"),Xe=c("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center;><span>von <!$><!/> bis <!$><!/> Uhr</span><!$><!/>"),vt=c("<div style=display:grid;gap:0.5rem;>"),xt=c("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/>"),At=c("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/><!$><!/>"),yt=c("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/><!$><!/><div style=margin-block-start:1rem;>"),Et=c("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center;><!$><!/> <span>Neuen Slot erfassen"),Ct=c("<em>Wähle eine Tag:"),Mt=c("<div style=display:flex;flex-wrap:wrap;gap:.5rem;><!$><!/><!$><!/>"),kt=c("<em>Wähle eine Startzeit:"),Sn=c("<div style=display:flex;flex-wrap:wrap;gap:.5rem;>"),_n=c("<span style=white-space:nowrap;><!$><!/> Uhr"),Rt=c("<em>Wähle eine Endzeit:");function en(n){const[e,r]=Ie(n.store);function i(s){s.preventDefault();const[a,u]=[e.form.playerCountMin,e.form.playerCountMax].map(m=>Math.max(1,m)).toSorted((m,S)=>m-S);r("form","playerCountMin",a??1),r("form","playerCountMax",u??1);const _=e.form.titel.trim().length===0;r("errors","titleMissing",_);const p=e.form.descriptionShort.trim().length===0;r("errors","descriptionShortMissing",p);const b=e.form.descriptionShort.length>ge;r("errors","descriptionShortTooLong",b);const $=e.form.descriptionLong.length>ce;r("errors","descriptionLongTooLong",$);const d=e.form.slots.SATURDAY.concat(e.form.slots.SUNDAY).length===0;r("errors","slotMissing",d),!(e.errors.titleMissing||e.errors.descriptionShortMissing||e.errors.descriptionShortTooLong||e.errors.descriptionLongTooLong||e.errors.slotMissing)&&(n.createNewGame(),n.changePage(["GAMEMASTER"]))}return t(Z,{title:"Neue Spielrunde erfassen",get changePage(){return n.changePage},get children(){var s=o(ft),a=s.firstChild,[u,_]=g(a.nextSibling),p=u.nextSibling,[b,$]=g(p.nextSibling),d=b.nextSibling,[m,S]=g(d.nextSibling),h=m.nextSibling,M=h.firstChild,[k,x]=g(M.nextSibling),D=k.nextSibling,[E,R]=g(D.nextSibling),K=h.nextSibling,[Q,ue]=g(K.nextSibling),me=Q.nextSibling,[X,z]=g(me.nextSibling),he=X.nextSibling,[ee,$e]=g(he.nextSibling),Se=ee.nextSibling,[U,_e]=g(Se.nextSibling),fe=U.nextSibling,[ne,te]=g(fe.nextSibling),F=ne.nextSibling,pe=F.firstChild,be=pe.nextSibling,[re,ve]=g(be.nextSibling),xe=re.nextSibling,[ie,Ae]=g(xe.nextSibling),le=F.nextSibling,ye=le.firstChild,Ee=ye.nextSibling,Ce=le.nextSibling,[B,ae]=g(Ce.nextSibling),j=B.nextSibling,Me=j.firstChild,[se,ke]=g(Me.nextSibling),Re=se.nextSibling,[Te,we]=g(Re.nextSibling);return s.addEventListener("submit",i),l(s,t(Fe,{label:"Titel",name:"title",get value(){return e.form.titel},onValueUpdate:f=>{r("form","titel",f),r("errors","titleMissing",!1)}}),u,_),l(s,t(N,{get when(){return e.errors.titleMissing},get children(){return t(w,{type:"danger",children:"Dies ist ein Pflichtfeld."})}}),b,$),l(s,t(Fe,{label:"System (optional)",name:"System",get value(){return e.form.system},onValueUpdate:f=>r("form","system",f)}),m,S),l(h,t(Ge,{label:"Anzahl Mitspielende (Minimum)",name:"playerCountMin",get value(){return e.form.playerCountMin},onValueUpdate:f=>r("form","playerCountMin",f),min:1,get max(){return e.form.playerCountMax}}),k,x),l(h,t(Ge,{label:"Anzahl Mitspielende (Maximum)",name:"playerCountMax",get value(){return e.form.playerCountMax},onValueUpdate:f=>r("form","playerCountMax",f),get min(){return e.form.playerCountMin}}),E,R),l(s,t(We,{label:"kurze Beschreibung",name:"descriptionShort",get value(){return e.form.descriptionShort},onValueUpdate:f=>{r("form","descriptionShort",f),r("errors","descriptionShortMissing",!1),r("errors","descriptionShortTooLong",f.length>ge)},size:"sm"}),Q,ue),l(s,t(N,{get when(){return e.errors.descriptionShortMissing},get children(){return t(w,{type:"danger",children:"Dies ist ein Pflichtfeld."})}}),X,z),l(s,t(N,{get when(){return e.errors.descriptionShortTooLong},get children(){return t(w,{type:"danger",get children(){return["Dieses Feld ist auf ",ge," Zeichen limitiert."]}})}}),ee,$e),l(s,t(We,{label:"lange Beschreibung (optional)",name:"descriptionLong",get value(){return e.form.descriptionLong},onValueUpdate:f=>{r("form","descriptionLong",f),r("errors","descriptionLongTooLong",f.length>ce)}}),U,_e),l(s,t(N,{get when(){return e.errors.descriptionLongTooLong},get children(){return t(w,{type:"danger",get children(){return["Dieses Feld ist auf ",ce," Zeichen limitiert."]}})}}),ne,te),l(F,t(wt,{get slots(){return n.store.form.slots},get openingHours(){return n.openingHours},addTimeSlot:f=>{r("form","slots",f.day,e.form.slots[f.day].concat({from:f.from,to:f.to})),r("errors","slotMissing",!1)},removeTimeSlot:f=>r("form","slots",f.day,e.form.slots[f.day].filter(P=>P.from!==f.from||P.to!==f.to))}),re,ve),l(F,t(N,{get when(){return e.errors.slotMissing},get children(){return[o(Je),o(Je),t(w,{type:"danger",children:"Wähle mindestens einen Zeitslot aus."})]}}),ie,Ae),l(Ee,t(H,{each:cn,children:f=>t(Ln,{get label(){return f.label},get description(){return f.description},get checked(){return e.form.tags.includes(f.name)},get name(){return f.name},get value(){return f.name},onValueUpdate:P=>{P?r("form","tags",e.form.tags.concat([f.name])):r("form","tags",e.form.tags.filter(Y=>Y!==f.name))}})})),l(s,t(N,{get when(){return De(e.errors)},get children(){return t(w,{type:"danger",get children(){return[o(St),"Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde (siehe oben). Du kannst die Spielrunde als Entwurf speichern und später vervollständigen. Die Spielrunde wird erst veröffentlicht, wenn alle Informationen komplett sind.",(()=>{var f=o(_t);return l(f,t(A,{kind:"success",label:"Spielrunde als Entwurf speichern",onClick:()=>{n.createNewGame(),n.changePage(["GAMEMASTER"])}})),f})()]}})}}),B,ae),l(j,t(A,{kind:"danger",label:"Abbrechen",onClick:()=>n.changePage(["GAMEMASTER"])}),se,ke),l(j,t(A,{type:"submit",get kind(){return De(e.errors)?"gray":"success"},get disabled(){return De(e.errors)},label:"Spielrunde erstellen"}),Te,we),s}})}const nn=1;function Tt(n){function e(r){const i=je(r.open,!0);return r.breaks.map(a=>je(a,!0)).reduce((a,u)=>{const _=u.at(0),p=u.at(-1);if(_===void 0||p===void 0)return a;const b=[];return a.forEach($=>{const d=[],m=[];$.forEach(S=>{S<=_&&d.push(S),p<=S&&m.push(S)}),d.length>0&&b.push(d),m.length>0&&b.push(m)}),b},[i]).map(a=>{const u=a.slice(0,nn*-1);return Nn(u.map(_=>{const p=a.filter(b=>b>=_+nn);return[_,p]}))}).reduce((a,u)=>({...a,...u}),{})}return{SATURDAY:e(n.SATURDAY),SUNDAY:e(n.SUNDAY)}}function wt(n){const e=Tt(n.openingHours);return[t(Ot,{daySections:e,get chooseTimeSlot(){return n.addTimeSlot}}),t(N,{get when(){return n.slots.SATURDAY.length>0},get children(){return[o(pt),(()=>{var r=o(Qe);return l(r,t(H,{get each(){return n.slots.SATURDAY},children:i=>t(A,{get label(){return(()=>{var s=o(Xe),a=s.firstChild,u=a.firstChild,_=u.nextSibling,[p,b]=g(_.nextSibling),$=p.nextSibling,d=$.nextSibling,[m,S]=g(d.nextSibling);m.nextSibling;var h=a.nextSibling,[M,k]=g(h.nextSibling);return l(a,()=>i.from,p,b),l(a,()=>i.to,m,S),l(s,t(O,{icon:"trash",style:"color: var(--clr-danger-11);"}),M,k),s})()},kind:"gray",onClick:()=>n.removeTimeSlot({day:"SATURDAY",from:i.from,to:i.to})})})),r})()]}}),t(N,{get when(){return n.slots.SUNDAY.length>0},get children(){return[o(bt),(()=>{var r=o(Qe);return l(r,t(H,{get each(){return n.slots.SUNDAY},children:i=>t(A,{get label(){return(()=>{var s=o(Xe),a=s.firstChild,u=a.firstChild,_=u.nextSibling,[p,b]=g(_.nextSibling),$=p.nextSibling,d=$.nextSibling,[m,S]=g(d.nextSibling);m.nextSibling;var h=a.nextSibling,[M,k]=g(h.nextSibling);return l(a,()=>i.from,p,b),l(a,()=>i.to,m,S),l(s,t(O,{icon:"trash",style:"color: var(--clr-danger-11);"}),M,k),s})()},kind:"gray",onClick:()=>n.removeTimeSlot({day:"SUNDAY",from:i.from,to:i.to})})})),r})()]}})]}function Ot(n){const[e,r]=Ie({kind:"INITIAL"});return t(J,{get children(){return[t(T,{get when(){return e.kind==="INITIAL"},get children(){return t(A,{kind:"success",get label(){return(()=>{var i=o(Et),s=i.firstChild,[a,u]=g(s.nextSibling);return a.nextSibling,l(i,t(O,{icon:"circle-plus"}),a,u),i})()},onClick:()=>r({kind:"CHOOSE_DAY"})})}}),t(T,{get when(){return e.kind==="CHOOSE_DAY"},get children(){return t(w,{onClose:()=>r({kind:"INITIAL"}),get children(){var i=o(vt);return l(i,t(oe,{changeDay:s=>r({kind:"CHOOSE_START",day:s})})),i}})}}),t(T,{get when(){return e.kind==="CHOOSE_START"},get children(){return t(w,{onClose:()=>r({kind:"INITIAL"}),get children(){var i=o(xt),s=i.firstChild,[a,u]=g(s.nextSibling),_=a.nextSibling,[p,b]=g(_.nextSibling);return l(i,t(oe,{get chosenDay(){return e.kind==="CHOOSE_START"?e.day:void 0},changeDay:$=>r({kind:"CHOOSE_START",day:$})}),a,u),l(i,t(Ne,{get startTimes(){return L(()=>e.kind==="CHOOSE_START")()?Oe(n.daySections[e.day]):[]},changeStart:$=>r({kind:"CHOOSE_END",start:$})}),p,b),i}})}}),t(T,{get when(){return e.kind==="CHOOSE_END"},get children(){return t(w,{onClose:()=>r({kind:"INITIAL"}),get children(){var i=o(At),s=i.firstChild,[a,u]=g(s.nextSibling),_=a.nextSibling,[p,b]=g(_.nextSibling),$=p.nextSibling,[d,m]=g($.nextSibling);return l(i,t(oe,{get chosenDay(){return e.kind==="CHOOSE_END"?e.day:void 0},changeDay:S=>r({kind:"CHOOSE_START",day:S})}),a,u),l(i,t(Ne,{get chosenStart(){return e.kind==="CHOOSE_END"?e.start:void 0},get startTimes(){return L(()=>e.kind==="CHOOSE_END")()?Oe(n.daySections[e.day]):[]},changeStart:S=>r({kind:"CHOOSE_END",start:S})}),p,b),l(i,t(tn,{get endTimes(){return e.kind==="CHOOSE_END"?n.daySections[e.day][e.start]??[]:[]},changeEnd:S=>{e.kind==="CHOOSE_END"&&r({kind:"WAIT_FOR_CONFIRMATION",day:e.day,start:e.start,end:S})}}),d,m),i}})}}),t(T,{get when(){return e.kind==="WAIT_FOR_CONFIRMATION"},get children(){return t(w,{onClose:()=>r({kind:"INITIAL"}),get children(){var i=o(yt),s=i.firstChild,[a,u]=g(s.nextSibling),_=a.nextSibling,[p,b]=g(_.nextSibling),$=p.nextSibling,[d,m]=g($.nextSibling),S=d.nextSibling;return l(i,t(oe,{get chosenDay(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.day:void 0},changeDay:h=>r({kind:"CHOOSE_START",day:h})}),a,u),l(i,t(Ne,{get chosenStart(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.start:void 0},get startTimes(){return L(()=>e.kind==="WAIT_FOR_CONFIRMATION")()?Oe(n.daySections[e.day]):[]},changeStart:h=>r({kind:"CHOOSE_END",start:h})}),p,b),l(i,t(tn,{get chosenEnd(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.end:void 0},get endTimes(){return e.kind==="WAIT_FOR_CONFIRMATION"?n.daySections[e.day][e.start]??[]:[]},changeEnd:h=>{e.kind==="WAIT_FOR_CONFIRMATION"&&r({kind:"WAIT_FOR_CONFIRMATION",day:e.day,start:e.start,end:h})}}),d,m),l(S,t(A,{get label(){return`Slot "${e.kind==="WAIT_FOR_CONFIRMATION"?`${$n.days[e.day]}, von ${e.start} bis ${e.end} Uhr`:""}" erstellen`},kind:"success",onClick:()=>{e.kind==="WAIT_FOR_CONFIRMATION"&&(n.chooseTimeSlot({day:e.day,from:e.start,to:e.end}),r({kind:"INITIAL"}))}})),i}})}})]}})}function oe(n){return[o(Ct),(()=>{var e=o(Mt),r=e.firstChild,[i,s]=g(r.nextSibling),a=i.nextSibling,[u,_]=g(a.nextSibling);return l(e,t(A,{get kind(){return n.chosenDay==="SATURDAY"?"success":"gray"},label:"Samstag",onClick:()=>n.changeDay("SATURDAY")}),i,s),l(e,t(A,{get kind(){return n.chosenDay==="SUNDAY"?"success":"gray"},label:"Sonntag",onClick:()=>n.changeDay("SUNDAY")}),u,_),e})()]}function Ne(n){return[o(kt),(()=>{var e=o(Sn);return l(e,t(H,{get each(){return n.startTimes},children:r=>t(A,{get kind(){return n.chosenStart===r?"success":"gray"},get label(){return(()=>{var i=o(_n),s=i.firstChild,[a,u]=g(s.nextSibling);return a.nextSibling,l(i,r,a,u),i})()},onClick:()=>n.changeStart(r)})})),e})()]}function tn(n){return[o(Rt),(()=>{var e=o(Sn);return l(e,t(H,{get each(){return n.endTimes},children:r=>t(A,{get kind(){return n.chosenEnd===r?"success":"gray"},get label(){return(()=>{var i=o(_n),s=i.firstChild,[a,u]=g(s.nextSibling);return a.nextSibling,l(i,r,a,u),i})()},onClick:()=>n.changeEnd(r)})})),e})()]}var Dt=c("<div class=grid><!$><!/><div>"),Nt=c("<div class=boxLink>");function q(n){const e=n.type??"special";return(()=>{var r=o(Nt);return l(r,t(w,{type:e,get onClick(){return n.onClick},get children(){var i=o(Dt),s=i.firstChild,[a,u]=g(s.nextSibling),_=a.nextSibling;return l(i,t(O,{get icon(){return n.icon}}),a,u),l(_,()=>n.children),i}})),r})()}var Pt=c("<h3>Neue Spielrunde erstellen"),It=c("<div style=margin-top:2rem;><h3 style=margin-bottom:1rem;>Meine Spielrunden</h3><ul class=event-list role=list>"),Lt=c('<li><h1 class=event-title><!$><!/><!$><!/></h1><div class=event-details><div class=event-tags><strong>System:</strong><!$><!/></div><div class=event-tags><strong>Zeit:</strong><!$><!/></div><div class=event-tags><strong>Spielende:</strong> <!$><!/> - <!$><!/></div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li><button class=event-link><span>Bearbeiten'),Ut=c("<em>[Entwurf] "),Yt=c("<em>Titel fehlt"),Ht=c("<em>Kein System angegeben"),Ft=c("<span><!$><!/>, <!$><!/> - <!$><!/> Uhr"),Gt=c("<em>kein Zeitslot ausgewählt"),Wt=c("<em>Keine Kategorien ausgewählt"),Zt=c("<em>Kurzbeschreibung fehlt");function Kt(n){return t(Z,{title:"Meine Spielrunden",get changePage(){return n.changePage},get children(){return[t(q,{icon:"grid-2-plus",type:"success",onClick:()=>n.changePage(["GAMEMASTER_NEW"]),get children(){return o(Pt)}}),t(N,{get when(){return n.store.games},children:e=>(()=>{var r=o(It),i=r.firstChild,s=i.nextSibling;return l(s,t(H,{get each(){return e()},children:a=>{const u=a.slots.SATURDAY.map($=>({...$,kind:"SLOT",day:"Samstag"})),_=a.slots.SUNDAY.map($=>({...$,kind:"SLOT",day:"Sonntag"})),p=u.length===0&&_.length===0?[{kind:"NO_SLOTS"}]:u.concat(_),b=a.tags.map($=>cn.find(({name:d})=>d===$)).filter($=>$!==void 0).map(({label:$})=>$);return t(H,{each:p,children:$=>{const d=zt(a);return(()=>{var m=o(Lt),S=m.firstChild,h=S.firstChild,[M,k]=g(h.nextSibling),x=M.nextSibling,[D,E]=g(x.nextSibling),R=S.nextSibling,K=R.firstChild,Q=K.firstChild,ue=Q.nextSibling,[me,X]=g(ue.nextSibling),z=K.nextSibling,he=z.firstChild,ee=he.nextSibling,[$e,Se]=g(ee.nextSibling),U=z.nextSibling,_e=U.firstChild,fe=_e.nextSibling,ne=fe.nextSibling,[te,F]=g(ne.nextSibling),pe=te.nextSibling,be=pe.nextSibling,[re,ve]=g(be.nextSibling),xe=U.nextSibling,ie=xe.nextSibling,Ae=ie.firstChild,le=Ae.nextSibling,ye=le.nextSibling,[Ee,Ce]=g(ye.nextSibling),B=R.nextSibling,ae=B.firstChild,j=ae.firstChild,Me=j.nextSibling,se=Me.nextSibling,[ke,Re]=g(se.nextSibling),Te=B.nextSibling,we=Te.firstChild,f=we.firstChild;return kn(m,`event-entry ${d?"gray":""}`),l(S,d?o(Ut):"",M,k),l(S,(()=>{var P=L(()=>a.titel.length>0);return()=>P()?a.titel:o(Yt)})(),D,E),l(K,()=>a.system||o(Ht),me,X),l(z,(()=>{var P=L(()=>$.kind==="SLOT");return()=>P()?(()=>{var Y=o(Ft),pn=Y.firstChild,[Le,bn]=g(pn.nextSibling),vn=Le.nextSibling,xn=vn.nextSibling,[Ue,An]=g(xn.nextSibling),yn=Ue.nextSibling,En=yn.nextSibling,[Ye,Cn]=g(En.nextSibling);return Ye.nextSibling,l(Y,()=>$.day,Le,bn),l(Y,()=>$.from,Ue,An),l(Y,()=>$.to,Ye,Cn),Y})():o(Gt)})(),$e,Se),l(U,()=>a.playerCountMin,te,F),l(U,()=>a.playerCountMax,re,ve),l(ie,()=>b.join(", ")||o(Wt),Ee,Ce),l(ae,(()=>{var P=L(()=>a.descriptionShort.length>0);return()=>P()?a.descriptionShort:o(Zt)})(),ke,Re),f.$$click=()=>n.changePage(["GAMEMASTER_EDIT",a.uuid]),Rn(),m})()}})}})),r})()})]}})}function zt(n){return n.titel.trim().length===0||n.descriptionShort.trim().length===0||n.descriptionShort.length>ge||n.descriptionLong.length>ce||n.slots.SATURDAY.length===0&&n.slots.SUNDAY.length===0}Mn(["click"]);var Bt=c("<pre><code>Noch nicht implementiert");function jt(n){return t(Z,{title:"Spielrundenübersicht",get changePage(){return n.changePage},get children(){return o(Bt)}})}var Vt=c("<h3>Spielrunden ansehen"),qt=c("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),Pe=c("<br>"),Jt=c("<h3>Spielrunden erstellen"),Qt=c("<p>Falls du wenig oder gar keine Erfahrung als Spielleiter:in hast, werden wir dich vor und während dem Anlass unterstützen."),Xt=c("<h3>Helfen"),er=c("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),nr=c("<h3>Zusammenfassung"),tr=c("<p>Erhalte einen Überblick über dein gesamtes Programm.");function rr(n){return t(Z,{title:"Wo möchtest du starten?",showQuickmenu:!1,get changePage(){return n.changePage},get children(){return[t(q,{icon:"dice-d20",onClick:()=>n.changePage(["PLAYER"]),get children(){return[o(Vt),o(qt)]}}),o(Pe),t(q,{icon:"grid-2-plus",onClick:()=>n.changePage(["GAMEMASTER"]),get children(){return[o(Jt),o(Qt)]}}),o(Pe),t(q,{icon:"hand-heart",onClick:()=>n.changePage(["HELPING"]),get children(){return[o(Xt),o(er)]}}),o(Pe),t(q,{icon:"list",onClick:()=>n.changePage(["SUMMARY"]),get children(){return[o(nr),o(tr)]}})]}})}var ir=c("<br>"),lr=c("<pre>");function ar(n){const{state:e,actions:r}=Xn(n.state);return window.addEventListener("popstate",i=>{if(typeof i=="object"&&i!==null&&"state"in i){const s=new URL(location.href),a=mn(s);r.changePage(a,!0)}}),[t(N,{get when(){return e.showCreateMessage},get children(){return[t(w,{type:"success",get children(){return $n.registrationStarted}}),o(ir)]}}),t(J,{get fallback(){return t(rr,{get changePage(){return r.changePage}})},get children(){return[t(T,{get when(){return e.pageMeta[0]==="PLAYER"},get children(){return t(jt,{get changePage(){return r.changePage}})}}),t(T,{get when(){return e.pageMeta[0]==="GAMEMASTER"},get children(){return t(Kt,{get store(){return e.currentSave.gameMaster},get changePage(){return r.changePage}})}}),t(T,{get when(){return e.pageMeta[0]==="GAMEMASTER_NEW"},get children(){return t(en,{get store(){return e.gameRoundEdit},get changePage(){return r.changePage},get openingHours(){return n.programResource.openingHours},get createNewGame(){return r.createNewGame}})}}),t(T,{get when(){return e.pageMeta[0]==="GAMEMASTER_EDIT"},get children(){return t(en,{get store(){return e.gameRoundEdit},get changePage(){return r.changePage},get openingHours(){return n.programResource.openingHours},get createNewGame(){return r.createNewGame}})}}),t(T,{get when(){return e.pageMeta[0]==="HELPING"},get children(){return t(ht,{get changePage(){return r.changePage}})}}),t(T,{get when(){return e.pageMeta[0]==="SUMMARY"},get children(){return t(ut,{get changePage(){return r.changePage}})}})]}}),(()=>{var i=o(lr);return l(i,()=>JSON.stringify(e,null,2)),i})()]}var sr=c("<p>Deine Anmeldung wird geladen..."),or=c("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),gr=c("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte.");function fn(){return t(w,{get children(){return o(sr)}})}function _r(){const[n,e]=Tn(null);return wn(()=>{e(Jn())}),t(J,{get fallback(){return t(fn,{})},get children(){return t(T,{get when(){return n()},children:r=>t(cr,{get params(){return r()}})})}})}function cr(n){const[e]=He(()=>hn(n.params)),[r]=He(()=>Qn(n.params.secret==="demo"));return t(Dn,{fallback:i=>t(w,{type:"danger",get children(){return t(J,{get fallback(){return o(gr)},get children(){return t(T,{get when(){return i.message==="SECRET_ERROR"},get children(){return o(or)}})}})}}),get children(){return t(On,{get fallback(){return t(fn,{})},get children(){return t(J,{get children(){return t(T,{get when(){return e()},children:i=>t(N,{get when(){return r()},children:s=>t(ar,{get state(){return i()},get programResource(){return s()}})})})}})}})}})}export{_r as MeineAnmeldungWrapper};
