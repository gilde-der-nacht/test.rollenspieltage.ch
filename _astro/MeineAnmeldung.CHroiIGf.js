import{g as o,t as d,a as u,i as l,c as n,m as H,F as Y,S as B,M as R,b as G,d as Ke,o as Qe,e as le,f as Xe,E as en}from"./web.CWkhEVI3.js";import{e as z,b as A,c as C,I as se,d as oe,B as N,g as Q,f as nn}from"./utils.D0BOsESk.js";/* empty css                                 */import{e as ve,a as I,o as v,s as c,b as w,n as k,c as ye,l as q,u as j,d as J,C as tn}from"./Checkbox.qI5vp2xV.js";import{c as ne}from"./store.tvcWmGwL.js";import{T as ce}from"./Textarea.DBjiIJxG.js";const D=1,ue="SAVE",ge="PROGRAM",de={registrationId:-1,name:"Demo",email:"demo@mail.com",handynummer:"+41 12 123 12 12",wantsEmailUpdates:!0,games:[],lastSaved:"2024-08-15T07:45:21.335Z"};function rn(){const t=localStorage.getItem(ue);let e;return t===null?e={version:D,data:de}:e=JSON.parse(t),e.version!==D&&(console.error("Your local storage data was outdated and has been replaced with new demo content."),e={version:D,data:de}),localStorage.setItem(ue,JSON.stringify(e)),e.data}const me={gameList:[],reservedList:[],openingHours:{SATURDAY:{open:{from:10,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}}};function an(){const t=localStorage.getItem(ge);let e;return t===null?e={version:D,data:me}:e=JSON.parse(t),e.version!==D&&(console.error("Your local storage data was outdated and has been replaced with new demo content."),e={version:D,data:me}),localStorage.setItem(ge,JSON.stringify(e)),e.data}const Ae=ve(["SATURDAY","SUNDAY"]);function he(t,e=!1){const{from:r,to:i}=t;if(r>i)return[];const s=i-r;return[...Array(e?s+1:s)].map((a,m)=>m+r)}I(v({uuid:c(),description:w(c()),title:w(c()),system:c(),master:v({first:c(),last:w(c())}),playerCount:v({min:k(),max:k()}),slot:v({day:Ae,start:k(),end:k()})}));const ke=v({game:c(),self:q(!0),spielerName:ye()}),xe=v({game:c(),self:q(!1),spielerName:c()}),ln=j([ke.extend({id:k()}),xe.extend({id:k()})]),sn=j([ke,xe]),on=v({registrationId:k(),name:c(),email:c(),handynummer:c(),wantsEmailUpdates:J(),games:I(ln),lastSaved:c()});v({registrationId:k(),name:c(),email:c(),handynummer:c(),wantsEmailUpdates:J(),games:I(sn),lastSaved:c()});async function cn(t){if(t==="demo")return{kind:"SUCCESS",save:rn()};const e=z("/rst24/load");e.searchParams.append("secret",t);const r=await fetch(e);if(!r.ok)return{kind:"FAILED"};const i=await r.json(),s=on.safeParse(i);return s.success?{kind:"SUCCESS",save:s.data}:{kind:"FAILED"}}const un=v({uuid:c(),title:w(c()),system:c(),description:w(c()),playerCount:v({min:k(),max:k()}),master:v({first:c(),last:w(c())}),slot:v({day:Ae,start:k(),end:k()})}),gn=v({id:k(),gameId:c()});async function dn(t){if(t)return{kind:"SUCCESS",program:an()};const e=z("/rst24/program"),r=z("/rst24/reserved"),[i,s]=await Promise.all([fetch(e),fetch(r)]);if(!i.ok)return{kind:"FAILED"};if(!s.ok)return{kind:"FAILED"};const a=await i.json(),m=await s.json(),S=I(un).safeParse(a);if(!S.success)return{kind:"FAILED"};const _=I(gn).safeParse(m);return _.success?{kind:"SUCCESS",program:{gameList:S.data,reservedList:_.data,openingHours:{SATURDAY:{open:{from:10,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}}}}:{kind:"FAILED"}}const mn=["CHOOSE","PLAYER","GAMEMASTER","GAMEMASTER_NEW","HELPING","SUMMARY"],$e={CHOOSE:"Übersicht",PLAYER:"Spielanmeldung",GAMEMASTER:"Spielleitung",GAMEMASTER_NEW:"Neue Spielrunde",HELPING:"Helfen",SUMMARY:"Zusammenfassung"};function Ee(t){const e=t.searchParams.get("page");return mn.find(r=>e?.toUpperCase()===r.toUpperCase())??"CHOOSE"}function hn(){const t=new URL(location.href),e=t.searchParams.get("secret"),r=Ee(t),i=t.searchParams.get("showCreateMessage")==="true";return{secret:e,page:r,showCreateMessage:i}}async function Ce(t){if(t.secret===null)throw Error("SECRET_ERROR");const e=await cn(t.secret);if(e.kind==="FAILED")throw Error("SECRET_ERROR");return{state:"IDLE",secret:t.secret,page:t.page,showCreateMessage:t.showCreateMessage,gameRoundEdit:{form:{titel:"",system:"",descriptionShort:"",descriptionLong:"",slots:{SATURDAY:[],SUNDAY:[]},playerCountMin:3,playerCountMax:6,tags:[]},errors:{titleMissing:!1,descriptionShortTooLong:!1,descriptionLongTooLong:!1,slotMissing:!1,playerCountInvalid:!1}},currentSave:e.save,activeTab:"Contact",lastSaved:e.save.lastSaved,hasChanged:!1,tentativeReservations:[],markedForDeletionReservations:[]}}async function $n(t=!1){const e=await dn(t);if(e.kind==="FAILED")throw Error("PROGRAM_ERROR");return e.program}function Sn(t){const[e,r]=ne(t);function i(g){r("activeTab",g),window.scrollTo({top:0})}function s(g){const $=new URL(location.href);$.searchParams.set("page",g.toLowerCase()),$.searchParams.delete("showCreateMessage"),history.replaceState({page:g},"",$);const f=$e[g];document.title=`Meine Anmeldung: ${f} | Luzerner Rollenspieltage `}s(t.page);function a(g,$=!1){if(g===e.page)return;if(!$){const h=new URL(location.href);h.searchParams.set("page",g.toLowerCase()),history.pushState({page:g},"",h)}const f=$e[g];document.title=`Meine Anmeldung: ${f} | Luzerner Rollenspieltage `,r("page",g),window.scrollTo({top:0})}function m(g,$){r("hasChanged",!0),r("currentSave",g,$)}async function S(){if(e.state!=="IDLE")throw Error("ASSERTION_ERROR");r("state","SAVING");const g=z("/rst24/save"),$={...e.currentSave,games:[...e.currentSave.games.filter(h=>!e.markedForDeletionReservations.includes(h.id)),...e.tentativeReservations.map(h=>h.friendsName===null?{game:h.gameUuid,self:!0,spielerName:null}:{game:h.gameUuid,self:!1,spielerName:h.friendsName})]};if((await fetch(g,{method:"post",body:JSON.stringify($),headers:{"Content-Type":"application/json"}})).ok){const h=await Ce({secret:e.secret,page:e.page,showCreateMessage:!1});r({...h,activeTab:e.activeTab})}else throw Error("SAVE_ERROR")}function _(g){r("hasChanged",!0),r("tentativeReservations",$=>[...$,g])}function b(g){if(r("hasChanged",!0),g.confirmed)r("markedForDeletionReservations",$=>[...$,g.reservationId]);else{const $=e.currentSave.name;r("tentativeReservations",f=>f.filter(h=>h.gameUuid!==g.gameUuid?!0:h.friendsName===g.name?!1:g.name!==$))}}return{state:e,actions:{changeTab:i,changePage:a,updateSave:m,saveCurrentState:S,addTentativeReservation:_,deleteReservation:b}}}var _n=d("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function L(t){return(()=>{var e=o(_n),r=e.firstChild,i=r.nextSibling,[s,a]=u(i.nextSibling);return l(r,()=>t.tooltip),l(e,()=>t.children,s,a),e})()}var fn=d("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),pn=d('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>'),bn=d("<div class=grid><!$><!/><span>Zur Übersicht"),vn=d("<div class=grid><!$><!/><span>Zu den Spielrunden"),yn=d("<div class=grid><!$><!/><span>Zu deinen Spielrunden"),An=d("<div class=grid><!$><!/><span>Zum Helferplan"),kn=d("<div class=grid><!$><!/><span>Zur Zusammenfassung");function xn(t){return(()=>{var e=o(fn),r=e.firstChild,i=r.firstChild,[s,a]=u(i.nextSibling),m=s.nextSibling,[S,_]=u(m.nextSibling),b=S.nextSibling,[g,$]=u(b.nextSibling),f=g.nextSibling,[h,x]=u(f.nextSibling),M=h.nextSibling,[P,y]=u(M.nextSibling);return l(r,n(L,{tooltip:"Zur Übersicht",get children(){return n(A,{get label(){return n(C,{icon:"backward"})},onClick:()=>t.changePage("CHOOSE")})}}),s,a),l(r,n(L,{tooltip:"Zu den Spielrunden",get children(){return n(A,{get label(){return n(C,{icon:"dice-d20"})},onClick:()=>t.changePage("PLAYER")})}}),S,_),l(r,n(L,{tooltip:"Zu deinen Spielrunden",get children(){return n(A,{get label(){return n(C,{icon:"grid-2-plus"})},onClick:()=>t.changePage("GAMEMASTER")})}}),g,$),l(r,n(L,{tooltip:"Zum Helferplan",get children(){return n(A,{get label(){return n(C,{icon:"hand-heart"})},onClick:()=>t.changePage("HELPING")})}}),h,x),l(r,n(L,{tooltip:"Zur Zusammenfassung",get children(){return n(A,{get label(){return n(C,{icon:"list"})},onClick:()=>t.changePage("SUMMARY")})}}),P,y),e})()}function En(t){return(()=>{var e=o(pn),r=e.firstChild,[i,s]=u(r.nextSibling),a=i.nextSibling,[m,S]=u(a.nextSibling),_=m.nextSibling,[b,g]=u(_.nextSibling),$=b.nextSibling,[f,h]=u($.nextSibling),x=f.nextSibling,[M,P]=u(x.nextSibling);return l(e,n(A,{get label(){return(()=>{var y=o(bn),T=y.firstChild,[E,O]=u(T.nextSibling);return E.nextSibling,l(y,n(C,{icon:"backward"}),E,O),y})()},onClick:()=>t.changePage("CHOOSE")}),i,s),l(e,n(A,{get label(){return(()=>{var y=o(vn),T=y.firstChild,[E,O]=u(T.nextSibling);return E.nextSibling,l(y,n(C,{icon:"dice-d20"}),E,O),y})()},onClick:()=>t.changePage("PLAYER")}),m,S),l(e,n(A,{get label(){return(()=>{var y=o(yn),T=y.firstChild,[E,O]=u(T.nextSibling);return E.nextSibling,l(y,n(C,{icon:"grid-2-plus"}),E,O),y})()},onClick:()=>t.changePage("GAMEMASTER")}),b,g),l(e,n(A,{get label(){return(()=>{var y=o(An),T=y.firstChild,[E,O]=u(T.nextSibling);return E.nextSibling,l(y,n(C,{icon:"hand-heart"}),E,O),y})()},onClick:()=>t.changePage("HELPING")}),f,h),l(e,n(A,{get label(){return(()=>{var y=o(kn),T=y.firstChild,[E,O]=u(T.nextSibling);return E.nextSibling,l(y,n(C,{icon:"list"}),E,O),y})()},onClick:()=>t.changePage("SUMMARY")}),M,P),e})()}var Cn=d("<div class=page><!$><!/><div><h2></h2><br><!$><!/></div><!$><!/>");function U(t){return(()=>{var e=o(Cn),r=e.firstChild,[i,s]=u(r.nextSibling),a=i.nextSibling,m=a.firstChild,S=m.nextSibling,_=S.nextSibling,[b,g]=u(_.nextSibling),$=a.nextSibling,[f,h]=u($.nextSibling);return l(e,(()=>{var x=H(()=>t.showQuickmenu!==!1);return()=>x()?n(xn,{get changePage(){return t.changePage}}):null})(),i,s),l(m,()=>t.title),l(a,()=>t.children,b,g),l(e,(()=>{var x=H(()=>t.showQuickmenu!==!1);return()=>x()?n(En,{get changePage(){return t.changePage}}):null})(),f,h),e})()}var Rn=d("<pre><code>Noch nicht implementiert");function Tn(t){return n(U,{title:"Zusammenfassung",get changePage(){return t.changePage},get children(){return o(Rn)}})}var On=d("<pre><code>Noch nicht implementiert");function wn(t){return n(U,{title:"Helfen",get changePage(){return t.changePage},get children(){return o(On)}})}const Mn=[{name:"children",label:"Kinderfreundlich",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{name:"selfmade",label:"Mein eigenes System",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}],Re=ve(["SATURDAY","SUNDAY"]);I(v({uuid:c(),description:w(c()),title:w(c()),master_name:c(),playercount:v({min:k(),max:k()}),slot:v({day:Re,start:k(),end:k()}),external_link:w(v({label:c(),link:c()}))}));const Te=v({game:c(),self:q(!0),player_name:ye()}),Oe=v({game:c(),self:q(!1),player_name:c()}),Pn=j([Te.extend({uuid:c().uuid()}),Oe.extend({uuid:c().uuid()})]),Nn=j([Te,Oe]);v({registration_uuid:c().uuid(),name:c(),email:c(),telephone:c(),wishes_updates:J(),games:I(Pn),last_saved:c()});v({registration_uuid:c().uuid(),name:c(),email:c(),telephone:c(),wishes_updates:J(),games:I(Nn),last_saved:c()});v({uuid:c(),title:c(),description:w(c()),playercount:v({min:k(),max:k()}),master_name:c(),slot:v({day:Re,start:k(),end:k()}),external_link:w(v({label:c(),link:c()}))});v({uuid:c().uuid(),game_uuid:c().uuid()});var Se=d("<br>"),In=d("<strong>Donnerstag, 21. August 2025");const we=function(){const e="Donnerstag, 21. August 2025",r=["Deine Anmeldung wurde erfolgreich gestartet.",o(Se),o(Se),"Wir haben eine E-Mail an deine Adresse gesendet. In dieser E-Mail findest du einen persönlichen Link, um deine Anmeldung bis am"," ",o(In)," anzupassen."];return{registrationDeadline:e,registrationStarted:r,days:{SATURDAY:"Samstag",SUNDAY:"Sonntag"}}}();var Dn=d('<form novalidate><!$><!/><!$><!/><div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem;"><!$><!/><!$><!/></div><!$><!/><!$><!/><fieldset><legend>Zeitslots</legend><!$><!/></fieldset><fieldset><legend>Kategorien (optional)</legend><div style=display:grid;gap:0.5rem;></div></fieldset><div style=display:flex;flex-wrap:wrap;gap:1rem;><!$><!/><!$><!/><!$><!/>'),Un=d("<h6>Samstag, 23. August 2025"),_e=d("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;>"),Ln=d("<h6>Sonntag, 24. August 2025"),fe=d("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center;><span>von <!$><!/> bis <!$><!/> Uhr</span><!$><!/>"),Fn=d("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/>"),Hn=d("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/><!$><!/>"),Yn=d("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/><!$><!/><div style=margin-block-start:1rem;>"),Gn=d("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center;><!$><!/> <span>Neuen Slot erfassen"),Wn=d("<em>Wähle eine Tag:"),Zn=d("<div style=display:flex;flex-wrap:wrap;gap:.5rem;><!$><!/><!$><!/>"),Vn=d("<em>Wähle eine Startzeit:"),Me=d("<div style=display:flex;flex-wrap:wrap;gap:.5rem;>"),Pe=d("<span style=white-space:nowrap;><!$><!/> Uhr"),Bn=d("<em>Wähle eine Endzeit:");function zn(t){const[e,r]=ne(t.store);function i(s){s.preventDefault()}return n(U,{title:"Neue Spielrunde erfassen",get changePage(){return t.changePage},get children(){var s=o(Dn),a=s.firstChild,[m,S]=u(a.nextSibling),_=m.nextSibling,[b,g]=u(_.nextSibling),$=b.nextSibling,f=$.firstChild,[h,x]=u(f.nextSibling),M=h.nextSibling,[P,y]=u(M.nextSibling),T=$.nextSibling,[E,O]=u(T.nextSibling),Ie=E.nextSibling,[te,De]=u(Ie.nextSibling),K=te.nextSibling,Ue=K.firstChild,Le=Ue.nextSibling,[Fe,He]=u(Le.nextSibling),re=K.nextSibling,Ye=re.firstChild,Ge=Ye.nextSibling,W=re.nextSibling,We=W.firstChild,[ie,Ze]=u(We.nextSibling),Ve=ie.nextSibling,[ae,Be]=u(Ve.nextSibling),ze=ae.nextSibling,[qe,je]=u(ze.nextSibling);return s.addEventListener("submit",i),l(s,n(se,{label:"Titel",name:"title",get value(){return e.form.titel},onValueUpdate:p=>r("form","titel",p)}),m,S),l(s,n(se,{label:"System (optional)",name:"System",get value(){return e.form.system},onValueUpdate:p=>r("form","system",p)}),b,g),l($,n(oe,{label:"Anzahl Mitspielende (Minimum)",name:"playerCountMin",get value(){return e.form.playerCountMin},onValueUpdate:p=>r("form","playerCountMin",p),min:1,get max(){return e.form.playerCountMax}}),h,x),l($,n(oe,{label:"Anzahl Mitspielende (Maximum)",name:"playerCountMax",get value(){return e.form.playerCountMax},onValueUpdate:p=>r("form","playerCountMax",p),get min(){return e.form.playerCountMin}}),P,y),l(s,n(ce,{label:"kurze Beschreibung",name:"descriptionShort",get value(){return e.form.descriptionShort},onValueUpdate:p=>r("form","descriptionShort",p),size:"sm"}),E,O),l(s,n(ce,{label:"lange Beschreibung (optional)",name:"descriptionLong",get value(){return e.form.descriptionLong},onValueUpdate:p=>r("form","descriptionLong",p)}),te,De),l(K,n(jn,{get slots(){return t.store.form.slots},get openingHours(){return t.openingHours},addTimeSlot:p=>r("form","slots",p.day,e.form.slots[p.day].concat({from:p.from,to:p.to})),removeTimeSlot:p=>r("form","slots",p.day,e.form.slots[p.day].filter(Z=>Z.from!==p.from||Z.to!==p.to))}),Fe,He),l(Ge,n(Y,{each:Mn,children:p=>n(tn,{get label(){return p.label},get description(){return p.description},get checked(){return e.form.tags.includes(p.name)},get name(){return p.name},get value(){return p.name},onValueUpdate:Z=>{Z?r("form","tags",e.form.tags.concat([p.name])):r("form","tags",e.form.tags.filter(Je=>Je!==p.name))}})})),l(W,n(A,{kind:"gray",label:"Spielrunde als Entwurf speichern"}),ie,Ze),l(W,n(A,{kind:"danger",label:"Abbrechen"}),ae,Be),l(W,n(A,{type:"submit",kind:"success",label:"Spielrunde erstellen"}),qe,je),s}})}const pe=1;function qn(t){function e(r){const i=he(r.open,!0);return r.breaks.map(a=>he(a,!0)).reduce((a,m)=>{const S=m.at(0),_=m.at(-1);if(S===void 0||_===void 0)return a;const b=[];return a.forEach(g=>{const $=[],f=[];g.forEach(h=>{h<=S&&$.push(h),_<=h&&f.push(h)}),$.length>0&&b.push($),f.length>0&&b.push(f)}),b},[i]).map(a=>{const m=a.slice(0,pe*-1);return nn(m.map(S=>{const _=a.filter(b=>b>=S+pe);return[S,_]}))}).reduce((a,m)=>({...a,...m}),{})}return{SATURDAY:e(t.SATURDAY),SUNDAY:e(t.SUNDAY)}}function jn(t){const e=qn(t.openingHours);return[n(Jn,{daySections:e,get chooseTimeSlot(){return t.addTimeSlot}}),n(B,{get when(){return t.slots.SATURDAY.length>0},get children(){return[o(Un),(()=>{var r=o(_e);return l(r,n(Y,{get each(){return t.slots.SATURDAY},children:i=>n(A,{get label(){return(()=>{var s=o(fe),a=s.firstChild,m=a.firstChild,S=m.nextSibling,[_,b]=u(S.nextSibling),g=_.nextSibling,$=g.nextSibling,[f,h]=u($.nextSibling);f.nextSibling;var x=a.nextSibling,[M,P]=u(x.nextSibling);return l(a,()=>i.from,_,b),l(a,()=>i.to,f,h),l(s,n(C,{icon:"trash"}),M,P),s})()},kind:"danger",onClick:()=>t.removeTimeSlot({day:"SATURDAY",from:i.from,to:i.to})})})),r})()]}}),n(B,{get when(){return t.slots.SUNDAY.length>0},get children(){return[o(Ln),(()=>{var r=o(_e);return l(r,n(Y,{get each(){return t.slots.SUNDAY},children:i=>n(A,{get label(){return(()=>{var s=o(fe),a=s.firstChild,m=a.firstChild,S=m.nextSibling,[_,b]=u(S.nextSibling),g=_.nextSibling,$=g.nextSibling,[f,h]=u($.nextSibling);f.nextSibling;var x=a.nextSibling,[M,P]=u(x.nextSibling);return l(a,()=>i.from,_,b),l(a,()=>i.to,f,h),l(s,n(C,{icon:"trash"}),M,P),s})()},kind:"danger",onClick:()=>t.removeTimeSlot({day:"SUNDAY",from:i.from,to:i.to})})})),r})()]}})]}function Jn(t){const[e,r]=ne({kind:"INITIAL"});return n(G,{get children(){return[n(R,{get when(){return e.kind==="INITIAL"},get children(){return n(A,{kind:"success",get label(){return(()=>{var i=o(Gn),s=i.firstChild,[a,m]=u(s.nextSibling);return a.nextSibling,l(i,n(C,{icon:"circle-plus"}),a,m),i})()},onClick:()=>r({kind:"CHOOSE_DAY"})})}}),n(R,{get when(){return e.kind==="CHOOSE_DAY"},get children(){return n(N,{get children(){return n(V,{changeDay:i=>r({kind:"CHOOSE_START",day:i})})}})}}),n(R,{get when(){return e.kind==="CHOOSE_START"},get children(){return n(N,{get children(){var i=o(Fn),s=i.firstChild,[a,m]=u(s.nextSibling),S=a.nextSibling,[_,b]=u(S.nextSibling);return l(i,n(V,{get chosenDay(){return e.kind==="CHOOSE_START"?e.day:void 0},changeDay:g=>r({kind:"CHOOSE_START",day:g})}),a,m),l(i,n(X,{get startTimes(){return H(()=>e.kind==="CHOOSE_START")()?Q(t.daySections[e.day]):[]},changeStart:g=>r({kind:"CHOOSE_END",start:g})}),_,b),i}})}}),n(R,{get when(){return e.kind==="CHOOSE_END"},get children(){return n(N,{get children(){var i=o(Hn),s=i.firstChild,[a,m]=u(s.nextSibling),S=a.nextSibling,[_,b]=u(S.nextSibling),g=_.nextSibling,[$,f]=u(g.nextSibling);return l(i,n(V,{get chosenDay(){return e.kind==="CHOOSE_END"?e.day:void 0},changeDay:h=>r({kind:"CHOOSE_START",day:h})}),a,m),l(i,n(X,{get chosenStart(){return e.kind==="CHOOSE_END"?e.start:void 0},get startTimes(){return H(()=>e.kind==="CHOOSE_END")()?Q(t.daySections[e.day]):[]},changeStart:h=>r({kind:"CHOOSE_END",start:h})}),_,b),l(i,n(be,{get endTimes(){return e.kind==="CHOOSE_END"?t.daySections[e.day][e.start]??[]:[]},changeEnd:h=>{e.kind==="CHOOSE_END"&&r({kind:"WAIT_FOR_CONFIRMATION",day:e.day,start:e.start,end:h})}}),$,f),i}})}}),n(R,{get when(){return e.kind==="WAIT_FOR_CONFIRMATION"},get children(){return n(N,{get children(){var i=o(Yn),s=i.firstChild,[a,m]=u(s.nextSibling),S=a.nextSibling,[_,b]=u(S.nextSibling),g=_.nextSibling,[$,f]=u(g.nextSibling),h=$.nextSibling;return l(i,n(V,{get chosenDay(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.day:void 0},changeDay:x=>r({kind:"CHOOSE_START",day:x})}),a,m),l(i,n(X,{get chosenStart(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.start:void 0},get startTimes(){return H(()=>e.kind==="WAIT_FOR_CONFIRMATION")()?Q(t.daySections[e.day]):[]},changeStart:x=>r({kind:"CHOOSE_END",start:x})}),_,b),l(i,n(be,{get chosenEnd(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.end:void 0},get endTimes(){return e.kind==="WAIT_FOR_CONFIRMATION"?t.daySections[e.day][e.start]??[]:[]},changeEnd:x=>{e.kind==="WAIT_FOR_CONFIRMATION"&&r({kind:"WAIT_FOR_CONFIRMATION",day:e.day,start:e.start,end:x})}}),$,f),l(h,n(A,{get label(){return`Slot "${e.kind==="WAIT_FOR_CONFIRMATION"?`${we.days[e.day]}, von ${e.start} bis ${e.end} Uhr`:""}" erstellen`},kind:"success",onClick:()=>{e.kind==="WAIT_FOR_CONFIRMATION"&&(t.chooseTimeSlot({day:e.day,from:e.start,to:e.end}),r({kind:"INITIAL"}))}})),i}})}})]}})}function V(t){return[o(Wn),(()=>{var e=o(Zn),r=e.firstChild,[i,s]=u(r.nextSibling),a=i.nextSibling,[m,S]=u(a.nextSibling);return l(e,n(A,{get kind(){return t.chosenDay==="SATURDAY"?"success":"gray"},label:"Samstag",onClick:()=>t.changeDay("SATURDAY")}),i,s),l(e,n(A,{get kind(){return t.chosenDay==="SUNDAY"?"success":"gray"},label:"Sonntag",onClick:()=>t.changeDay("SUNDAY")}),m,S),e})()]}function X(t){return[o(Vn),(()=>{var e=o(Me);return l(e,n(Y,{get each(){return t.startTimes},children:r=>n(A,{get kind(){return t.chosenStart===r?"success":"gray"},get label(){return(()=>{var i=o(Pe),s=i.firstChild,[a,m]=u(s.nextSibling);return a.nextSibling,l(i,r,a,m),i})()},onClick:()=>t.changeStart(r)})})),e})()]}function be(t){return[o(Bn),(()=>{var e=o(Me);return l(e,n(Y,{get each(){return t.endTimes},children:r=>n(A,{get kind(){return t.chosenEnd===r?"success":"gray"},get label(){return(()=>{var i=o(Pe),s=i.firstChild,[a,m]=u(s.nextSibling);return a.nextSibling,l(i,r,a,m),i})()},onClick:()=>t.changeEnd(r)})})),e})()]}var Kn=d("<div class=grid><!$><!/><div>"),Qn=d("<div class=boxLink>");function F(t){const e=t.type??"special";return(()=>{var r=o(Qn);return l(r,n(N,{type:e,get onClick(){return t.onClick},get children(){var i=o(Kn),s=i.firstChild,[a,m]=u(s.nextSibling),S=a.nextSibling;return l(i,n(C,{get icon(){return t.icon}}),a,m),l(S,()=>t.children),i}})),r})()}var Xn=d("<h3>Neue Spielrunde erstellen");function et(t){return n(U,{title:"Meine Spielrunden",get changePage(){return t.changePage},get children(){return n(F,{icon:"grid-2-plus",type:"success",onClick:()=>t.changePage("GAMEMASTER_NEW"),get children(){return o(Xn)}})}})}var nt=d("<pre><code>Noch nicht implementiert");function tt(t){return n(U,{title:"Spielrundenübersicht",get changePage(){return t.changePage},get children(){return o(nt)}})}var rt=d("<h3>Spielrunden ansehen"),it=d("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),ee=d("<br>"),at=d("<h3>Spielrunden erstellen"),lt=d("<p>Falls du wenig oder gar keine Erfahrung als Spielleiter:in hast, werden wir dich vor und während dem Anlass unterstützen."),st=d("<h3>Helfen"),ot=d("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),ct=d("<h3>Zusammenfassung"),ut=d("<p>Erhalte einen Überblick über dein gesamtes Programm.");function gt(t){return n(U,{title:"Wo möchtest du starten?",showQuickmenu:!1,get changePage(){return t.changePage},get children(){return[n(F,{icon:"dice-d20",onClick:()=>t.changePage("PLAYER"),get children(){return[o(rt),o(it)]}}),o(ee),n(F,{icon:"grid-2-plus",onClick:()=>t.changePage("GAMEMASTER"),get children(){return[o(at),o(lt)]}}),o(ee),n(F,{icon:"hand-heart",onClick:()=>t.changePage("HELPING"),get children(){return[o(st),o(ot)]}}),o(ee),n(F,{icon:"list",onClick:()=>t.changePage("SUMMARY"),get children(){return[o(ct),o(ut)]}})]}})}var dt=d("<br>"),mt=d("<pre>");function ht(t){const{state:e,actions:r}=Sn(t.state);return window.addEventListener("popstate",i=>{if(typeof i=="object"&&i!==null&&"state"in i){const s=new URL(location.href),a=Ee(s);r.changePage(a,!0)}}),[n(B,{get when(){return e.showCreateMessage},get children(){return[n(N,{type:"success",get children(){return we.registrationStarted}}),o(dt)]}}),n(G,{get fallback(){return n(gt,{get changePage(){return r.changePage}})},get children(){return[n(R,{get when(){return e.page==="PLAYER"},get children(){return n(tt,{get changePage(){return r.changePage}})}}),n(R,{get when(){return e.page==="GAMEMASTER"},get children(){return n(et,{get changePage(){return r.changePage}})}}),n(R,{get when(){return e.page==="GAMEMASTER_NEW"},get children(){return n(zn,{get store(){return e.gameRoundEdit},get changePage(){return r.changePage},get openingHours(){return t.programResource.openingHours}})}}),n(R,{get when(){return e.page==="HELPING"},get children(){return n(wn,{get changePage(){return r.changePage}})}}),n(R,{get when(){return e.page==="SUMMARY"},get children(){return n(Tn,{get changePage(){return r.changePage}})}})]}}),(()=>{var i=o(mt);return l(i,()=>JSON.stringify(e,null,2)),i})()]}var $t=d("<p>Deine Anmeldung wird geladen..."),St=d("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),_t=d("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte.");function Ne(){return n(N,{get children(){return o($t)}})}function xt(){const[t,e]=Ke(null);return Qe(()=>{e(hn())}),n(G,{get fallback(){return n(Ne,{})},get children(){return n(R,{get when(){return t()},children:r=>n(ft,{get params(){return r()}})})}})}function ft(t){const[e]=le(()=>Ce(t.params)),[r]=le(()=>$n(t.params.secret==="demo"));return n(en,{fallback:i=>n(N,{type:"danger",get children(){return n(G,{get fallback(){return o(_t)},get children(){return n(R,{get when(){return i.message==="SECRET_ERROR"},get children(){return o(St)}})}})}}),get children(){return n(Xe,{get fallback(){return n(Ne,{})},get children(){return n(G,{get children(){return n(R,{get when(){return e()},children:i=>n(B,{get when(){return r()},children:s=>n(ht,{get state(){return i()},get programResource(){return s()}})})})}})}})}})}export{xt as MeineAnmeldungWrapper};
