import{v as H,p as O,g as o,t as D,a as U,i as v,c as e,d as T,h as A,u as G,n as R,q as E,S as u,F as _,f as k,M as I}from"./web.CMj7TsBi.js";import{b as W,e as z,I as N,B as b,a as j}from"./utils.Db75vx7X.js";import{T as J}from"./Textarea.wLKD5yOm.js";var K=D("<form method=post><!$><!/><!$><!/>");function Q(n){const i=H({language:"de",submitLabel:n.language==="en"?"Submit":"Absenden"},n);let f;O(()=>{f.setAttribute("novalidate",""),[...f.querySelectorAll('input[name^="redirect"][type="hidden"]')].forEach(a=>a.remove())});async function F(l){const{target:a}=l;if(a!==null&&a instanceof HTMLFormElement){l.preventDefault();const h=new FormData(a);if(!i.isValid(h))return;try{const m=await fetch(i.actionUrl,{method:"post",body:h});m.ok?i.onSuccess():i.onError(await m.text())}catch(m){i.onError(m)}}}return(()=>{var l=o(K),a=l.firstChild,[h,m]=U(a.nextSibling),M=h.nextSibling,[w,x]=U(M.nextSibling),p=f;return typeof p=="function"?G(p,l):f=l,l.addEventListener("submit",F),v(l,()=>i.children,h,m),v(l,e(W,{type:"submit",get label(){return i.submitLabel}}),w,x),T(()=>A(l,"action",i.actionUrl.href)),l})()}var X=D("<input type=hidden>");function y(n){return(()=>{var i=o(X);return T(()=>A(i,"name",n.name)),T(()=>R(i,"value",n.value)),i})()}var P=D("<br>"),S=D("<p>");function V(){return{name:"",email:"",captcha:"",message:""}}function L(){return{name:[],email:[],captcha:[],message:[]}}const Y=z("/forms");function re(n){const i="Name",f=n.language!=="en"?"E-Mail":"Email",F=n.language!=="en"?"Bitte leer lassen":"leave this field empty",l=n.language!=="en"?"Nachricht":"Message",[a,h]=E(V());let m;const[M,w]=E(!1),[x,p]=E(!1);function B(){p(!1),h(V()),w(!0)}function q(t){w(!1),p(!0),console.error(t)}const[c,d]=E(L());function $(t){return r=>{p(!1),d(L()),h(g=>({...g,[t]:r}))}}function C(t){d(L());const r=n.language==="en";if(a().name.trim().length===0){const g=r?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";d(s=>({...s,name:[...s.name,g]}))}if(a().email.trim().length===0){const g=r?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";d(s=>({...s,email:[...s.email,g]}))}if(m.validity.typeMismatch){const g=r?"The input does not seem to be a valid email address.":"Die Eingabe scheint keine gÃ¼ltige E-Mail-Adresse zu sein.";d(s=>({...s,email:[...s.email,g]}))}if(a().captcha.trim().length>0){const g=r?"This is field must be empty.":"Dieses Feld muss leer bleiben.";d(s=>({...s,captcha:[...s.captcha,g]}))}if(a().message.trim().length===0){const g=r?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";d(s=>({...s,message:[...s.message,g]}))}return c().name.length===0&&c().email.length===0&&c().captcha.length===0&&c().message.length===0}return[e(Q,{actionUrl:Y,get language(){return n.language??"de"},isValid:C,onSuccess:B,onError:q,get children(){return[e(N,{label:i,name:"private-name",get value(){return a().name},get onValueUpdate(){return $("name")}}),e(u,{get when(){return c().name.length>0},get children(){return e(b,{type:"danger",get children(){return e(_,{get each(){return c().name},children:t=>(()=>{var r=o(S);return v(r,t),r})()})}})}}),e(j,{label:f,name:"private-email",type:"email",get value(){return a().email},get onValueUpdate(){return $("email")},ref(t){var r=m;typeof r=="function"?r(t):m=t}}),e(u,{get when(){return c().email.length>0},get children(){return e(b,{type:"danger",get children(){return e(_,{get each(){return c().email},children:t=>(()=>{var r=o(S);return v(r,t),r})()})}})}}),e(N,{label:F,name:"private-captcha",type:"email",required:!1,isHoneypot:!0,get value(){return a().captcha},get onValueUpdate(){return $("captcha")}}),e(u,{get when(){return c().captcha.length>0},get children(){return e(b,{type:"danger",get children(){return e(_,{get each(){return c().captcha},children:t=>(()=>{var r=o(S);return v(r,t),r})()})}})}}),e(J,{label:l,name:"private-message",get value(){return a().message},get onValueUpdate(){return $("message")}}),e(u,{get when(){return c().message.length>0},get children(){return e(b,{type:"danger",get children(){return e(_,{get each(){return c().message},children:t=>(()=>{var r=o(S);return v(r,t),r})()})}})}}),e(u,{get when(){return n.language},children:t=>e(y,{name:"language",get value(){return t()}})}),e(u,{get when(){return n.category},children:t=>e(y,{name:"category",get value(){return t()}})}),e(u,{get when(){return n.referer},children:t=>e(y,{name:"referer",get value(){return t().href}})}),e(u,{get when(){return n.redirectOnSuccess},children:t=>e(y,{name:"redirect-on-success",get value(){return t().href}})}),e(u,{get when(){return n.redirectOnFailure},children:t=>e(y,{name:"redirect-on-failure",get value(){return t().href}})}),e(u,{get when(){return n.redirectOnSpam},children:t=>e(y,{name:"redirect-on-spam",get value(){return t().href}})})]}}),e(u,{get when(){return x()},get children(){return[o(P),e(b,{type:"danger",get children(){return e(k,{fallback:"Leider konnten wir die Nachricht nicht absenden. Bitte versuche es erneut.",get children(){return e(I,{get when(){return n.language==="en"},children:"There was a problem sending your message. Please try again."})}})}})]}}),e(u,{get when(){return M()},get children(){return[o(P),e(b,{type:"success",get children(){return e(k,{fallback:"Nachricht wurde erfolgreich gesendet.",get children(){return e(I,{get when(){return n.language==="en"},children:"Message successfully sent."})}})}})]}})]}export{re as ContactFormImpl};
