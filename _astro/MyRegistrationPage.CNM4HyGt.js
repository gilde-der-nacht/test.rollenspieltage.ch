import{I as je,a as Hr,B as M,b as zr,T as Br,c as be,d as mn,e as ie,f as me,S as jt,s as Gr,g as ur,h as lt,i as fn,j as Yr,k as Vr,l as cr,m as Wr,u as Kr}from"./utils.DwA18TqA.js";import{c as Tn,g,t as f,a as m,u as qr,i as u,b as l,S as N,d as fe,e as Ne,F as ge,M as j,f as Oe,s as _n,h as Tt,j as en,k as tn,m as I,l as Nn,n as Xe,r as nn,o as Lt,p as Et,q as gr,E as Jr}from"./web.DeeAupxM.js";/* empty css                                 */import{c as z,u as wt}from"./store.3aW66RYn.js";var Qr=f("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),Xr=f("<h4>");function Me(t=!1){return{open:t}}function He(t){let e;const[n,r]=z(t.store);Tn(()=>{n.open?e.showModal():e.close()});function a(){r({open:!1}),t.onClose?.()}const i=()=>{const s=[];return t.type!==void 0&&s.push(t.type),t.size!==void 0&&s.push(t.size),t.onClose!==void 0&&s.push("dialog-with-close"),s};return(()=>{var s=g(Qr),o=s.firstChild,[d,c]=m(o.nextSibling),h=d.nextSibling,[v,_]=m(h.nextSibling),$=v.nextSibling,[w,x]=m($.nextSibling);s.addEventListener("close",a);var T=e;return typeof T=="function"?qr(T,s):e=s,u(s,l(N,{get when(){return t.onClose},get children(){return l(je,{onClick:a,icon:"circle-xmark",kind:"gray"})}}),d,c),u(s,l(N,{get when(){return t.title},children:U=>(()=>{var H=g(Xr);return u(H,U),H})()}),v,_),u(s,()=>t.children,w,x),fe(()=>Ne(s,i().join(" "))),s})()}var On=f("<p>");function At(t){const[e,n]=z(t.store),r=t.showErrors==="ALWAYS",a=()=>r||e.isDirty?t.errors??[]:[];return[l(Hr,{get label(){return t.label},get name(){return t.name},get value(){return e.value},onValueUpdate:i=>n("value",i),onBlur:()=>n("isDirty",!0),get type(){return t.type},get required(){return t.required},get isHoneypot(){return t.isHoneypot},get disabled(){return t.disabled}}),l(N,{get when(){return a().length>0},get children(){return l(M,{type:"danger",get children(){return l(ge,{get each(){return a()},children:i=>(()=>{var s=g(On);return u(s,i),s})()})}})}})]}function Mn(t){const[e,n]=z(t.store),r=t.showErrors==="ALWAYS",a=()=>r||e.isDirty?t.errors??[]:[];return[l(zr,{get label(){return t.label},get name(){return t.name},get value(){return e.value},onValueUpdate:i=>n("value",i),onBlur:()=>n("isDirty",!0),get required(){return t.required},get isHoneypot(){return t.isHoneypot},get min(){return t.min},get max(){return t.max},get disabled(){return t.disabled}}),l(N,{get when(){return a().length>0},get children(){return l(M,{type:"danger",get children(){return l(ge,{get each(){return a()},children:i=>(()=>{var s=g(On);return u(s,i),s})()})}})}})]}function kn(t){const[e,n]=z(t.store),r=t.showErrors==="ALWAYS",a=()=>r||e.isDirty?t.errors??[]:[];return[l(Br,{get label(){return t.label},get name(){return t.name},get value(){return e.value},onValueUpdate:i=>n("value",i),onBlur:()=>n("isDirty",!0),get required(){return t.required},get size(){return t.size},get disabled(){return t.disabled}}),l(N,{get when(){return a().length>0},get children(){return l(M,{type:"danger",get children(){return l(ge,{get each(){return a()},children:i=>(()=>{var s=g(On);return u(s,i),s})()})}})}})]}var Fn=f("<br>"),ei=f("<strong>Donnerstag, 21. August 2025"),ti=f("<p>Deine Anmeldung wird geladen..."),ni=f("<p>Das Programm wird geladen..."),ri=f("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),ii=f("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),ai=f("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),si=f("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),li=f("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),oi=f("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>.");const di=["Deine Anmeldung wurde erfolgreich gestartet.",g(Fn),g(Fn),"Wir haben eine E-Mail an deine Adresse gesendet. In dieser E-Mail findest du einen persönlichen Link, um deine Anmeldung bis am"," ",g(ei)," anzupassen."],ui={registration:g(ti),program:g(ni)},ci={general:g(ri),secretError:g(ii),gameroundUuidError:g(ai),ourMistake:g(si),program:g(li),help:g(oi)},gi="Neue Spielrunde erstellen",hi="Meine Spielrunden",mi="Titel fehlt",fi="kein System angegeben",_i="kein Zeitslot ausgewählt",pi="keine Kategorien ausgewählt",$i="Kurzbeschreibung fehlt",vi="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",bi="Dies ist ein Pflichtfeld.",Si="Dieses Feld ist auf {} Zeichen limitiert.",yi="Findest du, es gäbe noch weitere hilfreiche Kategorien? Schreibe uns deinen Vorschlag per Kontaktformular.",ki={SATURDAY:"Samstag",SUNDAY:"Sonntag"},xi={CHOOSE:"Übersicht",PLAYER:"Spielanmeldung",GAME:"Spielanmeldung",GAMEMASTER:"Spielleitung",EDIT_GAMEROUND:"Spielrunde editieren",HELPING:"Helfen","HELPING-SLOT":"Helfen",SUMMARY:"Zusammenfassung"},Ei={draft:"Entwurf",published:"Veröffentlicht",archived:"Gelöscht"},wi="Meine Anmeldung: {} | Luzerner Rollenspieltage",C={registrationStarted:di,loading:ui,error:ci,createNewGameRound:gi,myGameRounds:hi,missingTitle:mi,missingSystem:fi,missingSlot:_i,missingTags:pi,missingShortDescription:$i,invalidEmail:vi,mandatoryField:bi,charLimitBy:Si,tagIdeas:yi,days:ki,pageTitle:xi,publishingSteps:Ei,metaTitle:wi};var P;(function(t){t.assertEqual=a=>{};function e(a){}t.assertIs=e;function n(a){throw new Error}t.assertNever=n,t.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return t.objectValues(s)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},t.find=(a,i)=>{for(const s of a)if(i(s))return s},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(P||(P={}));var jn;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(jn||(jn={}));const y=P.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ge=t=>{switch(typeof t){case"undefined":return y.undefined;case"string":return y.string;case"number":return Number.isNaN(t)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(t)?y.array:t===null?y.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?y.promise:typeof Map<"u"&&t instanceof Map?y.map:typeof Set<"u"&&t instanceof Set?y.set:typeof Date<"u"&&t instanceof Date?y.date:y.object;default:return y.unknown}},p=P.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ze extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,d=0;for(;d<s.path.length;){const c=s.path[d];d===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(s))):o[c]=o[c]||{_errors:[]},o=o[c],d++}}};return a(this),r}static assert(e){if(!(e instanceof Ze))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,P.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];n[i]=n[i]||[],n[i].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ze.create=t=>new Ze(t);const xn=(t,e)=>{let n;switch(t.code){case p.invalid_type:t.received===y.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case p.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,P.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:n=`Unrecognized key(s) in object: ${P.joinValues(t.keys,", ")}`;break;case p.invalid_union:n="Invalid input";break;case p.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${P.joinValues(t.options)}`;break;case p.invalid_enum_value:n=`Invalid enum value. Expected ${P.joinValues(t.options)}, received '${t.received}'`;break;case p.invalid_arguments:n="Invalid function arguments";break;case p.invalid_return_type:n="Invalid function return type";break;case p.invalid_date:n="Invalid date";break;case p.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:P.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case p.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case p.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case p.custom:n="Invalid input";break;case p.invalid_intersection_types:n="Intersection results could not be merged";break;case p.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case p.not_finite:n="Number must be finite";break;default:n=e.defaultError,P.assertNever(t)}return{message:n}};let Ci=xn;function Ri(){return Ci}const Ai=t=>{const{data:e,path:n,errorMaps:r,issueData:a}=t,i=[...n,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const d=r.filter(c=>!!c).slice().reverse();for(const c of d)o=c(s,{data:e,defaultError:o}).message;return{...a,path:i,message:o}};function b(t,e){const n=Ri(),r=Ai({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===xn?void 0:xn].filter(a=>!!a)});t.common.issues.push(r)}class ke{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const a of n){if(a.status==="aborted")return R;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const a of n){const i=await a.key,s=await a.value;r.push({key:i,value:s})}return ke.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const a of n){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return R;i.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:e.value,value:r}}}const R=Object.freeze({status:"aborted"}),Ct=t=>({status:"dirty",value:t}),Ce=t=>({status:"valid",value:t}),Zn=t=>t.status==="aborted",Hn=t=>t.status==="dirty",ht=t=>t.status==="valid",Zt=t=>typeof Promise<"u"&&t instanceof Promise;var k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));class Ve{constructor(e,n,r,a){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zn=(t,e)=>{if(ht(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ze(t.common.issues);return this._error=n,this._error}}};function O(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:a}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(s,o)=>{const{message:d}=t;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:d??r??o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:d??n??o.defaultError}},description:a}}class L{get description(){return this._def.description}_getType(e){return Ge(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ge(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ke,ctx:{common:e.parent.common,data:e.data,parsedType:Ge(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Zt(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ge(e)},a=this._parseSync({data:e,path:r.path,parent:r});return zn(r,a)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ge(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return ht(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>ht(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ge(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(Zt(a)?a:Promise.resolve(a));return zn(r,i)}refine(e,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const s=e(a),o=()=>i.addIssue({code:p.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(d=>d?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(e){return new it({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Fe.create(this,this._def)}nullable(){return at.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Te.create(this)}promise(){return Vt.create(this,this._def)}or(e){return Bt.create([this,e],this._def)}and(e){return Gt.create(this,e,this._def)}transform(e){return new it({...O(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Wt({...O(this._def),innerType:this,defaultValue:n,typeName:A.ZodDefault})}brand(){return new _r({typeName:A.ZodBranded,type:this,...O(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Kt({...O(this._def),innerType:this,catchValue:n,typeName:A.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Dn.create(this,e)}readonly(){return qt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ti=/^c[^\s-]{8,}$/i,Ni=/^[0-9a-z]+$/,Oi=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ui=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Di=/^[a-z0-9_-]{21}$/i,Ii=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Li=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Pi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Mi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let pn;const Fi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ji=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Zi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Hi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zi=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Bi=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,hr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Gi=new RegExp(`^${hr}$`);function mr(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Yi(t){return new RegExp(`^${mr(t)}$`)}function Vi(t){let e=`${hr}T${mr(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Wi(t,e){return!!((e==="v4"||!e)&&Fi.test(t)||(e==="v6"||!e)&&Zi.test(t))}function Ki(t,e){if(!Ii.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function qi(t,e){return!!((e==="v4"||!e)&&ji.test(t)||(e==="v6"||!e)&&Hi.test(t))}class Le extends L{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==y.string){const i=this._getOrReturnCtx(e);return b(i,{code:p.invalid_type,expected:y.string,received:i.parsedType}),R}const r=new ke;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=e.data.length>i.value,o=e.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(e,a),s?b(a,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&b(a,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Pi.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"email",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")pn||(pn=new RegExp(Mi,"u")),pn.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"emoji",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Ui.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"uuid",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Di.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"nanoid",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Ti.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"cuid",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Ni.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"cuid2",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Oi.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"ulid",code:p.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),b(a,{validation:"url",code:p.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"regex",code:p.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),b(a,{code:p.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),b(a,{code:p.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),b(a,{code:p.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Vi(i).test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:p.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?Gi.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:p.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?Yi(i).test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:p.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?Li.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"duration",code:p.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Wi(e.data,i.version)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"ip",code:p.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?Ki(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"jwt",code:p.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?qi(e.data,i.version)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"cidr",code:p.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?zi.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"base64",code:p.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?Bi.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"base64url",code:p.invalid_string,message:i.message}),r.dirty()):P.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(a=>e.test(a),{validation:n,code:p.invalid_string,...k.errToObj(r)})}_addCheck(e){return new Le({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...k.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...k.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...k.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...k.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...k.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...k.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...k.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...k.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...k.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...k.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...k.errToObj(n)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new Le({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Le({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Le({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Le.create=t=>new Le({checks:[],typeName:A.ZodString,coerce:t?.coerce??!1,...O(t)});function Ji(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=n>r?n:r,i=Number.parseInt(t.toFixed(a).replace(".","")),s=Number.parseInt(e.toFixed(a).replace(".",""));return i%s/10**a}class et extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==y.number){const i=this._getOrReturnCtx(e);return b(i,{code:p.invalid_type,expected:y.number,received:i.parsedType}),R}let r;const a=new ke;for(const i of this._def.checks)i.kind==="int"?P.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),b(r,{code:p.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),b(r,{code:p.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),b(r,{code:p.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Ji(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),b(r,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),b(r,{code:p.not_finite,message:i.message}),a.dirty()):P.assertNever(i);return{status:a.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,k.toString(n))}gt(e,n){return this.setLimit("min",e,!1,k.toString(n))}lte(e,n){return this.setLimit("max",e,!0,k.toString(n))}lt(e,n){return this.setLimit("max",e,!1,k.toString(n))}setLimit(e,n,r,a){return new et({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:k.toString(a)}]})}_addCheck(e){return new et({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&P.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}et.create=t=>new et({checks:[],typeName:A.ZodNumber,coerce:t?.coerce||!1,...O(t)});class tt extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==y.bigint)return this._getInvalidInput(e);let r;const a=new ke;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),b(r,{code:p.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),b(r,{code:p.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),b(r,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):P.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return b(n,{code:p.invalid_type,expected:y.bigint,received:n.parsedType}),R}gte(e,n){return this.setLimit("min",e,!0,k.toString(n))}gt(e,n){return this.setLimit("min",e,!1,k.toString(n))}lte(e,n){return this.setLimit("max",e,!0,k.toString(n))}lt(e,n){return this.setLimit("max",e,!1,k.toString(n))}setLimit(e,n,r,a){return new tt({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:k.toString(a)}]})}_addCheck(e){return new tt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}tt.create=t=>new tt({checks:[],typeName:A.ZodBigInt,coerce:t?.coerce??!1,...O(t)});class Ht extends L{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==y.boolean){const r=this._getOrReturnCtx(e);return b(r,{code:p.invalid_type,expected:y.boolean,received:r.parsedType}),R}return Ce(e.data)}}Ht.create=t=>new Ht({typeName:A.ZodBoolean,coerce:t?.coerce||!1,...O(t)});class mt extends L{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==y.date){const i=this._getOrReturnCtx(e);return b(i,{code:p.invalid_type,expected:y.date,received:i.parsedType}),R}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return b(i,{code:p.invalid_date}),R}const r=new ke;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:p.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:p.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):P.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new mt({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}mt.create=t=>new mt({checks:[],coerce:t?.coerce||!1,typeName:A.ZodDate,...O(t)});class Bn extends L{_parse(e){if(this._getType(e)!==y.symbol){const r=this._getOrReturnCtx(e);return b(r,{code:p.invalid_type,expected:y.symbol,received:r.parsedType}),R}return Ce(e.data)}}Bn.create=t=>new Bn({typeName:A.ZodSymbol,...O(t)});class En extends L{_parse(e){if(this._getType(e)!==y.undefined){const r=this._getOrReturnCtx(e);return b(r,{code:p.invalid_type,expected:y.undefined,received:r.parsedType}),R}return Ce(e.data)}}En.create=t=>new En({typeName:A.ZodUndefined,...O(t)});class zt extends L{_parse(e){if(this._getType(e)!==y.null){const r=this._getOrReturnCtx(e);return b(r,{code:p.invalid_type,expected:y.null,received:r.parsedType}),R}return Ce(e.data)}}zt.create=t=>new zt({typeName:A.ZodNull,...O(t)});class Gn extends L{constructor(){super(...arguments),this._any=!0}_parse(e){return Ce(e.data)}}Gn.create=t=>new Gn({typeName:A.ZodAny,...O(t)});class Yn extends L{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ce(e.data)}}Yn.create=t=>new Yn({typeName:A.ZodUnknown,...O(t)});class We extends L{_parse(e){const n=this._getOrReturnCtx(e);return b(n,{code:p.invalid_type,expected:y.never,received:n.parsedType}),R}}We.create=t=>new We({typeName:A.ZodNever,...O(t)});class Vn extends L{_parse(e){if(this._getType(e)!==y.undefined){const r=this._getOrReturnCtx(e);return b(r,{code:p.invalid_type,expected:y.void,received:r.parsedType}),R}return Ce(e.data)}}Vn.create=t=>new Vn({typeName:A.ZodVoid,...O(t)});class Te extends L{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),a=this._def;if(n.parsedType!==y.array)return b(n,{code:p.invalid_type,expected:y.array,received:n.parsedType}),R;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(s||o)&&(b(n,{code:s?p.too_big:p.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(b(n,{code:p.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(b(n,{code:p.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>a.type._parseAsync(new Ve(n,s,n.path,o)))).then(s=>ke.mergeArray(r,s));const i=[...n.data].map((s,o)=>a.type._parseSync(new Ve(n,s,n.path,o)));return ke.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Te({...this._def,minLength:{value:e,message:k.toString(n)}})}max(e,n){return new Te({...this._def,maxLength:{value:e,message:k.toString(n)}})}length(e,n){return new Te({...this._def,exactLength:{value:e,message:k.toString(n)}})}nonempty(e){return this.min(1,e)}}Te.create=(t,e)=>new Te({type:t,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...O(e)});function ct(t){if(t instanceof Q){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Fe.create(ct(r))}return new Q({...t._def,shape:()=>e})}else return t instanceof Te?new Te({...t._def,type:ct(t.element)}):t instanceof Fe?Fe.create(ct(t.unwrap())):t instanceof at?at.create(ct(t.unwrap())):t instanceof nt?nt.create(t.items.map(e=>ct(e))):t}class Q extends L{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=P.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==y.object){const c=this._getOrReturnCtx(e);return b(c,{code:p.invalid_type,expected:y.object,received:c.parsedType}),R}const{status:r,ctx:a}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof We&&this._def.unknownKeys==="strip"))for(const c in a.data)s.includes(c)||o.push(c);const d=[];for(const c of s){const h=i[c],v=a.data[c];d.push({key:{status:"valid",value:c},value:h._parse(new Ve(a,v,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof We){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of o)d.push({key:{status:"valid",value:h},value:{status:"valid",value:a.data[h]}});else if(c==="strict")o.length>0&&(b(a,{code:p.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of o){const v=a.data[h];d.push({key:{status:"valid",value:h},value:c._parse(new Ve(a,v,a.path,h)),alwaysSet:h in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of d){const v=await h.key,_=await h.value;c.push({key:v,value:_,alwaysSet:h.alwaysSet})}return c}).then(c=>ke.mergeObjectSync(r,c)):ke.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new Q({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const a=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:k.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new Q({...this._def,unknownKeys:"strip"})}passthrough(){return new Q({...this._def,unknownKeys:"passthrough"})}extend(e){return new Q({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Q({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:A.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Q({...this._def,catchall:e})}pick(e){const n={};for(const r of P.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Q({...this._def,shape:()=>n})}omit(e){const n={};for(const r of P.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Q({...this._def,shape:()=>n})}deepPartial(){return ct(this)}partial(e){const n={};for(const r of P.objectKeys(this.shape)){const a=this.shape[r];e&&!e[r]?n[r]=a:n[r]=a.optional()}return new Q({...this._def,shape:()=>n})}required(e){const n={};for(const r of P.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Fe;)i=i._def.innerType;n[r]=i}return new Q({...this._def,shape:()=>n})}keyof(){return fr(P.objectKeys(this.shape))}}Q.create=(t,e)=>new Q({shape:()=>t,unknownKeys:"strip",catchall:We.create(),typeName:A.ZodObject,...O(e)});Q.strictCreate=(t,e)=>new Q({shape:()=>t,unknownKeys:"strict",catchall:We.create(),typeName:A.ZodObject,...O(e)});Q.lazycreate=(t,e)=>new Q({shape:t,unknownKeys:"strip",catchall:We.create(),typeName:A.ZodObject,...O(e)});class Bt extends L{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new Ze(o.ctx.common.issues));return b(n,{code:p.invalid_union,unionErrors:s}),R}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const d of r){const c={...n,common:{...n.common,issues:[]},parent:null},h=d._parseSync({data:n.data,path:n.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(d=>new Ze(d));return b(n,{code:p.invalid_union,unionErrors:o}),R}}get options(){return this._def.options}}Bt.create=(t,e)=>new Bt({options:t,typeName:A.ZodUnion,...O(e)});const Ie=t=>t instanceof Cn?Ie(t.schema):t instanceof it?Ie(t.innerType()):t instanceof Yt?[t.value]:t instanceof rt?t.options:t instanceof Rn?P.objectValues(t.enum):t instanceof Wt?Ie(t._def.innerType):t instanceof En?[void 0]:t instanceof zt?[null]:t instanceof Fe?[void 0,...Ie(t.unwrap())]:t instanceof at?[null,...Ie(t.unwrap())]:t instanceof _r||t instanceof qt?Ie(t.unwrap()):t instanceof Kt?Ie(t._def.innerType):[];class Un extends L{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==y.object)return b(n,{code:p.invalid_type,expected:y.object,received:n.parsedType}),R;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(b(n,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),R)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const a=new Map;for(const i of n){const s=Ie(i.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);a.set(o,i)}}return new Un({typeName:A.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:a,...O(r)})}}function wn(t,e){const n=Ge(t),r=Ge(e);if(t===e)return{valid:!0,data:t};if(n===y.object&&r===y.object){const a=P.objectKeys(e),i=P.objectKeys(t).filter(o=>a.indexOf(o)!==-1),s={...t,...e};for(const o of i){const d=wn(t[o],e[o]);if(!d.valid)return{valid:!1};s[o]=d.data}return{valid:!0,data:s}}else if(n===y.array&&r===y.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const s=t[i],o=e[i],d=wn(s,o);if(!d.valid)return{valid:!1};a.push(d.data)}return{valid:!0,data:a}}else return n===y.date&&r===y.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Gt extends L{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=(i,s)=>{if(Zn(i)||Zn(s))return R;const o=wn(i.value,s.value);return o.valid?((Hn(i)||Hn(s))&&n.dirty(),{status:n.value,value:o.data}):(b(r,{code:p.invalid_intersection_types}),R)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Gt.create=(t,e,n)=>new Gt({left:t,right:e,typeName:A.ZodIntersection,...O(n)});class nt extends L{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==y.array)return b(r,{code:p.invalid_type,expected:y.array,received:r.parsedType}),R;if(r.data.length<this._def.items.length)return b(r,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),R;!this._def.rest&&r.data.length>this._def.items.length&&(b(r,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,o)=>{const d=this._def.items[o]||this._def.rest;return d?d._parse(new Ve(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>ke.mergeArray(n,s)):ke.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new nt({...this._def,rest:e})}}nt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new nt({items:t,typeName:A.ZodTuple,rest:null,...O(e)})};class Wn extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==y.map)return b(r,{code:p.invalid_type,expected:y.map,received:r.parsedType}),R;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,d],c)=>({key:a._parse(new Ve(r,o,r.path,[c,"key"])),value:i._parse(new Ve(r,d,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const d of s){const c=await d.key,h=await d.value;if(c.status==="aborted"||h.status==="aborted")return R;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),o.set(c.value,h.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const d of s){const c=d.key,h=d.value;if(c.status==="aborted"||h.status==="aborted")return R;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),o.set(c.value,h.value)}return{status:n.value,value:o}}}}Wn.create=(t,e,n)=>new Wn({valueType:e,keyType:t,typeName:A.ZodMap,...O(n)});class Nt extends L{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==y.set)return b(r,{code:p.invalid_type,expected:y.set,received:r.parsedType}),R;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(b(r,{code:p.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(b(r,{code:p.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function s(d){const c=new Set;for(const h of d){if(h.status==="aborted")return R;h.status==="dirty"&&n.dirty(),c.add(h.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((d,c)=>i._parse(new Ve(r,d,r.path,c)));return r.common.async?Promise.all(o).then(d=>s(d)):s(o)}min(e,n){return new Nt({...this._def,minSize:{value:e,message:k.toString(n)}})}max(e,n){return new Nt({...this._def,maxSize:{value:e,message:k.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Nt.create=(t,e)=>new Nt({valueType:t,minSize:null,maxSize:null,typeName:A.ZodSet,...O(e)});class Cn extends L{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Cn.create=(t,e)=>new Cn({getter:t,typeName:A.ZodLazy,...O(e)});class Yt extends L{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return b(n,{received:n.data,code:p.invalid_literal,expected:this._def.value}),R}return{status:"valid",value:e.data}}get value(){return this._def.value}}Yt.create=(t,e)=>new Yt({value:t,typeName:A.ZodLiteral,...O(e)});function fr(t,e){return new rt({values:t,typeName:A.ZodEnum,...O(e)})}class rt extends L{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return b(n,{expected:P.joinValues(r),received:n.parsedType,code:p.invalid_type}),R}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return b(n,{received:n.data,code:p.invalid_enum_value,options:r}),R}return Ce(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return rt.create(e,{...this._def,...n})}exclude(e,n=this._def){return rt.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}rt.create=fr;class Rn extends L{_parse(e){const n=P.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==y.string&&r.parsedType!==y.number){const a=P.objectValues(n);return b(r,{expected:P.joinValues(a),received:r.parsedType,code:p.invalid_type}),R}if(this._cache||(this._cache=new Set(P.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=P.objectValues(n);return b(r,{received:r.data,code:p.invalid_enum_value,options:a}),R}return Ce(e.data)}get enum(){return this._def.values}}Rn.create=(t,e)=>new Rn({values:t,typeName:A.ZodNativeEnum,...O(e)});class Vt extends L{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==y.promise&&n.common.async===!1)return b(n,{code:p.invalid_type,expected:y.promise,received:n.parsedType}),R;const r=n.parsedType===y.promise?n.data:Promise.resolve(n.data);return Ce(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Vt.create=(t,e)=>new Vt({type:t,typeName:A.ZodPromise,...O(e)});class it extends L{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:s=>{b(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return R;const d=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return d.status==="aborted"?R:d.status==="dirty"||n.value==="dirty"?Ct(d.value):d});{if(n.value==="aborted")return R;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?R:o.status==="dirty"||n.value==="dirty"?Ct(o.value):o}}if(a.type==="refinement"){const s=o=>{const d=a.refinement(o,i);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?R:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?R:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ht(s))return R;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>ht(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:n.value,value:o})):R);P.assertNever(a)}}it.create=(t,e,n)=>new it({schema:t,typeName:A.ZodEffects,effect:e,...O(n)});it.createWithPreprocess=(t,e,n)=>new it({schema:e,effect:{type:"preprocess",transform:t},typeName:A.ZodEffects,...O(n)});class Fe extends L{_parse(e){return this._getType(e)===y.undefined?Ce(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fe.create=(t,e)=>new Fe({innerType:t,typeName:A.ZodOptional,...O(e)});class at extends L{_parse(e){return this._getType(e)===y.null?Ce(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}at.create=(t,e)=>new at({innerType:t,typeName:A.ZodNullable,...O(e)});class Wt extends L{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===y.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Wt.create=(t,e)=>new Wt({innerType:t,typeName:A.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...O(e)});class Kt extends L{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Zt(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ze(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ze(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Kt.create=(t,e)=>new Kt({innerType:t,typeName:A.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...O(e)});class Kn extends L{_parse(e){if(this._getType(e)!==y.nan){const r=this._getOrReturnCtx(e);return b(r,{code:p.invalid_type,expected:y.nan,received:r.parsedType}),R}return{status:"valid",value:e.data}}}Kn.create=t=>new Kn({typeName:A.ZodNaN,...O(t)});class _r extends L{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Dn extends L{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?R:i.status==="dirty"?(n.dirty(),Ct(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?R:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,n){return new Dn({in:e,out:n,typeName:A.ZodPipeline})}}class qt extends L{_parse(e){const n=this._def.innerType._parse(e),r=a=>(ht(a)&&(a.value=Object.freeze(a.value)),a);return Zt(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}qt.create=(t,e)=>new qt({innerType:t,typeName:A.ZodReadonly,...O(e)});var A;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(A||(A={}));const S=Le.create,pe=et.create;tt.create;const ft=Ht.create;mt.create;const yt=zt.create;We.create;const he=Te.create,E=Q.create,_t=Bt.create,pr=Un.create;Gt.create;nt.create;const F=Yt.create,rn=rt.create;Vt.create;Fe.create;at.create;const Qi={string:(t=>Le.create({...t,coerce:!0})),number:(t=>et.create({...t,coerce:!0})),boolean:(t=>Ht.create({...t,coerce:!0})),bigint:(t=>tt.create({...t,coerce:!0})),date:(t=>mt.create({...t,coerce:!0}))},Pt=S().transform(t=>({value:t,isDirty:!1}));function $n(t){return{value:t,isDirty:!1}}const qn=pe().transform(t=>({value:t,isDirty:!1})),st={SATURDAY:{open:{from:10,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}};rn(["SATURDAY","SUNDAY"]);function Mt(t,e){const{from:n,to:r}=e;return n<t&&t<r}function Xi(t,e){const{from:n,to:r}=t,{from:a,to:i}=e;return Mt(n,e)||Mt(r,e)||Mt(a,t)||Mt(i,t)||n===a&&r===i}function Ot(t,e=!1){const{from:n,to:r}=t;if(n>r)return[];const a=r-n;return In(e?a+1:a,n)}function In(t,e=0){return[...Array(t)].map((n,r)=>r+e)}function ea(t,e){return t===null?-1:e===null?1:t.day==="SATURDAY"&&e.day==="SUNDAY"?-1:t.day==="SUNDAY"&&e.day==="SATURDAY"?1:t.from===e.from?t.to-e.to:t.from-e.from}var ta=f("<div class=dynamic-columns style=gap:1rem;--min-width:30rem><!$><!/><!$><!/>"),na=f("<div><h4 style=margin-block-end:1.5rem></h4><!$><!/>"),ra=f("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),ia=f('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),aa=f("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),sa=f("<div><div class=annotation></div><div class=background>"),la=f("<div class=entry>");function $r(t){return(()=>{var e=g(ta),n=e.firstChild,[r,a]=m(n.nextSibling),i=r.nextSibling,[s,o]=m(i.nextSibling);return u(e,l(Jn,{get programEntries(){return t.programEntries.SATURDAY},get openingHours(){return st.SATURDAY},day:"SATURDAY",get conflictsAllowed(){return t.conflictsAllowed??!1}}),r,a),u(e,l(Jn,{get programEntries(){return t.programEntries.SUNDAY},get openingHours(){return st.SUNDAY},day:"SUNDAY",get conflictsAllowed(){return t.conflictsAllowed??!1}}),s,o),e})()}function Jn(t){const e=t.conflictsAllowed?[]:da(t.programEntries);return(()=>{var n=g(na),r=n.firstChild,a=r.nextSibling,[i,s]=m(a.nextSibling);return u(r,()=>C.days[t.day]),u(n,l(Oe,{get fallback(){return[l(M,{type:"danger",get children(){return g(ra)}}),l(ge,{each:e,children:([o,d])=>(()=>{var c=g(ia),h=c.firstChild,[v,_]=m(h.nextSibling),$=v.nextSibling,w=$.nextSibling,[x,T]=m(w.nextSibling);return u(c,()=>o.component(),v,_),u($,l(be,{icon:"triangle-exclamation"})),u(c,()=>d.component(),x,T),c})()})]},get children(){return l(j,{get when(){return e.length===0},get children(){return l(oa,{get programEntries(){return t.programEntries},get openingHours(){return t.openingHours},get day(){return t.day},get conflictsAllowed(){return t.conflictsAllowed}})}})}}),i,s),n})()}function oa(t){const e=Ot(t.openingHours.open),n=t.openingHours.breaks.map(({from:s})=>s),r=(e[0]??0)-1,a=e.at(-1)??0,i=()=>{const s=["timetable"];return t.conflictsAllowed&&s.push("two-columns"),s.join(" ")};return(()=>{var s=g(aa),o=s.firstChild,[d,c]=m(o.nextSibling),h=d.nextSibling,v=h.nextSibling,_=v.firstChild;return u(s,l(ge,{each:e,children:$=>{const w=n.includes($);return(()=>{var x=g(sa),T=x.firstChild;return Ne(x,`hour ${w?"break":""}`),u(T,$),fe(U=>_n(x,Qn({from:$,to:$},r,t.day),U)),x})()}}),d,c),u(h,l(ge,{get each(){return t.programEntries},children:$=>(()=>{var w=g(la);return u(w,()=>$.component()),fe(x=>_n(w,Qn($.range,r,t.day),x)),w})()})),u(_,a+1),fe($=>{var w=i(),x=`grid-row: 1 / ${a-r+1};`;return w!==$.e&&Ne(s,$.e=w),$.t=_n(h,x,$.t),$},{e:void 0,t:void 0}),s})()}function Qn(t,e,n){const{from:r,to:a}=t,i=r-e,s=a-e,o=st[n].open.to;return mn(i>0,`Entry can't start at ${r}.`),mn(s>0,`Entry can't end at ${a}.`),mn(a<=o,`Entry can't end at ${a}.`),`grid-row: ${i} / ${s};`}function da(t){const e=[];return t.forEach((n,r)=>{t.slice(r+1).forEach(a=>{Xi(n.range,a.range)&&e.push([n,a])})}),e}var ua=f("<span>");function Jt(t){const e=()=>{const n=["chip"];return n.push(t.kind??"gray"),t.inverted&&n.push("inverted"),t.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=g(ua);return u(n,()=>t.children),fe(r=>{var a=e(),i=t.title;return a!==r.e&&Ne(n,r.e=a),i!==r.t&&Tt(n,"title",r.t=i),r},{e:void 0,t:void 0}),n})()}const Ut={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."}},Qt={SATURDAY:{10:[{uuid:"90178258-734d-4c7d-9df0-891f6d46a5dc",count:1,kind:"kiosk"},{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:1,kind:"kitchen"}],11:[{uuid:"690037d9-bd4f-407c-b202-d0dd71d775d2",count:1,kind:"kiosk"},{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:1,kind:"kitchen"}],12:[{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:1,kind:"kiosk"},{uuid:"97507994-efa1-4e38-9191-3034f77005ad",count:2,kind:"kitchen"}],13:[{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:2,kind:"service"}],14:[{uuid:"a155bb61-d1a6-4f3f-8da3-46eb57030a96",count:1,kind:"kiosk"},{uuid:"9faf0a19-45be-4968-9eb0-a9f48e94a616",count:1,kind:"cleaning"}],15:[{uuid:"30c6d6ea-3d65-4040-9dde-abb5f4b58e35",count:1,kind:"kiosk"}],16:[{uuid:"f70d01f6-cba3-4e3a-be3e-7cdea2cbdb4b",count:1,kind:"kiosk"},{uuid:"210e67fe-541e-48bc-a515-d0f5cac12c0b",count:1,kind:"kitchen"}],17:[{uuid:"8cdc6efb-d0ff-4a8e-8130-700d2284d2e1",count:1,kind:"kiosk"},{uuid:"40ad7820-f4cd-4c8b-914a-203f4cc7b00a",count:2,kind:"kitchen"}],18:[{uuid:"d4eac28b-130b-4a8e-ad5f-8aee57c2d4d8",count:2,kind:"service"}],19:[{uuid:"6fd5ef92-5bb3-4f1a-8673-e81596e53894",count:1,kind:"kiosk"},{uuid:"6333be4b-93d9-40c4-8167-dca4f9bb87e1",count:1,kind:"cleaning"}],20:[{uuid:"037c19be-79b5-4f94-967d-ffdf9e8c4cd0",count:1,kind:"kiosk"}],21:[{uuid:"ce9d82b2-7633-4741-ae58-c96872ffd6bd",count:1,kind:"kiosk"}]},SUNDAY:{10:[{uuid:"ff91d0b8-8bf3-4390-be69-3097d94b7ff0",count:1,kind:"kiosk"}],11:[{uuid:"f19c658b-5ad3-4c6a-b344-a2e6756385d9",count:1,kind:"kiosk"},{uuid:"ca76897c-844d-4be4-9f5f-8e22e04ee0af",count:1,kind:"kitchen"}],12:[{uuid:"21d3be63-10a6-4165-8203-b4d202d78718",count:1,kind:"kiosk"},{uuid:"90dfe7c7-1742-4bbf-8f83-cdf6b149af2e",count:2,kind:"kitchen"}],13:[{uuid:"9d189005-d51b-4fa8-81f1-22e5110fe684",count:2,kind:"service"}],14:[{uuid:"01fef159-e93c-4066-9a79-85ba7333dd02",count:1,kind:"kiosk"},{uuid:"1196df90-15a5-4c2b-b30e-722c868ebead",count:1,kind:"cleaning"}],15:[{uuid:"aef187b1-97f8-4607-844c-79c1404a3796",count:1,kind:"kiosk"}],16:[{uuid:"cd1077c1-8fea-42de-a769-32b255f89070",count:1,kind:"kiosk"}],17:[{uuid:"1231cecf-7aeb-45e7-b0dc-af8641ecdd94",count:1,kind:"kiosk"}]}};function vr(t){return Xn("SATURDAY",Qt.SATURDAY).concat(Xn("SUNDAY",Qt.SUNDAY)).find(n=>n.entry.uuid===t)??null}function Xn(t,e){const n=[];return Object.entries(e).forEach(([r,a])=>{const i=Number(r);a.forEach(s=>{n.push({dateTime:{day:t,from:i,to:i+1},entry:s})})}),n}var br=f("<br>"),ca=f("<div>"),ga=f("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),ha=f("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>"),ma=f("<h3>Mein Programm"),fa=f("<div><!$><!/><!$><!/><h5></h5><p class=duration>von <!$><!/> bis <!$><!/> Uhr <em><small>(<!$><!/> <!$><!/>)");function er(t){return[l(pa,{get store(){return t.store.init},get isEditable(){return t.isEditable}}),g(br),l(Oe,{get fallback(){return l(M,{get children(){return C.loading.program}})},get children(){return l(j,{get when(){return t.program()},children:e=>l(_a,{get store(){return t.store},get program(){return e()},get isEditable(){return t.isEditable},get changePage(){return t.changePage}})})}})]}function _a(t){const e=t.store.master.games.flatMap(d=>d.slots.map(c=>({status:d.kind,uuid:d.uuid,title:d.title.value,dateTime:c}))),n=()=>a().filter(d=>i().has(d.uuid)).map(d=>({uuid:d.uuid,title:d.title,dateTime:d.slot,playerNames:s(d.uuid)})),r=()=>t.store.helping.map(d=>{const c=vr(d.helpEntryUuid);return c===null?null:{uuid:d.helpEntryUuid,title:Ut[c.entry.kind].title,dateTime:c.dateTime,helperNames:o(d.helpEntryUuid)}}).filter(d=>d!==null),a=()=>t.program.kind==="SUCCESS"?t.program.data:[],i=()=>{const d=t.store.playing.reservations.map(c=>c.gameRound);return new Set(d)},s=d=>t.store.playing.reservations.filter(c=>c.gameRound===d).map(c=>c.kind==="SELF"?t.store.init.name:c.name),o=d=>t.store.helping.filter(c=>c.helpEntryUuid===d).map(c=>c.kind==="SELF"?t.store.init.name:c.name);return l(va,{get entries(){return{play:n(),master:e,help:r()}},get changePage(){return t.changePage},get isEditable(){return t.isEditable}})}function pa(t){const[e,n]=z(t.store),[r,a]=z(Me());return l(M,{get children(){return[l(N,{get when(){return r.open},get children(){return l($a,{dialogStore:r,get currentState(){return t.store},updateCurrentState:n})}}),(()=>{var i=g(ga),s=i.firstChild,o=s.nextSibling,d=o.firstChild,c=d.nextSibling,h=c.nextSibling,[v,_]=m(h.nextSibling),$=o.nextSibling,w=$.firstChild,x=w.nextSibling,T=x.nextSibling,[U,H]=m(T.nextSibling),G=$.nextSibling,V=G.firstChild,q=V.nextSibling,ae=q.nextSibling,[Z,X]=m(ae.nextSibling),ee=G.nextSibling,[se,te]=m(ee.nextSibling);return u(o,()=>t.store.name,v,_),u($,()=>t.store.email,U,H),u(G,()=>t.store.mobile,Z,X),u(i,l(N,{get when(){return t.isEditable},get children(){var le=g(ca);return u(le,l(ie,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>a("open",!0)})),le}}),se,te),i})()]}})}function $a(t){const[e]=z({name:$n(t.currentState.name),email:$n(t.currentState.email),mobile:$n(t.currentState.mobile)}),n=en(()=>{const i={name:[],email:[]};return e.name.value.trim().length===0&&i.name.push(C.mandatoryField),e.email.value.trim().length===0?i.email.push(C.mandatoryField):e.email.value.includes("@")||i.email.push(C.invalidEmail),{...i,hasErrors:i.name.length+i.email.length>0}}),[r,a]=z(t.dialogStore);return l(He,{get store(){return t.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var i=g(ha),s=i.firstChild,[o,d]=m(s.nextSibling),c=o.nextSibling,[h,v]=m(c.nextSibling),_=h.nextSibling,[$,w]=m(_.nextSibling),x=$.nextSibling,[T,U]=m(x.nextSibling);return u(i,l(At,{get store(){return e.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return n().name}}),o,d),u(i,l(At,{get store(){return e.email},label:"E-Mail",name:"email",showErrors:"ON_BLUR",get errors(){return n().email}}),h,v),u(i,l(At,{get store(){return e.mobile},label:"Handynummer",name:"mobile"}),$,w),u(i,l(me,{label:"Speichern",get disabled(){return n().hasErrors},onClick:()=>{n().hasErrors||(t.updateCurrentState({name:e.name.value,email:e.email.value,mobile:e.mobile.value}),a("open",!1))}}),T,U),i}})}function va(t){const e=ba(t.entries,t.changePage,t.isEditable);return[g(ma),g(br),l($r,{programEntries:e})]}function vn(t){const e=t.range.to-t.range.from,n={"master-draft":{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},master:{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},play:{label:"TN",help:"Teilnehmer:in",link:{icon:"link",label:"Zur Spielrunde"}},help:{label:"HL",help:"Helfen",link:{icon:"link",label:"Zum Eintrag"}}}[t.kind],r=()=>{const a=["timeview-entry","box-simple"];return t.kind==="master-draft"&&a.push("gray"),t.kind==="master"&&a.push("special"),t.kind==="play"&&a.push("danger"),a.join(" ")};return(()=>{var a=g(fa),i=a.firstChild,[s,o]=m(i.nextSibling),d=s.nextSibling,[c,h]=m(d.nextSibling),v=c.nextSibling,_=v.nextSibling,$=_.firstChild,w=$.nextSibling,[x,T]=m(w.nextSibling),U=x.nextSibling,H=U.nextSibling,[G,V]=m(H.nextSibling),q=G.nextSibling,ae=q.nextSibling,Z=ae.firstChild,X=Z.firstChild,ee=X.nextSibling,[se,te]=m(ee.nextSibling),le=se.nextSibling,ne=le.nextSibling,[$e,Se]=m(ne.nextSibling);return $e.nextSibling,u(a,l(Jt,{get title(){return n.help},get inverted(){return t.kind!=="help"},size:"small",get children(){return n.label}}),s,o),u(a,l(N,{get when(){return t.onClick},children:J=>l(je,{get icon(){return n.link.icon},kind:"ghost",get onClick(){return J()},get title(){return n.link.label}})}),c,h),u(v,()=>t.title),u(_,()=>t.range.from,x,T),u(_,()=>t.range.to,G,V),u(Z,e,se,te),u(Z,e===1?"Stunde":"Stunden",$e,Se),fe(J=>{var _e=r(),oe=t.title;return _e!==J.e&&Ne(a,J.e=_e),oe!==J.t&&Tt(v,"title",J.t=oe),J},{e:void 0,t:void 0}),a})()}function ba(t,e,n){const r={SATURDAY:[],SUNDAY:[]};if(!n)return r;t.play.forEach(i=>{const s=`${i.title} (${i.playerNames.join(", ")})`;r[i.dateTime.day].push({range:i.dateTime,component:()=>l(vn,{title:s,get range(){return i.dateTime},kind:"play",onClick:()=>e({kind:"GAME",uuid:i.uuid})})})}),t.master.forEach(i=>{if(i.status==="archived")return;const s=[i.title];i.status==="draft"&&s.unshift("(noch nicht veröffentlicht)"),r[i.dateTime.day].push({range:i.dateTime,component:()=>l(vn,{get title(){return s.join(" ")},get range(){return i.dateTime},get kind(){return i.status==="published"?"master":"master-draft"},onClick:()=>e({kind:"EDIT_GAMEROUND",uuid:i.uuid})})})});const a=Object.groupBy(t.help,i=>{const{day:s,from:o,to:d}=i.dateTime;return`${s}-${o}-${d}`});return Object.values(a).forEach(i=>{if(i===void 0)return;const s=i[0];if(s===void 0)return;const o=Object.groupBy(i,c=>c.title),d=Object.entries(o).map(([c,h])=>h===void 0?null:`${c} (${h.flatMap(v=>v.helperNames).join(", ")})`).filter(c=>c!==null).join(", ");r[s.dateTime.day].push({range:s.dateTime,component:()=>l(vn,{title:`Helfen: ${d}`,get range(){return s.dateTime},kind:"help",onClick:()=>e({kind:"HELPING-SLOT",uuid:s.uuid})})})}),r}const pt=[{name:"ab6jahren",label:"Ab 6 Jahren",description:"Spannungs- und Bedrohungsmomente werden kurz gehalten. In Begleitung oder nach Absprache mit einem Elternteil. Beispiele: My Little Pony, ..."},{name:"ab12jahren",label:"Ab 12 Jahren",description:"Antisoziales und destruktives wird auf ein Minimum begrenzt. Keine Diskriminierung, keine Radikalisierung, Sexualität wird nicht explizit dargestellt."},{name:"ab18jahren",label:"Ab 18 Jahren",description:"Keinerlei Richtlinien bezüglich Inhalt, in der Gruppe sollte aber diskutiert werden, was akzeptabel ist und was nicht. Beispiele: Vampire the Masquerade, ..."},{name:"fantasy",label:"Fantasy",description:"Spielt in einer alternativen Vergangenheit, in welcher Elemente wie: Ritterinnen, Hexenmeister, Rüstungen, Magie, Goblins, Turniere usw. vorkommen können. Beispiele: Das Schwarze Auge, Dungeons & Dragons, ..."},{name:"sciencefiction",label:"Science Fiction",description:"Spielt in einer alternativen Zukunft, in welcher Elemente wie: Raumschiffe, Sternenportale, Künstliche Intelligenzen, Laserkanonen usw. vorkommen können. Beispiele: Shadowrun, Alien, ..."},{name:"postapokalyptisch",label:"Postapokalyptisch",description:"Spielt in einer Welt mitten oder nach einem Kollaps, wo die Mehrheit ums Überleben kämpft. Beispiele: Mutant Year Zero, Apocalypse World"},{name:"horror",label:"Horror",description:"Eine gruselige Atmosphäre, psychologischer Druck oder unvorhersehbare Schreckensmomente. Beispiele: Cthulhu, ..."},{name:"offenewelt",label:"Offene Welt",description:"Es gibt nur einen losen Handlungsfaden, die Rollenspiel-Gruppe muss sich ihre Ziele selber festlegen. Beispiele: Ironsworn, Blades in the Dark, ..."},{name:"gemeinsamespielleitung",label:"Gemeinsame Spielleitung",description:"Die Regeln und die Umwelt werden gemeinsam von allen Spielenden umgesetzt. Beispiele: Microscope, The Quiet Year, ..."},{name:"regelleicht",label:"Regelleicht",description:"Die kompletten Regeln haben alle auf einer Seite Platz. Beispiele: Fiasco, Everyone is John, ..."},{name:"deutsch",label:"Deutsch",description:"Bei der Spielrunde reden die Spielenden miteinander Deutsch."},{name:"englisch",label:"Englisch",description:"Bei der Spielrunde reden die Spielenden miteinander Englisch."},{name:"workshop",label:"Workshop",description:"Unter Anleitung, gemeinsam ein Rollenspiel-Thema vertiefen. Kreative Techniken stehen im Vordergrund. Beispiele: Gemeinsam einen Dungeon erschaffen, gemeinsam eine Hintergrundgeschichte schreiben, ..."}];var Sa=f("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Spielleitung:</strong><br> <!$><!/></li><li><strong style=color:var(--clr-accent-1)>System:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Freie Plätze:</strong><br><!$><!/> (von <!$><!/>)</li><li><strong style=color:var(--clr-accent-1)>Kategorien:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1)>Kurze Beschreibung:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1)>Lange Beschreibung:</strong><br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),ya=f("<em>kein System angegeben"),ka=f("<em>keine Kategorien"),xa=f("<em>Keine lange Beschreibung angegeben."),Ea=f("<div class=count>"),wa=f("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),Ca=f('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),Ra=f('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>'),Aa=f('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function Ta(t){const e=()=>t.reservations.filter(d=>d.gameRound===t.entry.uuid),n=Math.max(t.entry.playerCount.reserved+1-e.length,1),r=t.entry.tags.map(d=>pt.find(({name:c})=>c===d)).filter(d=>d!==void 0).map(({label:d})=>d),a=t.entry.playerCount.max,i=()=>In(a).map(d=>{const c=e()[d];return c!==void 0?c:d+1===a?{kind:"RESERVED_SPONTANIOUS"}:a-n<=d?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),s=()=>e().find(d=>d.kind==="SELF")!==void 0,o=()=>{const d=i().filter(h=>h.kind==="SELF"||h.kind==="FRIEND").length,c=t.entry.playerCount.max-1-t.entry.playerCount.reserved-d;return Math.max(c,0)};return(()=>{var d=g(Sa),c=d.firstChild,h=c.firstChild,v=h.firstChild,_=v.nextSibling,$=_.nextSibling,w=$.nextSibling,[x,T]=m(w.nextSibling),U=h.nextSibling,H=U.firstChild,G=H.nextSibling,V=G.nextSibling,[q,ae]=m(V.nextSibling),Z=U.nextSibling,X=Z.firstChild,ee=X.nextSibling,se=ee.nextSibling,te=se.nextSibling,[le,ne]=m(te.nextSibling),$e=le.nextSibling,Se=$e.nextSibling,[J,_e]=m(Se.nextSibling),oe=J.nextSibling,B=oe.nextSibling,[ye,D]=m(B.nextSibling);ye.nextSibling;var W=Z.nextSibling,re=W.firstChild,de=re.nextSibling,K=de.nextSibling,[ve,xe]=m(K.nextSibling),Re=ve.nextSibling,Ue=Re.nextSibling,[Ee,ze]=m(Ue.nextSibling);Ee.nextSibling;var De=W.nextSibling,Ke=De.firstChild,Y=Ke.nextSibling,Ae=Y.nextSibling,[ot,$t]=m(Ae.nextSibling),qe=De.nextSibling,vt=qe.firstChild,Be=vt.nextSibling,ln=Be.nextSibling,[on,dn]=m(ln.nextSibling),bt=qe.nextSibling,un=bt.firstChild,Or=un.nextSibling,Ur=Or.nextSibling,[Dr,Ir]=m(Ur.nextSibling),Lr=c.nextSibling,Pr=Lr.firstChild,Mr=Pr.nextSibling;return u(h,()=>t.entry.gamemaster,x,T),u(U,(()=>{var ue=I(()=>t.entry.system.trim().length>0);return()=>ue()?t.entry.system:g(ya)})(),q,ae),u(Z,()=>C.days[t.entry.slot.day],le,ne),u(Z,()=>t.entry.slot.from,J,_e),u(Z,()=>t.entry.slot.to,ye,D),u(W,o,ve,xe),u(W,()=>t.entry.playerCount.max,Ee,ze),u(De,(()=>{var ue=I(()=>r.length>0);return()=>ue()?r.join(", "):g(ka)})(),ot,$t),u(qe,()=>t.entry.description.short,on,dn),u(bt,(()=>{var ue=I(()=>t.entry.description.long.trim().length>0);return()=>ue()?I(()=>t.entry.description.long):g(xa)})(),Dr,Ir),u(Mr,l(ge,{get each(){return i()},children:(ue,Fr)=>[(()=>{var ce=g(Ea);return u(ce,()=>Fr()+1),ce})(),l(Oe,{get children(){return[l(j,{get when(){return ue.kind==="RESERVED_OTHER"},get children(){return l(M,{children:"Bereits reserviert"})}}),l(j,{get when(){return ue.kind==="RESERVED_SPONTANIOUS"},get children(){return l(M,{children:"Reserviert für spontane Spieler:innen"})}}),l(j,{get when(){return!t.isEditable},get children(){return l(M,{children:"Freier Platz"})}}),l(j,{get when(){return ue.kind==="SELF"},get children(){return l(jt,{type:"success",get children(){var ce=g(wa),Je=ce.firstChild,dt=Je.nextSibling,[St,ut]=m(dt.nextSibling);return u(ce,l(je,{icon:"trash",onClick:()=>t.removeReservation(ue.kind==="SELF"?ue.uuid:"should not happen")}),St,ut),ce}})}}),l(j,{get when(){return ue.kind==="FRIEND"},get children(){return l(jt,{type:"success",get children(){var ce=g(Ca),Je=ce.firstChild,dt=Je.firstChild,St=dt.nextSibling,[ut,cn]=m(St.nextSibling);ut.nextSibling;var gn=Je.nextSibling,[hn,jr]=m(gn.nextSibling);return u(Je,(()=>{var Zr=I(()=>ue.kind==="FRIEND");return()=>Zr()?ue.name:"[Fehler beim Laden]"})(),ut,cn),u(ce,l(je,{icon:"trash",onClick:()=>t.removeReservation(ue.kind==="FRIEND"?ue.uuid:"should not happen")}),hn,jr),ce}})}}),l(j,{get when(){return ue.kind==="FREE"},get children(){return l(N,{get when(){return s()},get fallback(){return(()=>{var ce=g(Ra),Je=ce.firstChild,[dt,St]=m(Je.nextSibling),ut=dt.nextSibling,[cn,gn]=m(ut.nextSibling);return u(ce,l(ie,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>t.addReservation({kind:"SELF",gameRound:t.entry.uuid})}),dt,St),u(ce,l(Xt,{addFriend:hn=>t.addReservation({kind:"FRIEND",gameRound:t.entry.uuid,name:hn})}),cn,gn),ce})()},get children(){return l(Xt,{addFriend:ce=>t.addReservation({kind:"FRIEND",gameRound:t.entry.uuid,name:ce})})}})}})]}})]})),d})()}function Xt(t){const[e,n]=Nn("");return(()=>{var r=g(Aa),a=r.firstChild,i=a.nextSibling,[s,o]=m(i.nextSibling);return r.addEventListener("submit",d=>{d.preventDefault();const c=e();c.trim().length>0&&t.addFriend(c)}),Xe(r,"noValidate",!0),a.$$input=d=>n(d.target.value),u(r,l(ie,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),s,o),fe(()=>Xe(a,"value",e())),nn(),r})()}tn(["input"]);var Na=f("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),Oa=f("<br>"),Ua=f("<p>Plan konnte nicht geladen werden."),Da=f("<div><!$><!/><!$><!/><h5></h5><p class=duration><em>alle Helfer:innen gefunden"),Ia=f("<div><!$><!/><!$><!/><h5></h5><p class=duration><!$><!/> <!$><!/> gesucht"),La=f("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),Pa=f("<div class=count>"),Ma=f("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),Fa=f('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),ja=f('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function Za(t){const[e,n]=z(t.store);return[(()=>{var r=g(Na),a=r.firstChild,i=a.nextSibling,[s,o]=m(i.nextSibling);return s.nextSibling,u(r,l(be,{icon:"hand-heart"}),s,o),r})(),g(Oa),l(Lt,{get fallback(){return l(M,{get children(){return C.loading.program}})},get children(){return l(N,{get when(){return t.help()},get fallback(){return l(M,{type:"danger",get children(){return C.error.help}})},children:r=>l(N,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(M,{type:"danger",get children(){return g(Ua)}})},get children(){return l(Ha,{get uuid(){return t.uuid},get helpReservations(){return e.helping},get externalHelpReservations(){return r().data},get isEditable(){return t.isEditable},get changePage(){return t.changePage},addReservation:a=>n("helping",e.helping.length,{...a,uuid:crypto.randomUUID()}),removeReservation:a=>{n("helping",e.helping.filter(i=>i.uuid!==a))}})}})})}})]}function Ha(t){const[e,n]=z(Me(t.uuid!==null));Tn(()=>{n("open",t.uuid!==null)});const r=()=>vr(t.uuid),a=()=>{const s=[];return t.helpReservations.forEach(o=>{s.push(o.helpEntryUuid)}),t.externalHelpReservations.forEach(o=>{s.push(o)}),s},i=()=>({SATURDAY:tr({constants:Qt.SATURDAY,alreadyReservedUuids:a(),myReservations:t.helpReservations,changePage:t.changePage}),SUNDAY:tr({constants:Qt.SUNDAY,alreadyReservedUuids:a(),myReservations:t.helpReservations,changePage:t.changePage})});return[l(N,{get when(){return r()},children:s=>l(He,{store:e,get title(){return Ut[s().entry.kind].title},onClose:()=>t.changePage({kind:"HELPING"},{disableScroll:!0}),size:"large",get children(){return l(za,{get entry(){return s()},get helpReservations(){return t.helpReservations},get externalHelpReservations(){return t.externalHelpReservations},get isEditable(){return t.isEditable},get addReservation(){return t.addReservation},get removeReservation(){return t.removeReservation}})}})}),l($r,{get programEntries(){return i()},conflictsAllowed:!0})]}function tr(t){const e=[],n=Ba(t.alreadyReservedUuids);return Object.entries(t.constants).forEach(([r,a])=>{a.forEach(i=>{const s={from:Number(r),to:Number(r)+1},o=()=>i.count-(n[i.uuid]??0),d=()=>t.myReservations.filter(h=>h.helpEntryUuid===i.uuid).length>0,c=()=>{const h=["box-simple","timeview-entry"];return d()&&h.push("success"),h.join(" ")};o()===0?e.push({range:s,component:()=>(()=>{var h=g(Da),v=h.firstChild,[_,$]=m(v.nextSibling),w=_.nextSibling,[x,T]=m(w.nextSibling),U=x.nextSibling;return u(h,l(Jt,{title:"Helfer:innen gesucht",get inverted(){return d()},size:"small",children:"HL"}),_,$),u(h,l(N,{get when(){return d()},get children(){return l(je,{icon:"hand-heart",kind:"ghost",onClick:()=>t.changePage({kind:"HELPING-SLOT",uuid:i.uuid},{disableScroll:!0}),title:"Helfen"})}}),x,T),u(U,()=>Ut[i.kind].title),fe(()=>Ne(h,c())),h})()}):e.push({range:s,component:()=>(()=>{var h=g(Ia),v=h.firstChild,[_,$]=m(v.nextSibling),w=_.nextSibling,[x,T]=m(w.nextSibling),U=x.nextSibling,H=U.nextSibling,G=H.firstChild,[V,q]=m(G.nextSibling),ae=V.nextSibling,Z=ae.nextSibling,[X,ee]=m(Z.nextSibling);return X.nextSibling,u(h,l(Jt,{title:"Helfer:innen gesucht",get inverted(){return d()},size:"small",children:"HL"}),_,$),u(h,l(je,{icon:"hand-heart",kind:"ghost",onClick:()=>t.changePage({kind:"HELPING-SLOT",uuid:i.uuid},{disableScroll:!0}),title:"Helfen"}),x,T),u(U,()=>Ut[i.kind].title),u(H,o,V,q),u(H,()=>o()===1?"Helfer:in":"Helfer:innen",X,ee),fe(()=>Ne(h,c())),h})()})})}),e}function za(t){const{dateTime:e,entry:n}=t.entry,r=Ut[n.kind],a=()=>t.helpReservations.filter(d=>d.helpEntryUuid===n.uuid),i=t.externalHelpReservations.filter(d=>d===n.uuid).length,s=()=>In(n.count).map(d=>{const c=a()[d];return c!==void 0?c:n.count-i<=d?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),o=()=>a().find(d=>d.kind==="SELF")!==void 0;return(()=>{var d=g(La),c=d.firstChild,h=c.firstChild,v=h.firstChild,_=v.nextSibling,$=_.nextSibling,w=$.nextSibling,[x,T]=m(w.nextSibling),U=x.nextSibling,H=U.nextSibling,[G,V]=m(H.nextSibling),q=G.nextSibling,ae=q.nextSibling,[Z,X]=m(ae.nextSibling);Z.nextSibling;var ee=h.nextSibling,se=ee.firstChild,te=se.nextSibling,le=te.nextSibling,ne=le.nextSibling,[$e,Se]=m(ne.nextSibling),J=c.nextSibling,_e=J.firstChild,oe=_e.nextSibling;return u(h,()=>C.days[e.day],x,T),u(h,()=>e.from,G,V),u(h,()=>e.to,Z,X),u(ee,()=>r.description,$e,Se),u(oe,l(ge,{get each(){return s()},children:(B,ye)=>[(()=>{var D=g(Pa);return u(D,()=>ye()+1),D})(),l(Oe,{get children(){return[l(j,{get when(){return B.kind==="RESERVED_OTHER"},get children(){return l(M,{children:"Bereits reserviert"})}}),l(j,{get when(){return!t.isEditable},get children(){return l(M,{children:"Freier Platz"})}}),l(j,{get when(){return B.kind==="SELF"},get children(){return l(jt,{type:"success",get children(){var D=g(Ma),W=D.firstChild,re=W.nextSibling,[de,K]=m(re.nextSibling);return u(D,l(je,{icon:"trash",onClick:()=>t.removeReservation(B.kind==="SELF"?B.uuid:"should not happen")}),de,K),D}})}}),l(j,{get when(){return B.kind==="FRIEND"},get children(){return l(jt,{type:"success",get children(){var D=g(Fa),W=D.firstChild,re=W.firstChild,de=re.nextSibling,[K,ve]=m(de.nextSibling);K.nextSibling;var xe=W.nextSibling,[Re,Ue]=m(xe.nextSibling);return u(W,(()=>{var Ee=I(()=>B.kind==="FRIEND");return()=>Ee()?B.name:"[Fehler beim Laden]"})(),K,ve),u(D,l(je,{icon:"trash",onClick:()=>t.removeReservation(B.kind==="FRIEND"?B.uuid:"should not happen")}),Re,Ue),D}})}}),l(j,{get when(){return B.kind==="FREE"},get children(){return l(N,{get when(){return o()},get fallback(){return(()=>{var D=g(ja),W=D.firstChild,[re,de]=m(W.nextSibling),K=re.nextSibling,[ve,xe]=m(K.nextSibling);return u(D,l(ie,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>t.addReservation({kind:"SELF",helpEntryUuid:n.uuid})}),re,de),u(D,l(Xt,{addFriend:Re=>t.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:Re})}),ve,xe),D})()},get children(){return l(Xt,{addFriend:D=>t.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:D})})}})}})]}})]})),d})()}function Ba(t){const e=Object.groupBy(t,r=>r),n={};for(const r of t)n[r]=e[r]?.length??0;return n}var Ga=f("<div class=grid><!$><!/><div>"),Ya=f("<div class=boxLink>");function Rt(t){const e=t.type??"special";return(()=>{var n=g(Ya);return u(n,l(M,{type:e,get onClick(){return t.onClick},get children(){var r=g(Ga),a=r.firstChild,[i,s]=m(a.nextSibling),o=i.nextSibling;return u(r,l(be,{get icon(){return t.icon}}),i,s),u(o,()=>t.children),r}})),n})()}const Ln=rn(["SATURDAY","SUNDAY"]),Sr=E({uuid:S().uuid(),day:Ln,from:pe(),to:pe()}).refine(t=>t.from<t.to,{message:"A TimeSlot can't end before it starts."});E({name:S(),label:S(),description:S()});const an=rn(["draft","published","archived"]),Va=E({uuid:S().uuid(),kind:an,title:S(),system:S(),description:E({short:S(),long:S()}),slots:he(Sr),playerCount:E({min:pe().min(1),max:pe()}).transform(t=>{const[e,n]=Gr([t.min,t.max]);return{min:e,max:n}}),tagNames:he(S())}),yr=E({uuid:S().uuid(),kind:an,title:Pt,system:Pt,description:E({short:Pt,long:Pt}),slots:he(Sr),playerCount:E({min:qn,max:qn}),tagNames:he(S())});function Wa(){const t={uuid:crypto.randomUUID(),kind:"draft",title:"",system:"",description:{short:"",long:""},slots:[],playerCount:{min:2,max:4},tagNames:["deutsch"]},e=Ka(t);if(e.success)return e.data;throw console.error(e),Error("should not happen")}function Ka(t){return yr.safeParse(t)}function qa(t){return{...t,title:t.title.value,system:t.system.value,description:{short:t.description.short.value,long:t.description.long.value},playerCount:{min:t.playerCount.min.value,max:t.playerCount.max.value}}}const sn=200,kr=500,xr=200;function Ja(t){const e=t.title.value.trim().length===0,n=t.description.short.value.trim().length===0,r=t.description.short.value.length>sn,a=t.description.long.value.length>kr,i=t.slots.length===0;return{titleMissing:e,descriptionShortMissing:n,descriptionShortTooLong:r,descriptionLongTooLong:a,slotMissing:i,hasErrors:e||n||r||a||i}}function Qa(t){const e=t.updateText.value.trim().length===0,n=t.updateText.value.length>xr;return{missing:e,tooLong:n,hasErrors:e||n}}var Xa=f("<label class=input-checkbox><input type=checkbox><div><!$><!/><!$><!/>"),es=f("<div class=checkbox-description>");function Pn(t){return(()=>{var e=g(Xa),n=e.firstChild,r=n.nextSibling,a=r.firstChild,[i,s]=m(a.nextSibling),o=i.nextSibling,[d,c]=m(o.nextSibling);return n.addEventListener("change",h=>t.onValueUpdate(h.target.checked)),u(r,()=>t.label,i,s),u(r,l(N,{get when(){return t.description},children:h=>(()=>{var v=g(es);return u(v,h),v})()}),d,c),fe(h=>{var v=t.name,_=t.disabled===!0;return v!==h.e&&Tt(n,"name",h.e=v),_!==h.t&&Xe(n,"disabled",h.t=_),h},{e:void 0,t:void 0}),fe(()=>Xe(n,"value",t.value)),fe(()=>Xe(n,"checked",t.checked)),e})()}var ts=f("<h3>"),ns=f("<br>"),rs=f("<div style=margin-top:2rem><h3 style=margin-bottom:1rem></h3><ul class=event-list role=list>"),is=f('<li><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Status:</strong><!$><!/></div><div class=event-tags><strong>System:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><!$><!/></div><div class=event-tags><strong>Spielende:</strong> <!$><!/> - <!$><!/></div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li><button class=event-link><span>Bearbeiten'),kt=f("<em>"),as=f("<span><!$><!/>, <!$><!/> - <!$><!/> Uhr");function ss(t){const[e,n]=z(t.store);function r(){const i=Wa();n("games",e.games.length,i),t.changePage({kind:"EDIT_GAMEROUND",uuid:i.uuid})}const a=()=>t.store.games.flatMap(i=>i.slots.length===0?[{slot:null,game:i}]:i.slots.map(o=>({slot:o,game:i}))).toSorted((i,s)=>ea(i.slot,s.slot));return[l(N,{get when(){return t.isEditable},get children(){return l(Rt,{icon:"grid-2-plus",type:"success",onClick:r,get children(){var i=g(ts);return u(i,()=>C.createNewGameRound),i}})}}),g(ns),l(Pn,{label:"Ich habe wenig bis keine Spielleitung-Erfahrung und möchte gerne in der Vorbereitung und/oder während der Spielrunde unterstützt werden.",get checked(){return e.wantsHelp},name:"wantsHelp",value:"wantsHelp",onValueUpdate:i=>{n("wantsHelp",i)},get disabled(){return!t.isEditable}}),l(N,{get when(){return a()},children:i=>(()=>{var s=g(rs),o=s.firstChild,d=o.nextSibling;return u(o,()=>C.myGameRounds),u(d,l(ge,{get each(){return i().filter(({game:c})=>c.kind!=="archived")},children:({game:c,slot:h})=>{const v=pt.filter(_=>c.tagNames.includes(_.name)).map(({label:_})=>_);return l(ls,{game:c,slot:h,tags:v,get changePage(){return t.changePage}})}})),s})()})]}function ls(t){const{game:e,slot:n,tags:r,changePage:a}=t;return(()=>{var i=g(is),s=i.firstChild,o=s.nextSibling,d=o.firstChild,c=d.firstChild,h=c.nextSibling,[v,_]=m(h.nextSibling),$=d.nextSibling,w=$.firstChild,x=w.nextSibling,[T,U]=m(x.nextSibling),H=$.nextSibling,G=H.firstChild,V=G.nextSibling,[q,ae]=m(V.nextSibling),Z=H.nextSibling,X=Z.firstChild,ee=X.nextSibling,se=ee.nextSibling,[te,le]=m(se.nextSibling),ne=te.nextSibling,$e=ne.nextSibling,[Se,J]=m($e.nextSibling),_e=Z.nextSibling,oe=_e.nextSibling,B=oe.firstChild,ye=B.nextSibling,D=ye.nextSibling,[W,re]=m(D.nextSibling),de=o.nextSibling,K=de.firstChild,ve=K.firstChild,xe=ve.nextSibling,Re=xe.nextSibling,[Ue,Ee]=m(Re.nextSibling),ze=de.nextSibling,De=ze.firstChild,Ke=De.firstChild;return u(s,(()=>{var Y=I(()=>e.title.value.length>0);return()=>Y()?e.title.value:(()=>{var Ae=g(kt);return u(Ae,()=>C.missingTitle),Ae})()})()),u(d,()=>C.publishingSteps[e.kind],v,_),u($,()=>e.system.value||(()=>{var Y=g(kt);return u(Y,()=>C.missingSystem),Y})(),T,U),u(H,n!==null?(()=>{var Y=g(as),Ae=Y.firstChild,[ot,$t]=m(Ae.nextSibling),qe=ot.nextSibling,vt=qe.nextSibling,[Be,ln]=m(vt.nextSibling),on=Be.nextSibling,dn=on.nextSibling,[bt,un]=m(dn.nextSibling);return bt.nextSibling,u(Y,()=>C.days[n.day],ot,$t),u(Y,()=>n.from,Be,ln),u(Y,()=>n.to,bt,un),Y})():(()=>{var Y=g(kt);return u(Y,()=>C.missingSlot),Y})(),q,ae),u(Z,()=>e.playerCount.min.value,te,le),u(Z,()=>e.playerCount.max.value,Se,J),u(oe,()=>r.join(", ")||(()=>{var Y=g(kt);return u(Y,()=>C.missingTags),Y})(),W,re),u(K,(()=>{var Y=I(()=>e.description.short.value.length===0);return()=>Y()?(()=>{var Ae=g(kt);return u(Ae,()=>C.missingShortDescription),Ae})():ur(e.description.short.value,sn)})(),Ue,Ee),Ke.$$click=()=>a({kind:"EDIT_GAMEROUND",uuid:e.uuid}),fe(()=>Ne(i,["event-entry",e.kind==="draft"?"gray":""].join(" "))),nn(),i})()}tn(["click"]);const os="2024-08-15T07:45:21.335Z",Pe={game:"37831e19-29d6-40bd-b99d-fb91b78aa7f9",slot:"bfcbd156-b703-4664-9944-8936aede8476",slot2:"f58e7242-e1ff-4cfc-a992-ca18dd5207c3",program:"16f387ab-0adf-406b-ba5c-2e4eb200fda8",program2:"11b6b38a-a4d3-40ed-9d4a-d2abcab661a5",program3:"5294bc63-4857-404e-b72d-53ecbd87a27b",program4:"6e9477f1-6dd5-4cd7-b3c3-03085022d967"};function ds(t,e){const n=localStorage.getItem(t);return n===null?e:n}function us(t,e){localStorage.setItem(t,e)}const Er="SAVE",cs={version:1,init:{name:"John Doe",email:"john@doe.ch",mobile:"+41 66 123 45 67"},lastSaved:os,playing:{wantsUpdates:!1,reservations:[]},master:{games:[{uuid:Pe.game,kind:"published",title:"Grolle in der Dunkelheit",system:"Warhammer Fantasy Rollenspiel",description:{short:"Ein kurzes Abenteuer bei dem es um Fantasy, Action und einfaches Rollenspiel geht.",long:"Eine kleine Gruppe wagt sich in die dunklen Schächten einer Mine und weiter hinab, um einen mächtigen Gegenstand wieder zu erlangen. Wie werden die Gefährten auf die Gefahren des Untergrundes reagieren und welche Gefahren lauern in der Finsternis?"},slots:[{uuid:Pe.slot,day:"SATURDAY",from:10,to:12},{uuid:Pe.slot2,day:"SUNDAY",from:14,to:17}],playerCount:{min:1,max:3},tagNames:["deutsch"]}],wantsHelp:!1},helping:[],publishState:"published"};async function gs(){return new Promise(t=>setTimeout(()=>t({kind:"SUCCESS",data:JSON.parse(ds(Er,JSON.stringify(cs)))}),1e3))}async function hs(t,e){return new Promise(n=>setTimeout(()=>(us(Er,JSON.stringify(t)),n({kind:"SUCCESS",data:e})),1e3))}const ms=[{uuid:Pe.program,gamemaster:"Game Master",title:"Grolle in der Dunkelheit",system:"Warhammer Fantasy Rollenspiel",description:{short:"Ein kurzes Abenteuer bei dem es um Fantasy, Action und einfaches Rollenspiel geht.",long:"Eine kleine Gruppe wagt sich in die dunklen Schächten einer Mine und weiter hinab, um einen mächtigen Gegenstand wieder zu erlangen. Wie werden die Gefährten auf die Gefahren des Untergrundes reagieren und welche Gefahren lauern in der Finsternis?"},slot:{day:"SATURDAY",from:10,to:13},playerCount:{min:1,max:3,reserved:0},tags:["ab12jahren"]},{uuid:Pe.program2,gamemaster:"Other Game Master",title:"Acrimony",system:"D&D",description:{short:"Ein Lo-Fi Space Western Abenteuer",long:'Ein Lo-Fi Space Western Abenteuer: "Eine frisch formierte Gruppe von Kopfgeldjägern wird mit einer riskanten Mission betraut: Sie müssen den berüchtigten Outlaw Jeb "Rusty" Rourke in der abgeschiedenen Grenzstadt aufspüren. Bei dieser unbarmherzigen Jagd lernen die Spieler die harte Realität der Kopfgeldjagd kennen, wo jeder Schuss und jede Entscheidung über ihr Schicksal entscheidet.'},slot:{day:"SATURDAY",from:10,to:13},playerCount:{min:2,max:8,reserved:3},tags:["ab12jahren","horror"]},{uuid:Pe.program3,gamemaster:"Other Game Master",title:"Acrimony",system:"D&D",description:{short:"Ein Lo-Fi Space Western Abenteuer",long:'Ein Lo-Fi Space Western Abenteuer: "Eine frisch formierte Gruppe von Kopfgeldjägern wird mit einer riskanten Mission betraut: Sie müssen den berüchtigten Outlaw Jeb "Rusty" Rourke in der abgeschiedenen Grenzstadt aufspüren. Bei dieser unbarmherzigen Jagd lernen die Spieler die harte Realität der Kopfgeldjagd kennen, wo jeder Schuss und jede Entscheidung über ihr Schicksal entscheidet.'},slot:{day:"SATURDAY",from:14,to:18},playerCount:{min:2,max:8,reserved:3},tags:["ab12jahren","horror"]},{uuid:Pe.program4,gamemaster:"Some Other Game Master",title:"Solo RPGs",system:"",description:{short:"Wir spielen primär das Solo Rollenspiel NoteQuest, werden aber kurz auch noch ein paar andere Solo Rollenspiele miteinander anschauen.",long:""},slot:{day:"SATURDAY",from:14,to:18},playerCount:{min:2,max:4,reserved:3},tags:[]}];async function fs(){return new Promise(t=>setTimeout(()=>t({kind:"SUCCESS",data:ms}),5e3))}const _s=[{uuid:Pe.slot,name:"Alice"},{uuid:Pe.slot,name:"Bob"}];async function ps(t){return new Promise(e=>setTimeout(()=>e({kind:"SUCCESS",data:_s.filter(n=>t.includes(n.uuid))}),5e3))}const $s={version:1,init:{name:"",email:"",mobile:""},lastSaved:new Date().toISOString(),playing:{wantsUpdates:!0,reservations:[]},master:{games:[],wantsHelp:!1},helping:[],publishState:"draft"};async function vs(t){const e=new URL(lt("/rst25/load"));e.searchParams.append("secret",t);const n=await fetch(e);if(!n.ok)return{kind:"FAILURE"};const r=await n.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:Object.assign($s,r)}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function bs(t,e){try{const n=await fetch(lt("/rst25/save"),{method:"post",body:JSON.stringify({secret:e,save:t}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:e}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function Ss(t){try{const e=new URL(lt("/rst25/program"));t!==void 0&&e.searchParams.append("secret",t);const n=await fetch(e,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}async function ys(t){try{const e=new URL(lt("/rst25/reservations"));e.searchParams.append("secret",t);const n=await fetch(e);return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}async function ks(t){try{const e=await fetch(lt("/rst25/publishGameround"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});return e.ok?{kind:"SUCCESS",data:t.gameroundUuid}:(console.error(await e.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}async function xs(t){try{const e=await fetch(lt("/rst25/sendGameroundUpdate"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});return e.ok?{kind:"SUCCESS",data:t.gameroundUuid}:(console.error(await e.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}async function Es(t){try{const e=new URL(lt("/rst25/help"));e.searchParams.append("secret",t);const n=await fetch(e,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(e){return console.error(e),{kind:"FAILURE"}}}const ws=E({uuid:S().uuid(),title:S(),system:S(),gamemaster:S(),description:E({short:S(),long:S()}),slot:E({day:Ln,from:pe(),to:pe()}),playerCount:E({min:pe(),max:pe(),reserved:pe()}),tags:he(S())}),Cs=he(ws),Rs=E({uuid:S().uuid(),title:S(),system:S(),gamemaster:S(),description:E({short:S(),long:S()}),slot:E({day:Ln,from:pe(),to:pe()}),playerCount:E({min:pe(),max:pe(),reserved:pe()}),tags:he(S())}),As=he(Rs);async function Ts(t){const e=t==="demo"?await fs():await Ss(t);if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Cs.safeParse(e.data);if(!n.success)return{kind:"FAILURE"};const r=Ns(n.data);return r.success?{kind:"SUCCESS",data:r.data}:{kind:"FAILURE"}}function Ns(t){return As.safeParse(t)}function Os(t){const e=Object.groupBy(t,n=>n.slot.day);return{SATURDAY:e.SATURDAY??[],SUNDAY:e.SUNDAY??[]}}function Us(t){function e(s,o){const{from:d,to:c}=s.slot,{from:h,to:v}=o.slot;return d===h?c-v:d-h}const n=t.SATURDAY.toSorted(e),r=t.SUNDAY.toSorted(e),a=Ot(st.SATURDAY.open).reduce((s,o)=>(s[o]=n.filter(d=>d.slot.from===o),s),{}),i=Ot(st.SUNDAY.open).reduce((s,o)=>(s[o]=r.filter(d=>d.slot.from===o),s),{});return{SATURDAY:a,SUNDAY:i}}var Ds=f("<div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><h5 style=margin:0>Filter</h5><!$><!/>"),Is=f("<h6 style=margin-block:0.5rem>Tage"),Ls=f("<div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/>"),Ps=f("<h6 style=margin-block:0.5rem>Kategorien <span>"),Ms=f("<div style=display:flex;flex-wrap:wrap;gap:0.5rem>");const we={day:"fDay",tags:"fTags",options:"fOpts"};function Fs(){const t=new URL(location.href),e=t.searchParams.get(we.day),n=e==="SATURDAY"||e==="SUNDAY"?e:null,r=t.searchParams.getAll(we.tags),a=t.searchParams.getAll(we.options);return{day:n,tags:r,withOpenSeats:a.includes("withOpenSeats"),iHaveTime:a.includes("iHaveTime")}}function js(t,e){return{toggleDay:n=>{const r=t.day===n,a=new URL(location.href);r?(a.searchParams.delete(we.day),e("day",null)):(a.searchParams.set(we.day,n),e("day",n)),history.pushState(wt(t),"",a)},toggleTag:n=>{const r=t.tags.includes(n),a=new URL(location.href);r?(a.searchParams.delete(we.tags),e("tags",t.tags.filter(i=>i!==n)),t.tags.forEach(i=>{a.searchParams.append(we.tags,i)})):(a.searchParams.append(we.tags,n),e("tags",t.tags.length,n)),history.pushState(wt(t),"",a)},toggleOption:n=>{const r=t[n],a=new URL(location.href);e(n,!r),["withOpenSeats","iHaveTime"].forEach(i=>{t[i]&&a.searchParams.append(we.options,i)}),history.pushState(wt(t),"",a)},reset:()=>{e({day:null,tags:[],withOpenSeats:!1,iHaveTime:!1});const n=new URL(location.href);n.searchParams.delete(we.day),n.searchParams.delete(we.tags),n.searchParams.delete(we.options),history.pushState(wt(t),"",n)}}}function Zs(t){const[e,n]=z(t.activeFilter),r=js(e,n);return l(M,{get children(){return[(()=>{var a=g(Ds),i=a.firstChild,s=i.nextSibling,[o,d]=m(s.nextSibling);return u(a,l(ie,{label:"Filter zurücksetzen",icon:"circle-xmark",kind:"ghost-danger",onClick:()=>r.reset()}),o,d),a})(),g(Is),(()=>{var a=g(Ls),i=a.firstChild,[s,o]=m(i.nextSibling),d=s.nextSibling,[c,h]=m(d.nextSibling);return u(a,l(me,{label:"Samstag",get kind(){return e.day!=="SUNDAY"?"success":"gray"},onClick:()=>r.toggleDay("SATURDAY")}),s,o),u(a,l(me,{label:"Sonntag",get kind(){return e.day!=="SATURDAY"?"success":"gray"},onClick:()=>r.toggleDay("SUNDAY")}),c,h),a})(),(()=>{var a=g(Ps),i=a.firstChild,s=i.nextSibling;return u(s,l(je,{icon:"circle-question",kind:"ghost",title:"Erklärungen der Kategorien",get onClick(){return t.showExplanationOfCategories}})),a})(),(()=>{var a=g(Ms);return u(a,l(ge,{each:pt,children:i=>l(me,{get label(){return i.label},get kind(){return e.tags.length===0||e.tags.includes(i.name)?"success":"gray"},onClick:()=>r.toggleTag(i.name)})})),a})()]}})}function Hs(t,e){return t.filter(n=>!(e.day!==n.slot.day&&e.day!==null||!zs(n.tags,e.tags)))}function zs(t,e){return e.length===0?!0:e.filter(r=>!t.includes(r)).length===0}var gt=f("<br>"),Bs=f("<ul style=padding:0;padding-block-start:1rem;margin:0;max-inline-size:100%;display:grid;gap:0.5rem>"),Gs=f("<li><strong></strong><br><p>"),Ys=f("<p>Programm konnte nicht geladen werden."),Vs=f("<em><!$><!/> von <!$><!/> Runden gefunden."),Ws=f("<h3>"),Ks=f("<h4 style=margin-block-start:2rem;margin-block-end:1rem>Start: <!$><!/> Uhr"),qs=f('<ul class="event-list max"role=list>'),Js=f("<small><!$><!/> - <!$><!/> Uhr"),Qs=f("<h4 style=margin-block-end:0.5rem>"),Xs=f("<em>Das Menü wird zu einem späteren Zeitpunkt kommuniziert."),el=f("<div style=margin-block-start:2rem>"),tl=f('<li><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Spielleitung:</strong><!$><!/></div><div class=event-tags><strong>System:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><span><!$><!/>, <!$><!/> - <!$><!/> Uhr</span></div><div class=event-tags><strong>Freie Plätze:</strong> <!$><!/> (von <!$><!/>)</div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li><button class=event-link><span>Details & Teilnahme'),nl=f("<em>kein System angegeben"),rl=f("<em>keine Kategorien");function il(t){const[e,n]=z({playing:t.store,activeFilter:Fs(),categoryDialog:Me()});return[l(Pn,{label:"Schickt mir bitte E-Mails, wenn neue Spielrunden veröffentlicht werden.",get checked(){return e.playing.wantsUpdates},name:"wantsUpdates",value:"wantsUpdates",onValueUpdate:r=>{n("playing","wantsUpdates",r)}}),g(gt),l(Zs,{get activeFilter(){return e.activeFilter},showExplanationOfCategories:()=>n("categoryDialog","open",!0)}),l(He,{get store(){return e.categoryDialog},title:"Erklärungen der Kategorien",onClose:()=>{},size:"medium",get children(){var r=g(Bs);return u(r,()=>pt.map(a=>(()=>{var i=g(Gs),s=i.firstChild,o=s.nextSibling,d=o.nextSibling;return u(s,()=>a.label),u(d,()=>a.description),i})())),r}}),g(gt),l(Lt,{get fallback(){return l(M,{get children(){return C.loading.program}})},get children(){return l(N,{get when(){return t.program()},get fallback(){return l(M,{type:"danger",get children(){return C.error.program}})},children:r=>l(N,{get when(){return r().kind==="SUCCESS"},get fallback(){return l(M,{type:"danger",get children(){return g(Ys)}})},get children(){return l(al,{get program(){return r().data},get filter(){return e.activeFilter},get reservations(){return e.playing.reservations},get isEditable(){return t.isEditable},addReservation:a=>n("playing","reservations",e.playing.reservations.length,{...a,uuid:crypto.randomUUID()}),removeReservation:a=>{n("playing","reservations",e.playing.reservations.filter(i=>i.uuid!==a))},get uuid(){return t.uuid},get changePage(){return t.changePage}})}})})}})]}function al(t){const[e,n]=z(Me(t.uuid!==null));Tn(()=>{n("open",t.uuid!==null)});const r=()=>t.program.find(s=>s.uuid===t.uuid),a=()=>Hs(t.program,t.filter),i=()=>Us(Os(a()));return[(()=>{var s=g(Vs),o=s.firstChild,[d,c]=m(o.nextSibling),h=d.nextSibling,v=h.nextSibling,[_,$]=m(v.nextSibling);return _.nextSibling,u(s,()=>a().length,d,c),u(s,()=>t.program.length,_,$),s})(),g(gt),l(N,{get when(){return r()},children:s=>l(He,{store:e,get title(){return s().title},onClose:()=>t.changePage({kind:"PLAYER"},{disableScroll:!0}),size:"large",get children(){return l(Ta,{get entry(){return s()},get reservations(){return t.reservations},get isEditable(){return t.isEditable},get addReservation(){return t.addReservation},get removeReservation(){return t.removeReservation}})}})}),g(gt),l(nr,{day:"SATURDAY",get programOfDay(){return i().SATURDAY},get changePage(){return t.changePage}}),g(gt),g(gt),l(nr,{day:"SUNDAY",get programOfDay(){return i().SUNDAY},get changePage(){return t.changePage}})]}function nr(t){const e=()=>Object.values(t.programOfDay).flat().length>0,r=st[t.day].breaks.map(i=>i.from),a=i=>r.indexOf(i)===0?"LUNCH":"DINNER";return[(()=>{var i=g(Ws);return u(i,()=>C.days[t.day]),i})(),l(N,{get when(){return e()},get fallback(){return l(M,{get children(){return["Keine Spielrunden mit den ausgewählten Filtern am"," ",I(()=>C.days[t.day])," gefunden."]}})},get children(){return l(ge,{get each(){return Object.entries(t.programOfDay)},children:([i,s])=>r.includes(Number(i))?l(sl,{get type(){return a(Number(i))},get range(){return{from:Number(i),to:Number(i)+1}}}):s.length===0?null:[(()=>{var o=g(Ks),d=o.firstChild,c=d.nextSibling,[h,v]=m(c.nextSibling);return h.nextSibling,u(o,i,h,v),o})(),(()=>{var o=g(qs);return u(o,l(ge,{each:s,children:d=>l(ll,{entry:d,get changePage(){return t.changePage}})})),o})()]})}})]}function sl(t){const e=t.type==="LUNCH"?"Mittagessen":"Nachtessen";return(()=>{var n=g(el);return u(n,l(M,{get children(){return[(()=>{var r=g(Js),a=r.firstChild,[i,s]=m(a.nextSibling),o=i.nextSibling,d=o.nextSibling,[c,h]=m(d.nextSibling);return c.nextSibling,u(r,()=>t.range.from,i,s),u(r,()=>t.range.to,c,h),r})(),(()=>{var r=g(Qs);return u(r,e),r})(),g(Xs)]}})),n})()}function ll(t){const e=pt.filter(n=>t.entry.tags.includes(n.name)).map(({label:n})=>n);return(()=>{var n=g(tl),r=n.firstChild,a=r.nextSibling,i=a.firstChild,s=i.firstChild,o=s.nextSibling,[d,c]=m(o.nextSibling),h=i.nextSibling,v=h.firstChild,_=v.nextSibling,[$,w]=m(_.nextSibling),x=h.nextSibling,T=x.firstChild,U=T.nextSibling,H=U.firstChild,[G,V]=m(H.nextSibling),q=G.nextSibling,ae=q.nextSibling,[Z,X]=m(ae.nextSibling),ee=Z.nextSibling,se=ee.nextSibling,[te,le]=m(se.nextSibling);te.nextSibling;var ne=x.nextSibling,$e=ne.firstChild,Se=$e.nextSibling,J=Se.nextSibling,[_e,oe]=m(J.nextSibling),B=_e.nextSibling,ye=B.nextSibling,[D,W]=m(ye.nextSibling);D.nextSibling;var re=ne.nextSibling,de=re.nextSibling,K=de.firstChild,ve=K.nextSibling,xe=ve.nextSibling,[Re,Ue]=m(xe.nextSibling),Ee=a.nextSibling,ze=Ee.firstChild,De=ze.firstChild,Ke=De.nextSibling,Y=Ke.nextSibling,[Ae,ot]=m(Y.nextSibling),$t=Ee.nextSibling,qe=$t.firstChild,vt=qe.firstChild;return u(r,()=>t.entry.title),u(i,()=>t.entry.gamemaster,d,c),u(h,(()=>{var Be=I(()=>t.entry.system.trim().length>0);return()=>Be()?t.entry.system:g(nl)})(),$,w),u(U,()=>C.days[t.entry.slot.day],G,V),u(U,()=>t.entry.slot.from,Z,X),u(U,()=>t.entry.slot.to,te,le),u(ne,()=>Math.max(t.entry.playerCount.max-1-t.entry.playerCount.reserved,0),_e,oe),u(ne,()=>t.entry.playerCount.max,D,W),u(de,(()=>{var Be=I(()=>e.length>0);return()=>Be()?e.join(", "):g(rl)})(),Re,Ue),u(ze,()=>ur(t.entry.description.short,sn),Ae,ot),vt.$$click=()=>t.changePage({kind:"GAME",uuid:t.entry.uuid},{disableScroll:!0}),fe(()=>Ne(n,["event-entry"].join(" "))),nn(),n})()}tn(["click"]);var ol=f("<h3>Spielrunden ansehen"),dl=f("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),bn=f("<br>"),ul=f("<h3>Spielrunden erstellen"),cl=f("<p>Falls du wenig oder gar keine Erfahrung als Spielleiter:in hast, werden wir dich vor und während dem Anlass unterstützen."),gl=f("<h3>Helfen"),hl=f("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),ml=f("<h3>Zusammenfassung"),fl=f("<p>Erhalte einen Überblick über dein gesamtes Programm.");function _l(t){return[l(Rt,{icon:"dice-d20",onClick:()=>t.changePage({kind:"PLAYER"}),get children(){return[g(ol),g(dl)]}}),g(bn),l(Rt,{icon:"grid-2-plus",onClick:()=>t.changePage({kind:"GAMEMASTER"}),get children(){return[g(ul),g(cl)]}}),g(bn),l(Rt,{icon:"hand-heart",onClick:()=>t.changePage({kind:"HELPING"}),get children(){return[g(gl),g(hl)]}}),g(bn),l(Rt,{icon:"list",onClick:()=>t.changePage({kind:"SUMMARY"}),get children(){return[g(ml),g(fl)]}})]}var pl=f("<fieldset><legend>Zeitslots</legend><!$><!/><!$><!/>"),rr=f("<br>"),$l=f("<div style=margin-block-end:0.5rem>Zeitslot: <!$><!/>, <!$><!/> -<!$><!/> Uhr"),vl=f("<ul class=event-list role=list>"),bl=f("<em>werden geladen..."),Sl=f("<li class=event-entry><h3 class=event-title><!$><!/>, <!$><!/> - <!$><!/> Uhr</h3><div class=event-details><div class=event-tags><strong>Dauer:</strong><!$><!/> <!$><!/></div><div class=event-tags><strong>Spielende:</strong> <!$><!/></div></div><div></div><ul role=list class=event-links>"),yl=f("<em>Fehler beim Laden."),kl=f("<em>noch keine Anmeldungen"),xl=f("<li><em style=font-size:smaller>Aktionen werden geladen..."),ir=f("<li><em style=font-size:smaller>kann nicht gelöscht werden"),El=f("<li><button type=button class=event-link><div style=display:flex;gap:0.25rem;align-items:center><!$><!/><span>Löschen"),wl=f("<div style=display:grid;gap:0.5rem>"),Cl=f("<div style=display:grid;gap:0.5rem><!$><!/><!$><!/>"),Rl=f("<div style=display:grid;gap:0.5rem><!$><!/><!$><!/><!$><!/>"),Al=f("<div style=display:grid;gap:0.5rem><!$><!/><!$><!/><!$><!/><div style=margin-block-start:1rem>"),Tl=f("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center><!$><!/> <span>Neuen Slot erfassen"),Nl=f("<em>Wähle eine Tag:"),Ol=f("<div style=display:flex;flex-wrap:wrap;gap:.5rem><!$><!/><!$><!/>"),Ul=f("<em>Wähle eine Startzeit:"),wr=f("<div style=display:flex;flex-wrap:wrap;gap:.5rem>"),Cr=f("<span style=white-space:nowrap><!$><!/> Uhr"),Dl=f("<em>Wähle eine Endzeit:");function Il(t){return(()=>{var e=g(pl),n=e.firstChild,r=n.nextSibling,[a,i]=m(r.nextSibling),s=a.nextSibling,[o,d]=m(s.nextSibling);return u(e,l(Pl,{get store(){return t.store},get registrations(){return t.registrations},get isEditable(){return t.isEditable}}),a,i),u(e,l(N,{get when(){return t.slotMissing},get children(){return l(M,{type:"danger",children:"Wähle mindestens einen Zeitslot aus."})}}),o,d),e})()}const ar=1;function Ll(t){function e(n){const r=Ot(n.open,!0);return n.breaks.map(i=>Ot(i,!0)).reduce((i,s)=>{const o=s.at(0),d=s.at(-1);if(o===void 0||d===void 0)return i;const c=[];return i.forEach(h=>{const v=[],_=[];h.forEach($=>{$<=o&&v.push($),d<=$&&_.push($)}),v.length>0&&c.push(v),_.length>0&&c.push(_)}),c},[r]).map(i=>{const s=i.slice(0,ar*-1);return Yr(s.map(o=>{const d=i.filter(c=>c>=o+ar);return[o,d]}))}).reduce((i,s)=>({...i,...s}),{})}return{SATURDAY:e(t.SATURDAY),SUNDAY:e(t.SUNDAY)}}function Pl(t){const[e,n]=z(t.store),[r,a]=z({dialog:Me()}),i=en(()=>Ll(st));function s(c){n(e.concat(c))}function o(c){a("dialog","open",!1),a("slot",void 0),n(e.filter(h=>h.uuid!==c))}function d(c){a("dialog","open",!0),a("slot",e.find(h=>h.uuid===c))}return[l(Fl,{get daySections(){return i()},chooseTimeSlot:s,get isEditable(){return t.isEditable}}),g(rr),g(rr),l(He,{get store(){return r.dialog},title:"Zeitslot löschen",onClose:()=>a("slot",void 0),get children(){return[(()=>{var c=g($l),h=c.firstChild,v=h.nextSibling,[_,$]=m(v.nextSibling),w=_.nextSibling,x=w.nextSibling,[T,U]=m(x.nextSibling),H=T.nextSibling,G=H.nextSibling,[V,q]=m(G.nextSibling);return V.nextSibling,u(c,()=>C.days[r.slot?.day],_,$),u(c,()=>r.slot?.from,T,U),u(c,()=>r.slot?.to,V,q),c})(),l(ie,{kind:"danger",icon:"trash",label:"Löschen",onClick:()=>o(r.slot?.uuid)})]}}),l(Ml,{slots:e,get registrations(){return t.registrations},confirmRemoval:d,get isEditable(){return t.isEditable}})]}function Ml(t){return(()=>{var e=g(vl);return u(e,l(ge,{get each(){return jl(t.slots)},children:n=>(()=>{var r=g(Sl),a=r.firstChild,i=a.firstChild,[s,o]=m(i.nextSibling),d=s.nextSibling,c=d.nextSibling,[h,v]=m(c.nextSibling),_=h.nextSibling,$=_.nextSibling,[w,x]=m($.nextSibling);w.nextSibling;var T=a.nextSibling,U=T.firstChild,H=U.firstChild,G=H.nextSibling,[V,q]=m(G.nextSibling),ae=V.nextSibling,Z=ae.nextSibling,[X,ee]=m(Z.nextSibling),se=U.nextSibling,te=se.firstChild,le=te.nextSibling,ne=le.nextSibling,[$e,Se]=m(ne.nextSibling),J=T.nextSibling,_e=J.nextSibling;return u(a,()=>C.days[n.day],s,o),u(a,()=>n.from,h,v),u(a,()=>n.to,w,x),u(U,()=>n.to-n.from,V,q),u(U,()=>n.to-n.from>1?"Stunden":"Stunde",X,ee),u(se,l(Oe,{get children(){return[l(j,{get when(){return t.registrations.loading},get children(){return g(bl)}}),l(j,{get when(){return t.registrations()},children:oe=>{const B=oe();if(B.kind==="FAILURE")return g(yl);const ye=B.data.filter(D=>D.uuid===n.uuid).map(D=>D.name);return I(()=>ye.join(", ")||g(kl))}})]}}),$e,Se),u(_e,l(Lt,{get fallback(){return g(xl)},get children(){return l(N,{get when(){return t.registrations()},children:oe=>{const B=oe();return B.kind==="FAILURE"?g(ir):B.data.filter(D=>D.uuid===n.uuid).map(D=>D.name).length>0?g(ir):(()=>{var D=g(El),W=D.firstChild,re=W.firstChild,de=re.firstChild,[K,ve]=m(de.nextSibling);return K.nextSibling,W.$$click=()=>t.confirmRemoval(n.uuid),u(re,l(be,{icon:"trash"}),K,ve),fe(()=>Xe(W,"disabled",!t.isEditable)),nn(),D})()}})}})),r})()})),e})()}function Fl(t){const[e,n]=z({slot:{kind:"CHOOSE_DAY"},dialog:Me()});function r(){n("slot",{kind:"CHOOSE_DAY"}),n("dialog","open",!1)}function a(i){t.chooseTimeSlot(i),r()}return[l(me,{kind:"success",get label(){return(()=>{var i=g(Tl),s=i.firstChild,[o,d]=m(s.nextSibling);return o.nextSibling,u(i,l(be,{icon:"circle-plus"}),o,d),i})()},onClick:()=>n("dialog","open",!0),get disabled(){return!t.isEditable}}),l(He,{title:"Zeitslot erfassen",get store(){return e.dialog},size:"medium",onClose:r,get children(){return l(Oe,{get children(){return[l(j,{get when(){return e.slot.kind==="CHOOSE_DAY"},get children(){var i=g(wl);return u(i,l(Ft,{changeDay:s=>n("slot",{kind:"CHOOSE_START",day:s})})),i}}),l(j,{get when(){return e.slot.kind==="CHOOSE_START"},get children(){var i=g(Cl),s=i.firstChild,[o,d]=m(s.nextSibling),c=o.nextSibling,[h,v]=m(c.nextSibling);return u(i,l(Ft,{get chosenDay(){return I(()=>e.slot.kind==="CHOOSE_START")()?e.slot.day:void 0},changeDay:_=>n("slot",{kind:"CHOOSE_START",day:_})}),o,d),u(i,l(Sn,{get startTimes(){return I(()=>e.slot.kind==="CHOOSE_START")()?fn(t.daySections[e.slot.day]):[]},changeStart:_=>n("slot",{kind:"CHOOSE_END",start:_})}),h,v),i}}),l(j,{get when(){return e.slot.kind==="CHOOSE_END"},get children(){var i=g(Rl),s=i.firstChild,[o,d]=m(s.nextSibling),c=o.nextSibling,[h,v]=m(c.nextSibling),_=h.nextSibling,[$,w]=m(_.nextSibling);return u(i,l(Ft,{get chosenDay(){return I(()=>e.slot.kind==="CHOOSE_END")()?e.slot.day:void 0},changeDay:x=>n("slot",{kind:"CHOOSE_START",day:x})}),o,d),u(i,l(Sn,{get chosenStart(){return I(()=>e.slot.kind==="CHOOSE_END")()?e.slot.start:void 0},get startTimes(){return I(()=>e.slot.kind==="CHOOSE_END")()?fn(t.daySections[e.slot.day]):[]},changeStart:x=>n("slot",{kind:"CHOOSE_END",start:x})}),h,v),u(i,l(sr,{get endTimes(){return I(()=>e.slot.kind==="CHOOSE_END")()?t.daySections[e.slot.day][e.slot.start]??[]:[]},changeEnd:x=>{e.slot.kind==="CHOOSE_END"&&n("slot",{kind:"WAIT_FOR_CONFIRMATION",day:e.slot.day,start:e.slot.start,end:x})}}),$,w),i}}),l(j,{get when(){return e.slot.kind==="WAIT_FOR_CONFIRMATION"},get children(){var i=g(Al),s=i.firstChild,[o,d]=m(s.nextSibling),c=o.nextSibling,[h,v]=m(c.nextSibling),_=h.nextSibling,[$,w]=m(_.nextSibling),x=$.nextSibling;return u(i,l(Ft,{get chosenDay(){return I(()=>e.slot.kind==="WAIT_FOR_CONFIRMATION")()?e.slot.day:void 0},changeDay:T=>n("slot",{kind:"CHOOSE_START",day:T})}),o,d),u(i,l(Sn,{get chosenStart(){return I(()=>e.slot.kind==="WAIT_FOR_CONFIRMATION")()?e.slot.start:void 0},get startTimes(){return I(()=>e.slot.kind==="WAIT_FOR_CONFIRMATION")()?fn(t.daySections[e.slot.day]):[]},changeStart:T=>n("slot",{kind:"CHOOSE_END",start:T})}),h,v),u(i,l(sr,{get chosenEnd(){return I(()=>e.slot.kind==="WAIT_FOR_CONFIRMATION")()?e.slot.end:void 0},get endTimes(){return I(()=>e.slot.kind==="WAIT_FOR_CONFIRMATION")()?t.daySections[e.slot.day][e.slot.start]??[]:[]},changeEnd:T=>{e.slot.kind==="WAIT_FOR_CONFIRMATION"&&n("slot",{kind:"WAIT_FOR_CONFIRMATION",day:e.slot.day,start:e.slot.start,end:T})}}),$,w),u(x,l(me,{get label(){return`Slot "${e.slot.kind==="WAIT_FOR_CONFIRMATION"?`${C.days[e.slot.day]}, von ${e.slot.start} bis ${e.slot.end} Uhr`:""}" erstellen`},kind:"success",onClick:()=>{e.slot.kind==="WAIT_FOR_CONFIRMATION"&&a({uuid:crypto.randomUUID(),day:e.slot.day,from:e.slot.start,to:e.slot.end})}})),i}})]}})}})]}function Ft(t){return[g(Nl),(()=>{var e=g(Ol),n=e.firstChild,[r,a]=m(n.nextSibling),i=r.nextSibling,[s,o]=m(i.nextSibling);return u(e,l(me,{get kind(){return t.chosenDay==="SATURDAY"?"success":"gray"},label:"Samstag",onClick:()=>t.changeDay("SATURDAY")}),r,a),u(e,l(me,{get kind(){return t.chosenDay==="SUNDAY"?"success":"gray"},label:"Sonntag",onClick:()=>t.changeDay("SUNDAY")}),s,o),e})()]}function Sn(t){return[g(Ul),(()=>{var e=g(wr);return u(e,l(ge,{get each(){return t.startTimes},children:n=>l(me,{get kind(){return t.chosenStart===n?"success":"gray"},get label(){return(()=>{var r=g(Cr),a=r.firstChild,[i,s]=m(a.nextSibling);return i.nextSibling,u(r,n,i,s),r})()},onClick:()=>t.changeStart(n)})})),e})()]}function sr(t){return[g(Dl),(()=>{var e=g(wr);return u(e,l(ge,{get each(){return t.endTimes},children:n=>l(me,{get kind(){return t.chosenEnd===n?"success":"gray"},get label(){return(()=>{var r=g(Cr),a=r.firstChild,[i,s]=m(a.nextSibling);return i.nextSibling,u(r,n,i,s),r})()},onClick:()=>t.changeEnd(n)})})),e})()]}function jl(t){return t.toSorted((e,n)=>e.day!==n.day?e.day==="SATURDAY"?-1:1:e.from-n.from)}tn(["click"]);function Zl(t){return async()=>{await ks(t)}}function Hl(t){return async()=>{await xs(t)}}var Dt=f("<br>"),zl=f("<div class=content><p>Möchtest du diese Spielrunde gerne veröffentlichen?</p><!$><!/>"),Bl=f("<em>Informationen zu den Anmeldungen müssen geladen werden..."),Gl=f("<em>Du kannst kein Update versenden, da sich noch niemand für diese Spielrunde angemeldet hat."),Yl=f("<p>An: <!$><!/>"),Vl=f("<em>Du kannst die Spielrunde nur löschen, wenn du zuerst alle Zeitslots entfernt hast."),Wl=f("<div class=content><p>Bist du sicher, dass du die Spielrunde löschen möchtest?</p><!$><!/>"),Kl=f('<form novalidate><!$><!/><!$><!/><!$><!/><div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/></div><!$><!/><!$><!/><!$><!/><fieldset><legend>Kategorien (optional)</legend><!$><!/></fieldset><!$><!/><div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><!$><!/><div style=display:flex;flex-wrap:wrap;gap:1rem><!$><!/><!$><!/><!$><!/>'),ql=f("<h4>Spielrunde inkomplett"),Jl=f("<p>Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde:"),Ql=f("<li>«Titel» ist ein Pflichtfeld."),Xl=f("<li>«kurz Beschreibung» ist ein Pflichtfeld."),eo=f("<li>«kurz Beschreibung» ist zu lang."),to=f("<li>«lange Beschreibung» ist zu lang."),no=f("<li>Mindest einen Zeitslot muss ausgewählt werden."),ro=f("<ul><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),io=f("<p><strong>Erklärung:</strong> Hast du eine wichtige Änderung an dieser Spielrunde durchgeführt, während bereits Spielende angemeldet waren? Lass hiermit die Angemeldeten wissen, was du geändert hast. Wichtige Änderungen können sein: System geändert, Kategorien geändert. Für kleine Änderungen, wie z.B. Rechtschreibfehler, sollte dies nicht genutzt werden."),ao=f("<p><em>Halte dich kurz und am besten Stichwortartig."),so=f("<form><!$><!/><!$><!/>"),lo=f("<div style=display:grid;gap:0.5rem;margin-block-end:1rem>");function oo(t){const e=t.allRounds.find(n=>n.uuid===t.uuid);return l(N,{get fallback(){return t.fallback},when:e,children:n=>t.children(n())})}function uo(t){const[e,n]=z(t.store),[r,a]=z({delete:Me(),publish:Me(),sendUpdate:Me()});function i(o){o.preventDefault(),a("publish","open",!0)}function s(){t.changePage({kind:"GAMEMASTER"})}return[l(Jt,{kind:"special",get children(){return["Status: ",I(()=>C.publishingSteps[e.kind])]}}),g(Dt),g(Dt),l(mo,{store:e,get registrations(){return t.registrations},onSubmit:i,onCancel:()=>a("delete","open",!0),onSendUpdate:()=>a("sendUpdate","open",!0),goBack:s,get isEditable(){return t.isEditable}}),l(co,{get store(){return r.publish},get title(){return e.title.value},onPublish:()=>{n("kind","published"),a("publish","open",!1),t.queue.enqueue(Zl({secret:t.secret,gameroundUuid:e.uuid}))}}),l(go,{get store(){return r.sendUpdate},get players(){return po(t.registrations,e.slots.map(o=>o.uuid))},onSend:o=>{t.queue.enqueue(Hl({update:o,slotUuids:e.slots.map(d=>d.uuid),gameroundUuid:e.uuid}))}}),l(ho,{get store(){return r.delete},get hasSlots(){return e.slots.length!==0},get title(){return e.title.value},onDelete:()=>{n("kind","archived"),t.changePage({kind:"GAMEMASTER"})}})]}function co(t){return l(He,{get store(){return t.store},title:"Spielrunde veröffentlichen",onClose:()=>{},get children(){var e=g(zl),n=e.firstChild,r=n.nextSibling,[a,i]=m(r.nextSibling);return u(e,l(ie,{kind:"success",icon:"circle-plus",get label(){return`Ja, bitte "${t.title||"["+C.missingTitle+"]"}" veröffentlichen.`},get onClick(){return t.onPublish}}),a,i),e}})}function go(t){return l(He,{get store(){return t.store},title:"Update senden",onClose:()=>{},size:"medium",get children(){return()=>t.players.kind==="LOADING"?g(Bl):t.players.kind==="ERROR"?I(()=>C.error.general):t.players.data.length===0?g(Gl):[(()=>{var e=g(Yl),n=e.firstChild,r=n.nextSibling,[a,i]=m(r.nextSibling);return u(e,()=>t.players.data.map(s=>s.name).join(", "),a,i),e})(),g(Dt),l(fo,{get onSend(){return t.onSend}})]}})}function ho(t){return l(He,{get store(){return t.store},title:"Spielrunde löschen",onClose:()=>{},get children(){return[l(N,{get when(){return t.hasSlots},get children(){return g(Vl)}}),l(N,{get when(){return!t.hasSlots},get children(){var e=g(Wl),n=e.firstChild,r=n.nextSibling,[a,i]=m(r.nextSibling);return u(e,l(ie,{kind:"danger",icon:"trash",get label(){return`Ja, bitte "${t.title||"["+C.missingTitle+"]"}" löschen.`},get onClick(){return t.onDelete}}),a,i),e}})]}})}function mo(t){const[e]=z(t.store),n=en(()=>Ja(e));return(()=>{var r=g(Kl),a=r.firstChild,[i,s]=m(a.nextSibling),o=i.nextSibling,[d,c]=m(o.nextSibling),h=d.nextSibling,[v,_]=m(h.nextSibling),$=v.nextSibling,w=$.firstChild,[x,T]=m(w.nextSibling),U=x.nextSibling,[H,G]=m(U.nextSibling),V=$.nextSibling,[q,ae]=m(V.nextSibling),Z=q.nextSibling,[X,ee]=m(Z.nextSibling),se=X.nextSibling,[te,le]=m(se.nextSibling),ne=te.nextSibling,$e=ne.firstChild,Se=$e.nextSibling,[J,_e]=m(Se.nextSibling),oe=ne.nextSibling,[B,ye]=m(oe.nextSibling),D=B.nextSibling,W=D.firstChild,[re,de]=m(W.nextSibling),K=re.nextSibling,ve=K.firstChild,[xe,Re]=m(ve.nextSibling),Ue=xe.nextSibling,[Ee,ze]=m(Ue.nextSibling),De=Ee.nextSibling,[Ke,Y]=m(De.nextSibling);return u(r,l(N,{get when(){return e.kind==="published"},get children(){return l(lr,{get errors(){return n()}})}}),i,s),u(r,l(At,{get store(){return e.title},label:"Titel",name:"title",get showErrors(){return e.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return I(()=>!!n().titleMissing)()?[C.mandatoryField]:[]},get disabled(){return!t.isEditable}}),d,c),u(r,l(At,{get store(){return e.system},label:"System (optional)",name:"System",get disabled(){return!t.isEditable}}),v,_),u($,l(Mn,{get store(){return e.playerCount.min},label:"Anzahl Mitspielende (Minimum)",name:"playerCountMin",min:1,get max(){return e.playerCount.max.value},get disabled(){return!t.isEditable}}),x,T),u($,l(Mn,{get store(){return e.playerCount.max},label:"Anzahl Mitspielende (Maximum)",name:"playerCountMax",get min(){return e.playerCount.min.value},get disabled(){return!t.isEditable}}),H,G),u(r,l(kn,{get store(){return e.description.short},label:"kurze Beschreibung",name:"descriptionShort",size:"small",get showErrors(){return e.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return I(()=>!!n().descriptionShortMissing)()?[C.mandatoryField]:I(()=>!!n().descriptionShortTooLong)()?[C.charLimitBy.replace("{}",String(sn))]:[]},get disabled(){return!t.isEditable}}),q,ae),u(r,l(kn,{get store(){return e.description.long},label:"lange Beschreibung (optional)",name:"descriptionLong",get showErrors(){return e.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return I(()=>!!n().descriptionLongTooLong)()?[C.charLimitBy.replace("{}",String(kr))]:[]},get disabled(){return!t.isEditable}}),X,ee),u(r,l(Il,{get store(){return t.store.slots},get registrations(){return t.registrations},get slotMissing(){return n().slotMissing},get isEditable(){return t.isEditable}}),te,le),u(ne,l(_o,{get store(){return e.tagNames},get isEditable(){return t.isEditable}}),J,_e),u(r,l(lr,{get errors(){return n()}}),B,ye),u(D,l(ie,{icon:"backward",label:"Zurück zu deinen Spielrunden",get onClick(){return t.goBack}}),re,de),u(K,l(N,{get when(){return e.kind!=="archived"},get children(){return l(ie,{icon:"trash",kind:"danger",label:"Löschen",onClick:()=>t.onCancel(),get disabled(){return!t.isEditable}})}}),xe,Re),u(K,l(N,{get when(){return e.kind==="draft"},get children(){return l(ie,{icon:"circle-plus",get kind(){return n().hasErrors?"gray":"success"},get disabled(){return n().hasErrors||!t.isEditable},label:"Spielrunde veröffentlichen",get onClick(){return I(()=>!!n().hasErrors)()?void 0:t.onSubmit}})}}),Ee,ze),u(K,l(N,{get when(){return e.kind==="published"},get children(){return l(ie,{icon:"circle-plus",kind:"success",label:"Update an Spielende schicken",get onClick(){return t.onSendUpdate},get disabled(){return!t.isEditable}})}}),Ke,Y),r})()}function lr(t){return l(N,{get when(){return t.errors.hasErrors},get children(){return l(M,{type:"danger",get children(){return[g(ql),g(Jl),(()=>{var e=g(ro),n=e.firstChild,[r,a]=m(n.nextSibling),i=r.nextSibling,[s,o]=m(i.nextSibling),d=s.nextSibling,[c,h]=m(d.nextSibling),v=c.nextSibling,[_,$]=m(v.nextSibling),w=_.nextSibling,[x,T]=m(w.nextSibling);return u(e,l(N,{get when(){return t.errors.titleMissing},get children(){return g(Ql)}}),r,a),u(e,l(N,{get when(){return t.errors.descriptionShortMissing},get children(){return g(Xl)}}),s,o),u(e,l(N,{get when(){return t.errors.descriptionShortTooLong},get children(){return g(eo)}}),c,h),u(e,l(N,{get when(){return t.errors.descriptionLongTooLong},get children(){return g(to)}}),_,$),u(e,l(N,{get when(){return t.errors.slotMissing},get children(){return g(no)}}),x,T),e})()]}})}})}function fo(t){const[e,n]=z({updateText:{value:"",isDirty:!1},hasBeenSent:!1}),r=en(()=>Qa(e));return l(Oe,{get fallback(){return l(M,{type:"success",children:"Nachricht wurde registriert und wird in den nächsten 24 Stunden an die Spielenden verschickt."})},get children(){return l(j,{get when(){return!e.hasBeenSent},get children(){return[g(io),g(Dt),g(ao),g(Dt),(()=>{var a=g(so),i=a.firstChild,[s,o]=m(i.nextSibling),d=s.nextSibling,[c,h]=m(d.nextSibling);return Xe(a,"noValidate",!0),u(a,l(kn,{get store(){return e.updateText},label:"Zusammenfassung der Änderung",name:"updateText",size:"small",showErrors:"ALWAYS",get errors(){return I(()=>!!r().missing)()?[C.mandatoryField]:I(()=>!!r().tooLong)()?[C.charLimitBy.replace("{}",String(xr))]:[]}}),s,o),u(a,l(ie,{icon:"paper-plane",label:"Spielende informieren",get kind(){return r().hasErrors?"gray":"success"},get disabled(){return r().hasErrors},get onClick(){return r().hasErrors?void 0:()=>{t.onSend(e.updateText.value),n("hasBeenSent",!0)}}}),c,h),a})()]}})}})}function _o(t){const[e,n]=z(t.store);return[(()=>{var r=g(lo);return u(r,l(ge,{each:pt,children:a=>l(Pn,{get label(){return a.label},get description(){return a.description},get checked(){return e.includes(a.name)},get name(){return a.name},get value(){return a.name},onValueUpdate:i=>{n(i?e.concat([a.name]):e.filter(s=>s!==a.name))},get disabled(){return!t.isEditable}})})),r})(),l(M,{get children(){return C.tagIdeas}})]}const po=(t,e)=>{if(t.loading)return{kind:"LOADING"};if(t.error)return{kind:"ERROR"};const n=t();return n===void 0||n.kind==="FAILURE"?{kind:"ERROR"}:{kind:"SUCCESS",data:n.data.filter(r=>e.includes(r.uuid))}},$o=pr("kind",[E({kind:F("CHOOSE"),uuid:yt()}),E({kind:F("PLAYER"),uuid:yt()}),E({kind:F("GAME"),uuid:S().uuid()}),E({kind:F("GAMEMASTER"),uuid:yt()}),E({kind:F("HELPING"),uuid:yt()}),E({kind:F("HELPING-SLOT"),uuid:S().uuid()}),E({kind:F("SUMMARY"),uuid:yt()}),E({kind:F("EDIT_GAMEROUND"),uuid:S().uuid()})]);pr("kind",[E({kind:F("CHOOSE")}),E({kind:F("PLAYER")}),E({kind:F("GAME"),uuid:S().uuid()}),E({kind:F("GAMEMASTER")}),E({kind:F("HELPING")}),E({kind:F("HELPING-SLOT"),uuid:S().uuid()}),E({kind:F("SUMMARY")}),E({kind:F("EDIT_GAMEROUND"),uuid:S().uuid()})]);const vo=rn(["SAVING","IDLE","ERROR"]),bo=E({saveState:vo,page:$o,secret:S(),showCreateMessage:ft(),isDebugging:ft()});function Rr(t){const e=t.searchParams.get("page")??"",n=t.searchParams.get("uuid")??null,r=t.searchParams.get("secret")??"",a=t.searchParams.get("showCreateMessage")==="true",i=t.searchParams.get("debug")==="true",s=bo.safeParse({saveState:"IDLE",page:{kind:e.toUpperCase(),uuid:n},secret:r,showCreateMessage:a,isDebugging:i});return s.success?s.data:{saveState:"IDLE",page:{kind:"CHOOSE",uuid:null},secret:r,showCreateMessage:a,isDebugging:i}}function So(t,e){return t.kind!==e.kind?!1:t.kind==="EDIT_GAMEROUND"&&e.kind==="EDIT_GAMEROUND"||t.kind==="GAME"&&e.kind==="GAME"?t.uuid===e.uuid:!0}var yo=f("<div aria-atomic=true><!$><!/><!$><!/>"),ko=f("<div class=toast-container aria-live=polite aria-atomic=true>");const[Ye,It]=z([]);function xo(t){const e=()=>{const n=["toast"];return t.options.kind!==void 0&&n.push(`toast-${t.options.kind}`),n.join(" ")};return(()=>{var n=g(yo),r=n.firstChild,[a,i]=m(r.nextSibling),s=a.nextSibling,[o,d]=m(s.nextSibling);return u(n,()=>t.options.message,a,i),u(n,l(N,{get when(){return t.options.dismissable},get children(){return l(me,{kind:"ghost",get label(){return l(be,{icon:"xmark",classes:["toast-dismiss"]})},get onClick(){return t.dismiss}})}}),o,d),fe(c=>{var h=e(),v=t.options.kind==="danger"?"alert":"status",_=t.options.kind==="danger"?"assertive":"polite";return h!==c.e&&Ne(n,c.e=h),v!==c.t&&Tt(n,"role",c.t=v),_!==c.a&&Tt(n,"aria-live",c.a=_),c},{e:void 0,t:void 0,a:void 0}),n})()}function Eo(){function t(e){Ye.find(n=>n.uuid===e)?.cleanup(),It(Ye.filter(n=>n.uuid!==e))}return(()=>{var e=g(ko);return u(e,l(ge,{each:Ye,children:n=>l(xo,{options:n,dismiss:()=>t(n.uuid)})})),e})()}function Ar(t,e){if(e?.uuid!==void 0&&Ye.find(o=>o.uuid===e.uuid)!==void 0)return An(e.uuid,t,e);const n=e?.uuid??crypto.randomUUID(),r=e?.duration??5e3,a=e?.kind??"gray",i=e?.dismissable??!0,s=setTimeout(()=>{It(Ye.filter(o=>o.uuid!==n))},r);return It(Ye.length,{uuid:n,kind:a,message:t,duration:r,dismissable:i,cleanup:()=>clearTimeout(s)}),n}function An(t,e,n){const r=Ye.find(d=>d.uuid===t);if(r===void 0)return t;r.cleanup();const a=n.duration??r.duration,i=n.kind??r.kind,s=n?.dismissable??r.dismissable,o=setTimeout(()=>{It(Ye.filter(d=>d.uuid!==t))},a);return It(d=>d.uuid===t,{uuid:t,kind:i,message:e,duration:a,dismissable:s,cleanup:()=>clearTimeout(o)}),t}const wo=E({name:S(),email:S(),mobile:S()}),Co=E({name:S(),email:S(),mobile:S()}),Ro=_t([E({kind:F("SELF"),gameRound:S().uuid(),uuid:S().uuid()}),E({kind:F("FRIEND"),gameRound:S().uuid(),name:S(),uuid:S().uuid()})]),Ao=E({wantsUpdates:ft(),reservations:he(Ro)}),To=_t([E({kind:F("SELF"),gameRound:S().uuid(),uuid:S().uuid()}),E({kind:F("FRIEND"),gameRound:S().uuid(),name:S(),uuid:S().uuid()})]);_t([E({kind:F("SELF"),gameRound:S().uuid()}),E({kind:F("FRIEND"),gameRound:S().uuid(),name:S()})]);const No=E({wantsUpdates:ft(),reservations:he(To)}),Oo=E({games:he(Va),wantsHelp:ft()}),Uo=E({games:he(yr),wantsHelp:ft()}),Do=_t([E({kind:F("SELF"),helpEntryUuid:S().uuid(),uuid:S().uuid()}),E({kind:F("FRIEND"),helpEntryUuid:S().uuid(),name:S(),uuid:S().uuid()})]),Io=he(Do),Lo=_t([E({kind:F("SELF"),helpEntryUuid:S().uuid(),uuid:S().uuid()}),E({kind:F("FRIEND"),helpEntryUuid:S().uuid(),name:S(),uuid:S().uuid()})]),Po=he(Lo);_t([E({kind:F("SELF"),helpEntryUuid:S().uuid()}),E({kind:F("FRIEND"),helpEntryUuid:S().uuid(),name:S()})]);const Mo=E({version:F(1),init:wo,lastSaved:S(),playing:Ao,master:Oo,helping:Io,publishState:an}),Fo=E({version:F(1),init:Co,lastSaved:Qi.date(),playing:No,master:Uo,helping:Po,publishState:an});async function jo(t){if(t.length!==36&&t.length!==4)return{kind:"SECRET_INVALID"};const e=t==="demo"?await gs():await vs(t);if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Mo.safeParse(e.data);if(!n.success)return console.error(n.error),{kind:"FAILURE"};const r=Zo(n.data);return r.success?{kind:"SUCCESS",data:r.data}:{kind:"FAILURE"}}function Zo(t){return Fo.safeParse(t)}const yn=crypto.randomUUID();async function Ho(t,e,n){const[r,a]=z(t);a("saveState","SAVING"),Ar("Am Speichern...",{uuid:yn,dismissable:!1});const i=new Date;e.lastSaved=i;const s=zo(e);try{if((n==="demo"?await hs(s,n):await bs(s,n)).kind==="FAILURE")throw Error("")}catch(o){return a("saveState","ERROR"),console.error(o),An(yn,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return An(yn,`Zuletzt gespeichert um: ${cr(i)} Uhr`,{kind:"success",dismissable:!0}),a("saveState","IDLE"),{kind:"SUCCESS",data:i}}function zo(t){return{...t,lastSaved:String(t.lastSaved),master:{...t.master,games:t.master.games.map(qa)}}}const Bo=Vr(Ho,1e3);var Go=f("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function xt(t){return(()=>{var e=g(Go),n=e.firstChild,r=n.nextSibling,[a,i]=m(r.nextSibling);return u(n,()=>t.tooltip),u(e,()=>t.children,a,i),e})()}var Yo=f("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),Vo=f('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>'),Wo=f("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),Ko=f("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),qo=f("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function Jo(t){return(()=>{var e=g(Yo),n=e.firstChild,r=n.firstChild,[a,i]=m(r.nextSibling),s=a.nextSibling,[o,d]=m(s.nextSibling),c=o.nextSibling,[h,v]=m(c.nextSibling),_=h.nextSibling,[$,w]=m(_.nextSibling),x=$.nextSibling,[T,U]=m(x.nextSibling);return u(n,l(xt,{tooltip:"Zur Übersicht",get children(){return l(me,{get label(){return l(be,{icon:"backward"})},onClick:()=>t.changePage({kind:"CHOOSE"})})}}),a,i),u(n,l(xt,{tooltip:"Zu den Spielrunden",get children(){return l(me,{get label(){return l(be,{icon:"dice-d20"})},onClick:()=>t.changePage({kind:"PLAYER"})})}}),o,d),u(n,l(xt,{tooltip:"Zu deinen Spielrunden",get children(){return l(me,{get label(){return l(be,{icon:"grid-2-plus"})},onClick:()=>t.changePage({kind:"GAMEMASTER"})})}}),h,v),u(n,l(xt,{tooltip:"Zum Helferplan",get children(){return l(me,{get label(){return l(be,{icon:"hand-heart"})},onClick:()=>t.changePage({kind:"HELPING"})})}}),$,w),u(n,l(xt,{tooltip:"Zur Zusammenfassung",get children(){return l(me,{get label(){return l(be,{icon:"list"})},onClick:()=>t.changePage({kind:"SUMMARY"})})}}),T,U),e})()}function Qo(t){return[l(M,{type:"gray",get children(){var e=g(Vo),n=e.firstChild,[r,a]=m(n.nextSibling),i=r.nextSibling,[s,o]=m(i.nextSibling),d=s.nextSibling,[c,h]=m(d.nextSibling),v=c.nextSibling,[_,$]=m(v.nextSibling),w=_.nextSibling,[x,T]=m(w.nextSibling);return u(e,l(ie,{icon:"backward",label:"Zur Übersicht",onClick:()=>t.changePage({kind:"CHOOSE"})}),r,a),u(e,l(ie,{icon:"dice-d20",label:"Zu den Spielrunden",onClick:()=>t.changePage({kind:"PLAYER"})}),s,o),u(e,l(ie,{icon:"grid-2-plus",label:"Zu deinen Spielrunden",onClick:()=>t.changePage({kind:"GAMEMASTER"})}),c,h),u(e,l(ie,{icon:"hand-heart",label:"Zum Helferplan",onClick:()=>t.changePage({kind:"HELPING"})}),_,$),u(e,l(ie,{icon:"list",label:"Zur Zusammenfassung",onClick:()=>t.changePage({kind:"SUMMARY"})}),x,T),e}}),l(Xo,{get saveState(){return t.saveState},get lastSaved(){return t.lastSaved}})]}function Xo(t){return l(Oe,{get children(){return[l(j,{get when(){return t.saveState==="IDLE"},get children(){var e=g(Wo),n=e.firstChild,[r,a]=m(n.nextSibling),i=r.nextSibling,s=i.firstChild,o=s.nextSibling,[d,c]=m(o.nextSibling);return d.nextSibling,u(e,l(be,{icon:"circle-check"}),r,a),u(i,()=>cr(t.lastSaved),d,c),e}}),l(j,{get when(){return t.saveState==="SAVING"},get children(){var e=g(Ko),n=e.firstChild,[r,a]=m(n.nextSibling);return r.nextSibling,u(e,l(be,{icon:"floppy-disk-circle-arrow-right"}),r,a),e}}),l(j,{get when(){return t.saveState==="ERROR"},get children(){var e=g(qo),n=e.firstChild,[r,a]=m(n.nextSibling);return r.nextSibling,u(e,l(be,{icon:"triangle-exclamation"}),r,a),e}})]}})}var ed=f("<div class=page><!$><!/><div class=page-content><h2></h2><br><!$><!/></div><!$><!/>"),td=f("<div class=extended-wrapper style=margin-block-start:1rem>");function Qe(t){return(()=>{var e=g(ed),n=e.firstChild,[r,a]=m(n.nextSibling),i=r.nextSibling,s=i.firstChild,o=s.nextSibling,d=o.nextSibling,[c,h]=m(d.nextSibling),v=i.nextSibling,[_,$]=m(v.nextSibling);return u(e,(()=>{var w=I(()=>t.showQuickmenu!==!1);return()=>w()?l(Jo,{get changePage(){return t.changePage},get saveState(){return t.saveState},get lastSaved(){return t.lastSaved}}):null})(),r,a),u(s,()=>t.title),u(i,()=>t.children,c,h),u(e,(()=>{var w=I(()=>t.showQuickmenu!==!1);return()=>w()?(()=>{var x=g(td);return u(x,l(Qo,{get changePage(){return t.changePage},get saveState(){return t.saveState},get lastSaved(){return t.lastSaved}})),x})():null})(),_,$),e})()}const nd=E({uuid:S().uuid(),name:S()}),Tr=he(nd),rd=Tr;async function id(t,e){const n=t==="demo"?await ps(e):await ys(t);if(n.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const r=Tr.safeParse(n.data);if(!r.success)return{kind:"FAILURE"};const a=ad(r.data);return a.success?{kind:"SUCCESS",data:a.data}:{kind:"FAILURE"}}function ad(t){return rd.safeParse(t)}const sd=he(S().uuid()),ld=he(S().uuid());async function od(t){const e=await Es(t);if(e.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=sd.safeParse(e.data);if(!n.success)return{kind:"FAILURE"};const r=dd(n.data);return r.success?{kind:"SUCCESS",data:r.data}:{kind:"FAILURE"}}function dd(t){return ld.safeParse(t)}var or=f("<br>"),dr=f("<pre>"),ud=f("<hr>"),cd=f("<div><code>Reservations (read-only)"),gd=f("<em>loading...");function hd(t){const e=new URL(location.href);e.searchParams.set("page",t.page.kind.toLowerCase()),t.page.kind==="EDIT_GAMEROUND"&&e.searchParams.set("uuid",t.page.uuid),e.searchParams.delete("showCreateMessage"),history.replaceState({page:t},"",e);const n=C.pageTitle[t.page.kind];document.title=C.metaTitle.replace("{}",n)}function md(t){const[e,n]=z(t.page);return(r,a)=>{if(So(r,e))return;const i=a?.backButton??!1,s=a?.disableScroll??!1,o=new URL(location.href);o.searchParams.set("page",r.kind.toLowerCase()),r.kind==="EDIT_GAMEROUND"||r.kind==="GAME"||r.kind==="HELPING-SLOT"?(o.searchParams.set("uuid",r.uuid),n(r)):(o.searchParams.delete("uuid"),n({...r,uuid:null})),i||history.pushState({page:r},"",o);const d=C.pageTitle[r.kind];document.title=C.metaTitle.replace("{}",d),s||window.scrollTo({top:0})}}function fd(t){hd(t.meta);const[e,n]=z({meta:t.meta,save:t.save}),r=()=>e.save.master.games.flatMap(_=>_.slots.map($=>$.uuid)),[a]=Et(r(),_=>id(e.meta.secret,_)),[i]=Et(()=>Ts(e.meta.secret)),[s]=Et(()=>od(e.meta.secret)),o=crypto.randomUUID(),[d,c]=Nn(!1);Et(()=>JSON.stringify(e.save),async()=>{if(!d()){c(!0);return}if(e.save.publishState!=="published"){Ar("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:o});return}const _=wt(e.save);try{const $=await Bo(e.meta,_,e.meta.secret);$.kind==="FAILURE"?console.error($):n("save","lastSaved",$.data)}catch($){console.error($),n("meta","saveState","ERROR")}});const h=md(e.meta),v=Wr();return gr(()=>{window.addEventListener("popstate",_=>{if(typeof _=="object"&&_!==null&&"state"in _){const $=new URL(location.href),w=Rr($);h(w.page,{backButton:!0})}}),setInterval(async()=>{const _=v.dequeue();_.kind==="NEXT_ELEMENT"&&await _.data()},1e3)}),[l(N,{get when(){return e.meta.showCreateMessage},get children(){return[l(M,{type:"success",get children(){return C.registrationStarted}}),g(or)]}}),l(N,{get when(){return e.save.publishState!=="published"},get children(){return[l(M,{type:"danger",children:"Diese Anmeldung wurde deaktiviert. Sollte dies ein Fehler sein, kontaktiere uns bitte."}),g(or)]}}),l(Oe,{get fallback(){return l(Qe,{title:"Wo möchtest du starten?",showQuickmenu:!1,changePage:h,get saveState(){return e.meta.saveState},get lastSaved(){return e.save.lastSaved},get children(){return l(_l,{changePage:h,get saveState(){return e.meta.saveState},get lastSaved(){return e.save.lastSaved}})}})},get children(){return[l(j,{get when(){return!e.meta.isDebugging},get children(){return l(Qe,{title:"Zusammenfassung",changePage:h,get saveState(){return e.meta.saveState},get lastSaved(){return e.save.lastSaved},showQuickmenu:!1,get children(){return l(er,{get store(){return e.save},program:i,get isEditable(){return e.save.publishState==="published"},changePage:h})}})}}),l(j,{get when(){return e.meta.page.kind==="PLAYER"||e.meta.page.kind==="GAME"},get children(){return l(Qe,{title:"Spielrundenübersicht",changePage:h,get saveState(){return e.meta.saveState},get lastSaved(){return e.save.lastSaved},get children(){return l(il,{get store(){return e.save.playing},program:i,get uuid(){return I(()=>e.meta.page.kind==="GAME")()?e.meta.page.uuid:null},get isEditable(){return e.save.publishState==="published"},changePage:h})}})}}),l(j,{get when(){return e.meta.page.kind==="GAMEMASTER"},get children(){return l(Qe,{title:"Meine Spielrunden",changePage:h,get saveState(){return e.meta.saveState},get lastSaved(){return e.save.lastSaved},get children(){return l(ss,{get store(){return e.save.master},get isEditable(){return e.save.publishState==="published"},changePage:h})}})}}),l(j,{get when(){return e.meta.page.kind==="EDIT_GAMEROUND"},get children(){return l(Qe,{title:"Spielrunde editieren",changePage:h,get saveState(){return e.meta.saveState},get lastSaved(){return e.save.lastSaved},get children(){return l(oo,{get allRounds(){return e.save.master.games},get uuid(){return I(()=>e.meta.page.kind==="EDIT_GAMEROUND")()?e.meta.page.uuid:"should never happen"},get fallback(){return l(M,{type:"danger",get children(){return C.error.gameroundUuidError}})},children:_=>l(uo,{store:_,registrations:a,queue:v,get isEditable(){return e.save.publishState==="published"},changePage:h,get secret(){return e.meta.secret}})})}})}}),l(j,{get when(){return e.meta.page.kind==="HELPING"||e.meta.page.kind==="HELPING-SLOT"},get children(){return l(Qe,{title:"Helfen",changePage:h,get saveState(){return e.meta.saveState},get lastSaved(){return e.save.lastSaved},get children(){return l(Za,{get store(){return e.save},help:s,get uuid(){return I(()=>e.meta.page.kind==="HELPING-SLOT")()?e.meta.page.uuid:null},get isEditable(){return e.save.publishState==="published"},changePage:h})}})}}),l(j,{get when(){return e.meta.page.kind==="SUMMARY"},get children(){return l(Qe,{title:"Zusammenfassung",changePage:h,get saveState(){return e.meta.saveState},get lastSaved(){return e.save.lastSaved},get children(){return l(er,{get store(){return e.save},program:i,get isEditable(){return e.save.publishState==="published"},changePage:h})}})}})]}}),l(N,{get when(){return e.meta.isDebugging},get children(){return[(()=>{var _=g(dr);return u(_,()=>JSON.stringify(e,null,2)),_})(),g(ud),g(cd),l(Lt,{get fallback(){return g(gd)},get children(){return l(N,{get when(){return a()},children:_=>(()=>{var $=g(dr);return u($,()=>JSON.stringify(_(),null,2)),$})()})}})]}}),l(Eo,{})]}function Nr(){return l(M,{get children(){return C.loading.registration}})}function Sd(){const[t,e]=Nn(null);return gr(()=>{const n=new URL(location.href);e(Rr(n))}),l(N,{get fallback(){return l(Nr,{})},get when(){return t()},children:n=>l(_d,{get page(){return n()}})})}function _d(t){const[e]=Et(()=>jo(t.page.secret));return l(Jr,{fallback:n=>(console.error(n),l(M,{type:"danger",get children(){return C.error.general}})),get children(){return l(Lt,{get fallback(){return l(Nr,{})},get children(){return l(Oe,{get children(){return l(j,{get when(){return e()},children:n=>{const{kind:r,value:a}=Kr(n());return r==="SECRET_INVALID"?l(M,{type:"danger",get children(){return C.error.secretError}}):r==="FAILURE"?(console.error(a),l(M,{type:"danger",get children(){return C.error.ourMistake}})):l(fd,{get meta(){return t.page},get save(){return a.data}})}})}})}})}})}export{Sd as MeineAnmeldungWrapper};
