import{b as E,c as D,B as N,I as Be,d as Ze,g as Ie,f as mn,s as Le,u as $n}from"./utils.Cn8i-5zk.js";import{g as o,t as d,a as s,i as a,c as t,m as Y,d as hn,S as U,F as W,b as _n,e as Sn,r as pn,f as fn,h as bn,M,j as he,k as vn,o as yn,l as ze,n as xn,E as kn}from"./web.B5gYTGqu.js";/* empty css                                 */import{T as C,e as nn,C as Cn,d as En,o as h,l as H,s as $,b as ne,n as F,a as O,c as An,f as Tn}from"./texts.CNxuCBLk.js";import{c as te,u as wn}from"./store.ia-DMHRQ.js";import{T as je}from"./Textarea.CmcSgAFO.js";var Rn=d("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function X(n){return(()=>{var e=o(Rn),r=e.firstChild,i=r.nextSibling,[u,l]=s(i.nextSibling);return a(r,()=>n.tooltip),a(e,()=>n.children,u,l),e})()}var Nn=d("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),On=d('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>'),Dn=d("<div class=grid><!$><!/><span>Zur Übersicht"),Mn=d("<div class=grid><!$><!/><span>Zu den Spielrunden"),Pn=d("<div class=grid><!$><!/><span>Zu deinen Spielrunden"),In=d("<div class=grid><!$><!/><span>Zum Helferplan"),Un=d("<div class=grid><!$><!/><span>Zur Zusammenfassung");function Fn(n){return(()=>{var e=o(Nn),r=e.firstChild,i=r.firstChild,[u,l]=s(i.nextSibling),c=u.nextSibling,[g,m]=s(c.nextSibling),_=g.nextSibling,[b,x]=s(_.nextSibling),k=b.nextSibling,[f,v]=s(k.nextSibling),w=f.nextSibling,[I,p]=s(w.nextSibling);return a(r,t(X,{tooltip:"Zur Übersicht",get children(){return t(E,{get label(){return t(D,{icon:"backward"})},onClick:()=>n.changePage({kind:"CHOOSE"})})}}),u,l),a(r,t(X,{tooltip:"Zu den Spielrunden",get children(){return t(E,{get label(){return t(D,{icon:"dice-d20"})},onClick:()=>n.changePage({kind:"PLAYER"})})}}),g,m),a(r,t(X,{tooltip:"Zu deinen Spielrunden",get children(){return t(E,{get label(){return t(D,{icon:"grid-2-plus"})},onClick:()=>n.changePage({kind:"GAMEMASTER"})})}}),b,x),a(r,t(X,{tooltip:"Zum Helferplan",get children(){return t(E,{get label(){return t(D,{icon:"hand-heart"})},onClick:()=>n.changePage({kind:"HELPING"})})}}),f,v),a(r,t(X,{tooltip:"Zur Zusammenfassung",get children(){return t(E,{get label(){return t(D,{icon:"list"})},onClick:()=>n.changePage({kind:"SUMMARY"})})}}),I,p),e})()}function Ln(n){return(()=>{var e=o(On),r=e.firstChild,[i,u]=s(r.nextSibling),l=i.nextSibling,[c,g]=s(l.nextSibling),m=c.nextSibling,[_,b]=s(m.nextSibling),x=_.nextSibling,[k,f]=s(x.nextSibling),v=k.nextSibling,[w,I]=s(v.nextSibling);return a(e,t(E,{get label(){return(()=>{var p=o(Dn),T=p.firstChild,[A,R]=s(T.nextSibling);return A.nextSibling,a(p,t(D,{icon:"backward"}),A,R),p})()},onClick:()=>n.changePage({kind:"CHOOSE"})}),i,u),a(e,t(E,{get label(){return(()=>{var p=o(Mn),T=p.firstChild,[A,R]=s(T.nextSibling);return A.nextSibling,a(p,t(D,{icon:"dice-d20"}),A,R),p})()},onClick:()=>n.changePage({kind:"PLAYER"})}),c,g),a(e,t(E,{get label(){return(()=>{var p=o(Pn),T=p.firstChild,[A,R]=s(T.nextSibling);return A.nextSibling,a(p,t(D,{icon:"grid-2-plus"}),A,R),p})()},onClick:()=>n.changePage({kind:"GAMEMASTER"})}),_,b),a(e,t(E,{get label(){return(()=>{var p=o(In),T=p.firstChild,[A,R]=s(T.nextSibling);return A.nextSibling,a(p,t(D,{icon:"hand-heart"}),A,R),p})()},onClick:()=>n.changePage({kind:"HELPING"})}),k,f),a(e,t(E,{get label(){return(()=>{var p=o(Un),T=p.firstChild,[A,R]=s(T.nextSibling);return A.nextSibling,a(p,t(D,{icon:"list"}),A,R),p})()},onClick:()=>n.changePage({kind:"SUMMARY"})}),w,I),e})()}var Gn=d("<div class=page><!$><!/><div class=page-content><h2></h2><br><!$><!/></div><!$><!/>");function q(n){return(()=>{var e=o(Gn),r=e.firstChild,[i,u]=s(r.nextSibling),l=i.nextSibling,c=l.firstChild,g=c.nextSibling,m=g.nextSibling,[_,b]=s(m.nextSibling),x=l.nextSibling,[k,f]=s(x.nextSibling);return a(e,(()=>{var v=Y(()=>n.showQuickmenu!==!1);return()=>v()?t(Fn,{get changePage(){return n.changePage}}):null})(),i,u),a(c,()=>n.title),a(l,()=>n.children,_,b),a(e,(()=>{var v=Y(()=>n.showQuickmenu!==!1);return()=>v()?t(Ln,{get changePage(){return n.changePage}}):null})(),k,f),e})()}var Hn=d("<pre><code>Noch nicht implementiert");function Yn(n){return t(q,{title:"Zusammenfassung",get changePage(){return n.changePage},get children(){return o(Hn)}})}var Wn=d("<pre><code>Noch nicht implementiert");function Bn(n){return t(q,{title:"Helfen",get changePage(){return n.changePage},get children(){return o(Wn)}})}var Zn=d("<div class=grid><!$><!/><div>"),zn=d("<div class=boxLink>");function ee(n){const e=n.type??"special";return(()=>{var r=o(zn);return a(r,t(N,{type:e,get onClick(){return n.onClick},get children(){var i=o(Zn),u=i.firstChild,[l,c]=s(u.nextSibling),g=l.nextSibling;return a(i,t(D,{get icon(){return n.icon}}),l,c),a(g,()=>n.children),i}})),r})()}const tn=[{name:"children",label:"Kinderfreundlich",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{name:"selfmade",label:"Mein eigenes System",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}],Ge=200,He=500;function jn(n){const e=n.title.value.trim().length===0,r=n.description.short.value.trim().length===0,i=n.description.short.value.length>Ge,u=n.description.long.value.length>He,l=n.slots.length===0;return{titleMissing:e,descriptionShortMissing:r,descriptionShortTooLong:i,descriptionLongTooLong:u,slotMissing:l,hasErrors:e||r||i||u||l}}var qn=d("<h3>"),Vn=d("<div style=margin-top:2rem;><h3 style=margin-bottom:1rem;></h3><ul class=event-list role=list>"),Kn=d('<li><h1 class=event-title><!$><!/><!$><!/></h1><div class=event-details><div class=event-tags><strong>System:</strong><!$><!/></div><div class=event-tags><strong>Zeit:</strong><!$><!/></div><div class=event-tags><strong>Spielende:</strong> <!$><!/> - <!$><!/></div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li><button class=event-link><span>Bearbeiten'),Qn=d("<em>[<!$><!/>] "),J=d("<em>"),Xn=d("<span><!$><!/>, <!$><!/> - <!$><!/> Uhr");function Jn(n){return t(q,{title:"Meine Spielrunden",get changePage(){return n.changePage},get children(){return[t(ee,{icon:"grid-2-plus",type:"success",onClick:()=>n.changePage({kind:"NEW_GAMEROUND"}),get children(){var e=o(qn);return a(e,()=>C.createNewGameRound),e}}),t(U,{get when(){return n.store.games},children:e=>(()=>{var r=o(Vn),i=r.firstChild,u=i.nextSibling;return a(i,()=>C.myGameRounds),a(u,t(W,{get each(){return e()},children:l=>{const c=l.tagNames.map(m=>tn.find(({name:_})=>_===m)).filter(m=>m!==void 0).map(({label:m})=>m),g=et(l);return t(W,{get each(){return l.slots},get fallback(){return t(qe,{game:l,slot:null,tags:c,isDraft:g,get changePage(){return n.changePage}})},children:m=>t(qe,{game:l,slot:m,tags:c,isDraft:g,get changePage(){return n.changePage}})})}})),r})()})]}})}function qe(n){const{game:e,slot:r,isDraft:i,tags:u,changePage:l}=n;return(()=>{var c=o(Kn),g=c.firstChild,m=g.firstChild,[_,b]=s(m.nextSibling),x=_.nextSibling,[k,f]=s(x.nextSibling),v=g.nextSibling,w=v.firstChild,I=w.firstChild,p=I.nextSibling,[T,A]=s(p.nextSibling),R=w.nextSibling,Se=R.firstChild,pe=Se.nextSibling,[ie,fe]=s(pe.nextSibling),B=R.nextSibling,le=B.firstChild,be=le.nextSibling,ve=be.nextSibling,[V,ye]=s(ve.nextSibling),xe=V.nextSibling,ae=xe.nextSibling,[ke,Ce]=s(ae.nextSibling),se=B.nextSibling,oe=se.nextSibling,Z=oe.firstChild,Ee=Z.nextSibling,Ae=Ee.nextSibling,[ce,Te]=s(Ae.nextSibling),ue=v.nextSibling,de=ue.firstChild,we=de.firstChild,ge=we.nextSibling,Re=ge.nextSibling,[Ne,Oe]=s(Re.nextSibling),me=ue.nextSibling,De=me.firstChild,K=De.firstChild;return a(g,i?(()=>{var y=o(Qn),P=y.firstChild,z=P.nextSibling,[j,Q]=s(z.nextSibling);return j.nextSibling,a(y,()=>C.draft,j,Q),y})():"",_,b),a(g,(()=>{var y=Y(()=>e.title.value.length>0);return()=>y()?e.title.value:(()=>{var P=o(J);return a(P,()=>C.missingTitle),P})()})(),k,f),a(w,()=>e.system.value||(()=>{var y=o(J);return a(y,()=>C.missingSystem),y})(),T,A),a(R,r!==null?(()=>{var y=o(Xn),P=y.firstChild,[z,j]=s(P.nextSibling),Q=z.nextSibling,Me=Q.nextSibling,[S,G]=s(Me.nextSibling),Pe=S.nextSibling,dn=Pe.nextSibling,[We,gn]=s(dn.nextSibling);return We.nextSibling,a(y,()=>r.day,z,j),a(y,()=>r.from,S,G),a(y,()=>r.to,We,gn),y})():(()=>{var y=o(J);return a(y,()=>C.missingSlot),y})(),ie,fe),a(B,()=>e.playerCount.min.value,V,ye),a(B,()=>e.playerCount.max.value,ke,Ce),a(oe,()=>u.join(", ")||(()=>{var y=o(J);return a(y,()=>C.missingTags),y})(),ce,Te),a(de,(()=>{var y=Y(()=>e.description.short.value.length>0);return()=>y()?e.description.short.value:(()=>{var P=o(J);return a(P,()=>C.missingShortDescription),P})()})(),Ne,Oe),K.$$click=()=>l({kind:"EDIT_GAMEROUND",uuid:e.uuid}),_n(()=>Sn(c,["event-entry",i?"gray":""].join(" "))),pn(),c})()}function et(n){return n.title.value.trim().length===0||n.description.short.value.trim().length===0||n.description.short.value.length>Ge||n.description.long.value.length>He||n.slots.length===0}hn(["click"]);var nt=d("<pre><code>Noch nicht implementiert");function tt(n){return t(q,{title:"Spielrundenübersicht",get changePage(){return n.changePage},get children(){return o(nt)}})}var rt=d("<h3>Spielrunden ansehen"),it=d("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),Ue=d("<br>"),lt=d("<h3>Spielrunden erstellen"),at=d("<p>Falls du wenig oder gar keine Erfahrung als Spielleiter:in hast, werden wir dich vor und während dem Anlass unterstützen."),st=d("<h3>Helfen"),ot=d("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),ct=d("<h3>Zusammenfassung"),ut=d("<p>Erhalte einen Überblick über dein gesamtes Programm.");function dt(n){return t(q,{title:"Wo möchtest du starten?",showQuickmenu:!1,get changePage(){return n.changePage},get children(){return[t(ee,{icon:"dice-d20",onClick:()=>n.changePage({kind:"PLAYER"}),get children(){return[o(rt),o(it)]}}),o(Ue),t(ee,{icon:"grid-2-plus",onClick:()=>n.changePage({kind:"GAMEMASTER"}),get children(){return[o(lt),o(at)]}}),o(Ue),t(ee,{icon:"hand-heart",onClick:()=>n.changePage({kind:"HELPING"}),get children(){return[o(st),o(ot)]}}),o(Ue),t(ee,{icon:"list",onClick:()=>n.changePage({kind:"SUMMARY"}),get children(){return[o(ct),o(ut)]}})]}})}nn(["SATURDAY","SUNDAY"]);function Ve(n,e=!1){const{from:r,to:i}=n;if(r>i)return[];const u=i-r;return[...Array(e?u+1:u)].map((l,c)=>c+r)}const gt={SATURDAY:{open:{from:10,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}};var Ke=d("<br>"),mt=d("<h4>Spielrunde inkomplett"),$t=d("<div style=margin-top:1rem;display:flex;justify-content:flex-end;>"),ht=d('<form novalidate><!$><!/><!$><!/><!$><!/><div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem;"><!$><!/><!$><!/></div><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/><fieldset><legend>Zeitslots</legend><!$><!/><!$><!/></fieldset><fieldset><legend>Kategorien (optional)</legend><div style=display:grid;gap:0.5rem;></div></fieldset><!$><!/><div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between;><!$><!/><!$><!/>'),_t=d("<h6>Samstag, 23. August 2025"),Qe=d("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;>"),St=d("<h6>Sonntag, 24. August 2025"),Xe=d("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center;><span>von <!$><!/> bis <!$><!/> Uhr</span><!$><!/>"),pt=d("<div style=display:grid;gap:0.5rem;>"),ft=d("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/>"),bt=d("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/><!$><!/>"),vt=d("<div style=display:grid;gap:0.5rem;><!$><!/><!$><!/><!$><!/><div style=margin-block-start:1rem;>"),yt=d("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center;><!$><!/> <span>Neuen Slot erfassen"),xt=d("<em>Wähle eine Tag:"),kt=d("<div style=display:flex;flex-wrap:wrap;gap:.5rem;><!$><!/><!$><!/>"),Ct=d("<em>Wähle eine Startzeit:"),rn=d("<div style=display:flex;flex-wrap:wrap;gap:.5rem;>"),ln=d("<span style=white-space:nowrap;><!$><!/> Uhr"),Et=d("<em>Wähle eine Endzeit:");function At(n){const[e,r]=te(n.store),i=fn(()=>jn(e));function u(l){l.preventDefault();const[c,g]=[e.playerCount.min.value,e.playerCount.max.value].map(m=>Math.max(1,m)).toSorted((m,_)=>m-_);bn(()=>{r("playerCount","min","value",c??1),r("playerCount","max","value",g??1)}),!i().hasErrors&&(n.createNewGame(),n.changePage({kind:"GAMEMASTER"}))}return t(q,{title:"Neue Spielrunde erfassen",get changePage(){return n.changePage},get children(){var l=o(ht),c=l.firstChild,[g,m]=s(c.nextSibling),_=g.nextSibling,[b,x]=s(_.nextSibling),k=b.nextSibling,[f,v]=s(k.nextSibling),w=f.nextSibling,I=w.firstChild,[p,T]=s(I.nextSibling),A=p.nextSibling,[R,Se]=s(A.nextSibling),pe=w.nextSibling,[ie,fe]=s(pe.nextSibling),B=ie.nextSibling,[le,be]=s(B.nextSibling),ve=le.nextSibling,[V,ye]=s(ve.nextSibling),xe=V.nextSibling,[ae,ke]=s(xe.nextSibling),Ce=ae.nextSibling,[se,oe]=s(Ce.nextSibling),Z=se.nextSibling,Ee=Z.firstChild,Ae=Ee.nextSibling,[ce,Te]=s(Ae.nextSibling),ue=ce.nextSibling,[de,we]=s(ue.nextSibling),ge=Z.nextSibling,Re=ge.firstChild,Ne=Re.nextSibling,Oe=ge.nextSibling,[me,De]=s(Oe.nextSibling),K=me.nextSibling,y=K.firstChild,[P,z]=s(y.nextSibling),j=P.nextSibling,[Q,Me]=s(j.nextSibling);return l.addEventListener("submit",u),a(l,t(Be,{label:"Titel",name:"title",get value(){return e.title.value},onValueUpdate:S=>r("title","value",S),onBlur:()=>r("title","isDirty",!0)}),g,m),a(l,t(U,{get when(){return i().titleMissing&&e.title.isDirty},get children(){return t(N,{type:"danger",get children(){return C.mandatoryField}})}}),b,x),a(l,t(Be,{label:"System (optional)",name:"System",get value(){return e.system.value},onValueUpdate:S=>r("system","value",S),onBlur:()=>r("system","isDirty",!0)}),f,v),a(w,t(Ze,{label:"Anzahl Mitspielende (Minimum)",name:"playerCountMin",get value(){return e.playerCount.min.value},onValueUpdate:S=>r("playerCount","min","value",S),onBlur:()=>r("playerCount","min","isDirty",!0),min:1,get max(){return e.playerCount.max.value}}),p,T),a(w,t(Ze,{label:"Anzahl Mitspielende (Maximum)",name:"playerCountMax",get value(){return e.playerCount.max.value},onValueUpdate:S=>r("playerCount","max","value",S),onBlur:()=>r("playerCount","max","isDirty",!0),get min(){return e.playerCount.min.value}}),R,Se),a(l,t(je,{label:"kurze Beschreibung",name:"descriptionShort",get value(){return e.description.short.value},onValueUpdate:S=>r("description","short","value",S),onBlur:()=>r("description","short","isDirty",!0),size:"sm"}),ie,fe),a(l,t(U,{get when(){return i().descriptionShortMissing&&e.description.short.isDirty},get children(){return t(N,{type:"danger",get children(){return C.mandatoryField}})}}),le,be),a(l,t(U,{get when(){return i().descriptionShortTooLong&&e.description.short.isDirty},get children(){return t(N,{type:"danger",get children(){return C.charLimitBy.replace("{}",String(Ge))}})}}),V,ye),a(l,t(je,{label:"lange Beschreibung (optional)",name:"descriptionLong",get value(){return e.description.long.value},onValueUpdate:S=>r("description","long","value",S),onBlur:()=>r("description","long","isDirty",!0)}),ae,ke),a(l,t(U,{get when(){return i().descriptionLongTooLong&&e.description.long.isDirty},get children(){return t(N,{type:"danger",get children(){return C.charLimitBy.replace("{}",String(He))}})}}),se,oe),a(Z,t(Rt,{get slots(){return n.store.slots},addTimeSlot:S=>r("slots",e.slots.concat(S)),removeTimeSlot:S=>r("slots",e.slots.filter(G=>G.from!==S.from||G.to!==S.to||G.day!==S.day))}),ce,Te),a(Z,t(U,{get when(){return i().slotMissing},get children(){return[o(Ke),o(Ke),t(N,{type:"danger",children:"Wähle mindestens einen Zeitslot aus."})]}}),de,we),a(Ne,t(W,{each:tn,children:S=>t(Cn,{get label(){return S.label},get description(){return S.description},get checked(){return e.tagNames.includes(S.name)},get name(){return S.name},get value(){return S.name},onValueUpdate:G=>{G?r("tagNames",e.tagNames.concat([S.name])):r("tagNames",e.tagNames.filter(Pe=>Pe!==S.name))}})})),a(l,t(U,{get when(){return i().hasErrors},get children(){return t(N,{type:"danger",get children(){return[o(mt),"Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde (siehe oben). Du kannst die Spielrunde als Entwurf speichern und später vervollständigen. Die Spielrunde wird erst veröffentlicht, wenn alle Informationen komplett sind.",(()=>{var S=o($t);return a(S,t(E,{kind:"success",label:"Spielrunde als Entwurf speichern",onClick:()=>{n.createNewGame(),n.changePage({kind:"GAMEMASTER"})}})),S})()]}})}}),me,De),a(K,t(E,{kind:"danger",label:"Abbrechen",onClick:()=>n.changePage({kind:"GAMEMASTER"})}),P,z),a(K,t(E,{type:"submit",get kind(){return i().hasErrors?"gray":"success"},get disabled(){return i().hasErrors},label:"Spielrunde erstellen"}),Q,Me),l}})}const Je=1;function Tt(n){function e(r){const i=Ve(r.open,!0);return r.breaks.map(l=>Ve(l,!0)).reduce((l,c)=>{const g=c.at(0),m=c.at(-1);if(g===void 0||m===void 0)return l;const _=[];return l.forEach(b=>{const x=[],k=[];b.forEach(f=>{f<=g&&x.push(f),m<=f&&k.push(f)}),x.length>0&&_.push(x),k.length>0&&_.push(k)}),_},[i]).map(l=>{const c=l.slice(0,Je*-1);return mn(c.map(g=>{const m=l.filter(_=>_>=g+Je);return[g,m]}))}).reduce((l,c)=>({...l,...c}),{})}return{SATURDAY:e(n.SATURDAY),SUNDAY:e(n.SUNDAY)}}function wt(n){const{SATURDAY:e,SUNDAY:r}=Object.groupBy(n,i=>i.day);return{SATURDAY:e??[],SUNDAY:r??[]}}function Rt(n){const e=Tt(gt),{SATURDAY:r,SUNDAY:i}=wt(n.slots);return[t(Nt,{daySections:e,get chooseTimeSlot(){return n.addTimeSlot}}),t(U,{get when(){return r.length>0},get children(){return[o(_t),(()=>{var u=o(Qe);return a(u,t(W,{each:r,children:l=>t(E,{get label(){return(()=>{var c=o(Xe),g=c.firstChild,m=g.firstChild,_=m.nextSibling,[b,x]=s(_.nextSibling),k=b.nextSibling,f=k.nextSibling,[v,w]=s(f.nextSibling);v.nextSibling;var I=g.nextSibling,[p,T]=s(I.nextSibling);return a(g,()=>l.from,b,x),a(g,()=>l.to,v,w),a(c,t(D,{icon:"trash",style:"color: var(--clr-danger-11);"}),p,T),c})()},kind:"gray",onClick:()=>n.removeTimeSlot({day:"SATURDAY",from:l.from,to:l.to})})})),u})()]}}),t(U,{get when(){return i.length>0},get children(){return[o(St),(()=>{var u=o(Qe);return a(u,t(W,{each:i,children:l=>t(E,{get label(){return(()=>{var c=o(Xe),g=c.firstChild,m=g.firstChild,_=m.nextSibling,[b,x]=s(_.nextSibling),k=b.nextSibling,f=k.nextSibling,[v,w]=s(f.nextSibling);v.nextSibling;var I=g.nextSibling,[p,T]=s(I.nextSibling);return a(g,()=>l.from,b,x),a(g,()=>l.to,v,w),a(c,t(D,{icon:"trash",style:"color: var(--clr-danger-11);"}),p,T),c})()},kind:"gray",onClick:()=>n.removeTimeSlot({day:"SUNDAY",from:l.from,to:l.to})})})),u})()]}})]}function Nt(n){const[e,r]=te({kind:"INITIAL"});return t(he,{get children(){return[t(M,{get when(){return e.kind==="INITIAL"},get children(){return t(E,{kind:"success",get label(){return(()=>{var i=o(yt),u=i.firstChild,[l,c]=s(u.nextSibling);return l.nextSibling,a(i,t(D,{icon:"circle-plus"}),l,c),i})()},onClick:()=>r({kind:"CHOOSE_DAY"})})}}),t(M,{get when(){return e.kind==="CHOOSE_DAY"},get children(){return t(N,{onClose:()=>r({kind:"INITIAL"}),get children(){var i=o(pt);return a(i,t($e,{changeDay:u=>r({kind:"CHOOSE_START",day:u})})),i}})}}),t(M,{get when(){return e.kind==="CHOOSE_START"},get children(){return t(N,{onClose:()=>r({kind:"INITIAL"}),get children(){var i=o(ft),u=i.firstChild,[l,c]=s(u.nextSibling),g=l.nextSibling,[m,_]=s(g.nextSibling);return a(i,t($e,{get chosenDay(){return e.kind==="CHOOSE_START"?e.day:void 0},changeDay:b=>r({kind:"CHOOSE_START",day:b})}),l,c),a(i,t(Fe,{get startTimes(){return Y(()=>e.kind==="CHOOSE_START")()?Ie(n.daySections[e.day]):[]},changeStart:b=>r({kind:"CHOOSE_END",start:b})}),m,_),i}})}}),t(M,{get when(){return e.kind==="CHOOSE_END"},get children(){return t(N,{onClose:()=>r({kind:"INITIAL"}),get children(){var i=o(bt),u=i.firstChild,[l,c]=s(u.nextSibling),g=l.nextSibling,[m,_]=s(g.nextSibling),b=m.nextSibling,[x,k]=s(b.nextSibling);return a(i,t($e,{get chosenDay(){return e.kind==="CHOOSE_END"?e.day:void 0},changeDay:f=>r({kind:"CHOOSE_START",day:f})}),l,c),a(i,t(Fe,{get chosenStart(){return e.kind==="CHOOSE_END"?e.start:void 0},get startTimes(){return Y(()=>e.kind==="CHOOSE_END")()?Ie(n.daySections[e.day]):[]},changeStart:f=>r({kind:"CHOOSE_END",start:f})}),m,_),a(i,t(en,{get endTimes(){return e.kind==="CHOOSE_END"?n.daySections[e.day][e.start]??[]:[]},changeEnd:f=>{e.kind==="CHOOSE_END"&&r({kind:"WAIT_FOR_CONFIRMATION",day:e.day,start:e.start,end:f})}}),x,k),i}})}}),t(M,{get when(){return e.kind==="WAIT_FOR_CONFIRMATION"},get children(){return t(N,{onClose:()=>r({kind:"INITIAL"}),get children(){var i=o(vt),u=i.firstChild,[l,c]=s(u.nextSibling),g=l.nextSibling,[m,_]=s(g.nextSibling),b=m.nextSibling,[x,k]=s(b.nextSibling),f=x.nextSibling;return a(i,t($e,{get chosenDay(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.day:void 0},changeDay:v=>r({kind:"CHOOSE_START",day:v})}),l,c),a(i,t(Fe,{get chosenStart(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.start:void 0},get startTimes(){return Y(()=>e.kind==="WAIT_FOR_CONFIRMATION")()?Ie(n.daySections[e.day]):[]},changeStart:v=>r({kind:"CHOOSE_END",start:v})}),m,_),a(i,t(en,{get chosenEnd(){return e.kind==="WAIT_FOR_CONFIRMATION"?e.end:void 0},get endTimes(){return e.kind==="WAIT_FOR_CONFIRMATION"?n.daySections[e.day][e.start]??[]:[]},changeEnd:v=>{e.kind==="WAIT_FOR_CONFIRMATION"&&r({kind:"WAIT_FOR_CONFIRMATION",day:e.day,start:e.start,end:v})}}),x,k),a(f,t(E,{get label(){return`Slot "${e.kind==="WAIT_FOR_CONFIRMATION"?`${C.days[e.day]}, von ${e.start} bis ${e.end} Uhr`:""}" erstellen`},kind:"success",onClick:()=>{e.kind==="WAIT_FOR_CONFIRMATION"&&(n.chooseTimeSlot({day:e.day,from:e.start,to:e.end}),r({kind:"INITIAL"}))}})),i}})}})]}})}function $e(n){return[o(xt),(()=>{var e=o(kt),r=e.firstChild,[i,u]=s(r.nextSibling),l=i.nextSibling,[c,g]=s(l.nextSibling);return a(e,t(E,{get kind(){return n.chosenDay==="SATURDAY"?"success":"gray"},label:"Samstag",onClick:()=>n.changeDay("SATURDAY")}),i,u),a(e,t(E,{get kind(){return n.chosenDay==="SUNDAY"?"success":"gray"},label:"Sonntag",onClick:()=>n.changeDay("SUNDAY")}),c,g),e})()]}function Fe(n){return[o(Ct),(()=>{var e=o(rn);return a(e,t(W,{get each(){return n.startTimes},children:r=>t(E,{get kind(){return n.chosenStart===r?"success":"gray"},get label(){return(()=>{var i=o(ln),u=i.firstChild,[l,c]=s(u.nextSibling);return l.nextSibling,a(i,r,l,c),i})()},onClick:()=>n.changeStart(r)})})),e})()]}function en(n){return[o(Et),(()=>{var e=o(rn);return a(e,t(W,{get each(){return n.endTimes},children:r=>t(E,{get kind(){return n.chosenEnd===r?"success":"gray"},get label(){return(()=>{var i=o(ln),u=i.firstChild,[l,c]=s(u.nextSibling);return l.nextSibling,a(i,r,l,c),i})()},onClick:()=>n.changeEnd(r)})})),e})()]}var Ot=d("<h1>Edit");function Dt(){return o(Ot)}const Mt=En("kind",[h({kind:H("CHOOSE")}),h({kind:H("PLAYER")}),h({kind:H("GAMEMASTER")}),h({kind:H("NEW_GAMEROUND")}),h({kind:H("HELPING")}),h({kind:H("SUMMARY")}),h({kind:H("EDIT_GAMEROUND"),uuid:$().uuid()})]),Pt=h({page:Mt,secret:$(),showCreateMessage:ne()});function an(n){const e=n.searchParams.get("page")??"",r=n.searchParams.get("uuid")??void 0,i=n.searchParams.get("secret")??"",u=n.searchParams.get("showCreateMessage")==="true",l=Pt.safeParse({page:{kind:e.toUpperCase(),uuid:r},secret:i,showCreateMessage:u});return l.success?l.data:{page:{kind:"CHOOSE"},secret:i,showCreateMessage:u}}function It(n,e){return n.kind!==e.kind?!1:n.kind!=="EDIT_GAMEROUND"||e.kind!=="EDIT_GAMEROUND"?!0:n.uuid===e.uuid}const Ut=nn(["SATURDAY","SUNDAY"]),re=h({day:Ut,from:F(),to:F()}).refine(n=>n.from<n.to,{message:"A TimeSlot can't end before it starts."});h({name:$(),label:$(),description:$()});const L=$().transform(n=>({value:n,isDirty:!1})),_e=F().transform(n=>({value:n,isDirty:!1})),Ft=h({uuid:$().uuid(),title:$(),system:$(),description:h({short:$(),long:$()}),slots:O(re),playerCount:h({min:F().min(1),max:F()}).transform(n=>{const[e,r]=Le([n.min,n.max]);return{min:e,max:r}}),playerNames:O($()),tagNames:O($())}),Lt=h({uuid:$().uuid(),title:L,system:L,description:h({short:L,long:L}),slots:O(re),playerCount:h({min:_e,max:_e}),playerNames:O(L),tagNames:O($())}),Gt=h({title:$(),system:$(),description:h({short:$(),long:$()}),slots:O(re),playerCount:h({min:F().min(1),max:F()}).transform(n=>{const[e,r]=Le([n.min,n.max]);return{min:e,max:r}}),tagNames:O($())}),sn=h({title:L,system:L,description:h({short:L,long:L}),slots:O(re),playerCount:h({min:_e,max:_e}),tagNames:O($())});function Ht(n){return sn.parse(n)}function Ye(){return{title:"",system:"",description:{short:"",long:""},slots:[],playerCount:{min:3,max:4},tagNames:[]}}function Yt(){return Ht(Ye())}const Wt="2024-08-15T07:45:21.335Z",Bt="SAVE",Zt={uuid:crypto.randomUUID(),name:"John Doe",email:"john@doe.ch",mobile:"+41 66 123 45 67",lastSaved:Wt,playing:{wantsUpdates:!1},master:{games:[{uuid:crypto.randomUUID(),title:"Grolle in der Dunkelheit",system:"Warhammer Fantasy Rollenspiel",description:{short:"Ein kurzes Abenteuer bei dem es um Fantasy, Action und einfaches Rollenspiel geht.",long:"Eine kleine Gruppe wagt sich in die dunklen Schächten einer Mine und weiter hinab, um einen mächtigen Gegenstand wieder zu erlangen. Wie werden die Gefährten auf die Gefahren des Untergrundes reagieren und welche Gefahren lauern in der Finsternis?"},slots:[],playerCount:{min:1,max:3},playerNames:[],tagNames:["children"]}],newEditForm:Ye(),wantsHelp:!1},helping:{}};async function zt(){return Promise.resolve(on(Bt,Zt))}const jt="PROGRAM",qt={entries:[{uuid:crypto.randomUUID(),gamemaster:"Mike Hunziker",title:"Grolle in der Dunkelheit",system:"Warhammer Fantasy Rollenspiel",description:{short:"Ein kurzes Abenteuer bei dem es um Fantasy, Action und einfaches Rollenspiel geht.",long:"Eine kleine Gruppe wagt sich in die dunklen Schächten einer Mine und weiter hinab, um einen mächtigen Gegenstand wieder zu erlangen. Wie werden die Gefährten auf die Gefahren des Untergrundes reagieren und welche Gefahren lauern in der Finsternis?"},slots:[],playerCount:{min:1,max:3,reserved:0},tagNames:["children"]}]};async function Vt(){return Promise.resolve(on(jt,qt))}function on(n,e){const r=localStorage.getItem(n);return r===null?e:r}const Kt=h({wantsUpdates:ne()}),Qt=h({wantsUpdates:ne()}),Xt=h({games:O(Ft),newEditForm:An(Gt).transform(n=>n??Ye()),wantsHelp:ne()}),Jt=h({games:O(Lt),newEditForm:sn,wantsHelp:ne()}),er=h({}),nr=h({}),tr=h({uuid:$().uuid(),name:$(),email:$(),mobile:$(),lastSaved:$(),playing:Kt,master:Xt,helping:er}),rr=h({uuid:$().uuid(),name:$(),email:$(),mobile:$(),lastSaved:Tn.date(),playing:Qt,master:Jt,helping:nr});async function ir(n){if(n!=="demo")return{kind:"FAILURE"};const e=await zt(),r=tr.safeParse(e);if(!r.success)return{kind:"FAILURE"};const i=lr(r.data);return i.success?{kind:"SUCCESS",data:i.data}:{kind:"FAILURE"}}function lr(n){return rr.safeParse(n)}function ar(n){const[e,r]=te(n),i=wn(n.save.master.newEditForm);r("save","master","games",n.save.master.games.length,{...i,uuid:crypto.randomUUID(),playerNames:[]}),r("save","master","newEditForm",Yt())}var sr=d("<br>"),or=d("<pre>");function cr(n){const e=new URL(location.href);e.searchParams.set("page",n.page.kind.toLowerCase()),n.page.kind==="EDIT_GAMEROUND"&&e.searchParams.set("uuid",n.page.uuid),e.searchParams.delete("showCreateMessage"),history.replaceState({page:n},"",e);const r=C.pageTitle[n.page.kind];document.title=C.metaTitle.replace("{}",r)}function ur(n){const[e,r]=te(n.page);return(i,u)=>{if(It(i,e))return;if(!u){const c=new URL(location.href);c.searchParams.set("page",i.kind.toLowerCase()),i.kind==="EDIT_GAMEROUND"&&c.searchParams.set("uuid",i.uuid),history.pushState({page:i},"",c)}const l=C.pageTitle[i.kind];document.title=C.metaTitle.replace("{}",l),r(i),window.scrollTo({top:0})}}function dr(n){cr(n.meta);const[e]=te({meta:n.meta,save:n.save}),r=ur(e.meta);return window.addEventListener("popstate",i=>{if(typeof i=="object"&&i!==null&&"state"in i){const u=new URL(location.href),l=an(u);r(l.page,!0)}}),[t(U,{get when(){return e.meta.showCreateMessage},get children(){return[t(N,{type:"success",get children(){return C.registrationStarted}}),o(sr)]}}),t(he,{get fallback(){return t(dt,{changePage:r})},get children(){return[t(M,{get when(){return e.meta.page.kind==="PLAYER"},get children(){return t(tt,{changePage:r})}}),t(M,{get when(){return e.meta.page.kind==="GAMEMASTER"},get children(){return t(Jn,{get store(){return e.save.master},changePage:r})}}),t(M,{get when(){return e.meta.page.kind==="NEW_GAMEROUND"},get children(){return t(At,{get store(){return e.save.master.newEditForm},changePage:r,createNewGame:()=>ar(e)})}}),t(M,{get when(){return e.meta.page.kind==="EDIT_GAMEROUND"},get children(){return t(Dt,{})}}),t(M,{get when(){return e.meta.page.kind==="HELPING"},get children(){return t(Bn,{changePage:r})}}),t(M,{get when(){return e.meta.page.kind==="SUMMARY"},get children(){return t(Yn,{changePage:r})}})]}}),(()=>{var i=o(or);return a(i,()=>JSON.stringify(e,null,2)),i})()]}const gr=h({uuid:$().uuid(),gamemaster:$(),title:$(),system:$(),description:h({short:$(),long:$()}),slots:O(re),playerCount:h({min:F().min(1),max:F(),reserved:F()}).transform(n=>{const[e,r]=Le([n.min,n.max]),i=Math.min(r,n.reserved);return{min:e,max:r,reserved:i}}),tagNames:O($())}),cn=h({entries:O(gr)}),mr=cn;async function $r(n){if(n!=="demo")return{kind:"FAILURE"};const e=await Vt(),r=cn.safeParse(e);if(!r.success)return{kind:"FAILURE"};const i=hr(r.data);return i.success?{kind:"SUCCESS",data:i.data}:{kind:"FAILURE"}}function hr(n){return mr.safeParse(n)}function un(){return t(N,{get children(){return C.loading}})}function xr(){const[n,e]=vn(null);return yn(()=>{const r=new URL(location.href);e(an(r))}),t(U,{get fallback(){return t(un,{})},get when(){return n()},children:r=>t(_r,{get page(){return r()}})})}function _r(n){const[e]=ze(()=>ir(n.page.secret)),[r]=ze(()=>$r(n.page.secret));return t(kn,{fallback:i=>t(N,{type:"danger",get children(){return t(he,{get fallback(){return C.error.general},get children(){return t(M,{get when(){return i.message==="SECRET_ERROR"},get children(){return C.error.secretError}})}})}}),get children(){return t(xn,{get fallback(){return t(un,{})},get children(){return t(he,{get children(){return t(M,{get when(){return e()},children:i=>{const{kind:u,value:l}=$n(i());return u==="FAILURE"?t(N,{type:"danger",get children(){return C.error.ourMistake}}):t(dr,{get meta(){return n.page},get save(){return l.data},programResource:r})}})}})}})}})}export{xr as MeineAnmeldungWrapper};
