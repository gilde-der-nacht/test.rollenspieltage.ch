import{d as B,g as h,t as D,i as v,c as S,s as F,a as R,b as T,r as C,m as H,o as j,e as N,f as e,u as z,h as k,S as o,F as M,j as V,M as I}from"./web.BjTvGrE2.js";import{e as J,I as P,B as E,a as K}from"./utils.DcyIDn4M.js";var Q=D("<button>");function X(t){return(()=>{var n=h(Q);return n.$$click=()=>t.onClick?.(),v(n,()=>t.label),S(u=>{var f=t.type??"button",i=`button-${t.kind??(t.disabled?"gray":"accent")}`,l=t.disabled===!0;return f!==u.e&&F(n,"type",u.e=f),i!==u.t&&R(n,u.t=i),l!==u.a&&T(n,"disabled",u.a=l),u},{e:void 0,t:void 0,a:void 0}),C(),n})()}B(["click"]);var Y=D("<form method=post><!$><!/><!$><!/>");function Z(t){const n=H({language:"de",submitLabel:t.language==="en"?"Submit":"Absenden"},t);let u;j(()=>{u.setAttribute("novalidate",""),[...u.querySelectorAll('input[name^="redirect"][type="hidden"]')].forEach(l=>l.remove())});async function f(i){const{target:l}=i;if(l!==null&&l instanceof HTMLFormElement){i.preventDefault();const c=new FormData(l);if(!n.isValid(c))return;try{const s=await fetch(n.actionUrl,{method:"post",body:c});s.ok?n.onSuccess():n.onError(await s.text())}catch(s){n.onError(s)}}}return(()=>{var i=h(Y),l=i.firstChild,[c,s]=N(l.nextSibling),$=c.nextSibling,[b,p]=N($.nextSibling),w=u;return typeof w=="function"?z(w,i):u=i,i.addEventListener("submit",f),v(i,()=>n.children,c,s),v(i,e(X,{type:"submit",get label(){return n.submitLabel}}),b,p),S(()=>F(i,"action",n.actionUrl.href)),i})()}var ee=D("<label><!$><!/><textarea>");function te(t){const n=H({required:!0},t);return(()=>{var u=h(ee),f=u.firstChild,[i,l]=N(f.nextSibling),c=i.nextSibling;return v(u,()=>n.label,i,l),c.$$input=s=>n.onValueUpdate(s.target.value),S(s=>{var $=n.name,b=n.label,p=n.required;return $!==s.e&&F(c,"name",s.e=$),b!==s.t&&F(c,"placeholder",s.t=b),p!==s.a&&T(c,"required",s.a=p),s},{e:void 0,t:void 0,a:void 0}),S(()=>T(c,"value",n.value)),C(),u})()}B(["input"]);var ne=D("<input type=hidden>");function _(t){return(()=>{var n=h(ne);return S(()=>F(n,"name",t.name)),S(()=>T(n,"value",t.value)),n})()}var q=D("<br>"),L=D("<p>");function A(){return{name:"",email:"",captcha:"",message:""}}function U(){return{name:[],email:[],captcha:[],message:[]}}const re=J("/forms");function ie(t){const n="Name",u=t.language!=="en"?"E-Mail":"Email",f=t.language!=="en"?"Bitte leer lassen":"leave this field empty",i=t.language!=="en"?"Nachricht":"Message",[l,c]=k(A());let s;const[$,b]=k(!1),[p,w]=k(!1);function O(){w(!1),c(A()),b(!0)}function W(r){b(!1),w(!0),console.error(r)}const[m,y]=k(U());function x(r){return a=>{w(!1),y(U()),c(d=>({...d,[r]:a}))}}function G(r){y(U());const a=t.language==="en";if(l().name.trim().length===0){const d=a?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";y(g=>({...g,name:[...g.name,d]}))}if(l().email.trim().length===0){const d=a?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";y(g=>({...g,email:[...g.email,d]}))}if(s.validity.typeMismatch){const d=a?"The input does not seem to be a valid email address.":"Die Eingabe scheint keine gÃ¼ltige E-Mail-Adresse zu sein.";y(g=>({...g,email:[...g.email,d]}))}if(l().captcha.trim().length>0){const d=a?"This is field must be empty.":"Dieses Feld muss leer bleiben.";y(g=>({...g,captcha:[...g.captcha,d]}))}if(l().message.trim().length===0){const d=a?"This is a mandatory field.":"Dies ist ein Pflichtfeld.";y(g=>({...g,message:[...g.message,d]}))}return m().name.length===0&&m().email.length===0&&m().captcha.length===0&&m().message.length===0}return[e(Z,{actionUrl:re,get language(){return t.language??"de"},isValid:G,onSuccess:O,onError:W,get children(){return[e(P,{label:n,name:"private-name",get value(){return l().name},get onValueUpdate(){return x("name")}}),e(o,{get when(){return m().name.length>0},get children(){return e(E,{type:"danger",get children(){return e(M,{get each(){return m().name},children:r=>(()=>{var a=h(L);return v(a,r),a})()})}})}}),e(K,{label:u,name:"private-email",type:"email",get value(){return l().email},get onValueUpdate(){return x("email")},ref(r){var a=s;typeof a=="function"?a(r):s=r}}),e(o,{get when(){return m().email.length>0},get children(){return e(E,{type:"danger",get children(){return e(M,{get each(){return m().email},children:r=>(()=>{var a=h(L);return v(a,r),a})()})}})}}),e(P,{label:f,name:"private-captcha",type:"email",required:!1,isHoneypot:!0,get value(){return l().captcha},get onValueUpdate(){return x("captcha")}}),e(o,{get when(){return m().captcha.length>0},get children(){return e(E,{type:"danger",get children(){return e(M,{get each(){return m().captcha},children:r=>(()=>{var a=h(L);return v(a,r),a})()})}})}}),e(te,{label:i,name:"private-message",get value(){return l().message},get onValueUpdate(){return x("message")}}),e(o,{get when(){return m().message.length>0},get children(){return e(E,{type:"danger",get children(){return e(M,{get each(){return m().message},children:r=>(()=>{var a=h(L);return v(a,r),a})()})}})}}),e(o,{get when(){return t.language},children:r=>e(_,{name:"language",get value(){return r()}})}),e(o,{get when(){return t.category},children:r=>e(_,{name:"category",get value(){return r()}})}),e(o,{get when(){return t.referer},children:r=>e(_,{name:"referer",get value(){return r().href}})}),e(o,{get when(){return t.redirectOnSuccess},children:r=>e(_,{name:"redirect-on-success",get value(){return r().href}})}),e(o,{get when(){return t.redirectOnFailure},children:r=>e(_,{name:"redirect-on-failure",get value(){return r().href}})}),e(o,{get when(){return t.redirectOnSpam},children:r=>e(_,{name:"redirect-on-spam",get value(){return r().href}})})]}}),e(o,{get when(){return p()},get children(){return[h(q),e(E,{type:"danger",get children(){return e(V,{fallback:"Leider konnten wir die Nachricht nicht absenden. Bitte versuche es erneut.",get children(){return e(I,{get when(){return t.language==="en"},children:"There was a problem sending your message. Please try again."})}})}})]}}),e(o,{get when(){return $()},get children(){return[h(q),e(E,{type:"success",get children(){return e(V,{fallback:"Nachricht wurde erfolgreich gesendet.",get children(){return e(I,{get when(){return t.language==="en"},children:"Message successfully sent."})}})}})]}})]}export{ie as ContactFormImpl};
