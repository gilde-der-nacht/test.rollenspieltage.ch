import{I as xe,a as Ln,B as A,b as Nn,T as On,s as f,n as se,e as ht,c as ue,d as Rt,f as Z,g as re,S as ot,o as k,h as ne,i as Fn,j as ln,k as Oe,l as Ct,m as Pn,p as an,q as Ke,r as U,t as He,u as Ge,v as In,w as Mn,x as sn,y as Hn,z as Gn}from"./utils.H5K_LmZM.js";import{c as Ft,g as o,a as c,u as Yn,i as s,b as i,S as E,d as le,e as _e,t as h,F as ie,M as T,f as fe,s as wt,h as et,j as mt,k as $t,m as w,l as Pt,n as Le,r as St,o as lt,p as qe,q as dn,E as Bn}from"./web.DeeAupxM.js";/* empty css                                 */import{c as N,u as Je}from"./store.3aW66RYn.js";var zn=h("<dialog closedby=any><!$><!/><!$><!/><!$><!/>"),jn=h("<h4>");function pe(e=!1){return{open:e}}function Ee(e){let t;const[n,r]=N(e.store);Ft(()=>{n.open?t.showModal():t.close()});function a(){r({open:!1}),e.onClose?.()}const l=()=>{const d=[];return e.type!==void 0&&d.push(e.type),e.size!==void 0&&d.push(e.size),e.onClose!==void 0&&d.push("dialog-with-close"),d};return(()=>{var d=o(zn),g=d.firstChild,[u,m]=c(g.nextSibling),$=u.nextSibling,[_,S]=c($.nextSibling),b=_.nextSibling,[y,v]=c(b.nextSibling);d.addEventListener("close",a);var x=t;return typeof x=="function"?Yn(x,d):t=d,s(d,i(E,{get when(){return e.onClose},get children(){return i(xe,{onClick:a,icon:"circle-xmark",kind:"gray"})}}),u,m),s(d,i(E,{get when(){return e.title},children:R=>(()=>{var L=o(jn);return s(L,R),L})()}),_,S),s(d,()=>e.children,y,v),le(()=>_e(d,l().join(" "))),d})()}var It=h("<p>");function Xe(e){const[t,n]=N(e.store),r=e.showErrors==="ALWAYS",a=()=>r||t.isDirty?e.errors??[]:[];return[i(Ln,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:l=>n("value",l),onBlur:()=>n("isDirty",!0),get type(){return e.type},get required(){return e.required},get isHoneypot(){return e.isHoneypot},get disabled(){return e.disabled}}),i(E,{get when(){return a().length>0},get children(){return i(A,{type:"danger",get children(){return i(ie,{get each(){return a()},children:l=>(()=>{var d=o(It);return s(d,l),d})()})}})}})]}function Yt(e){const[t,n]=N(e.store),r=e.showErrors==="ALWAYS",a=()=>r||t.isDirty?e.errors??[]:[];return[i(Nn,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:l=>n("value",l),onBlur:()=>n("isDirty",!0),get required(){return e.required},get isHoneypot(){return e.isHoneypot},get min(){return e.min},get max(){return e.max},get disabled(){return e.disabled}}),i(E,{get when(){return a().length>0},get children(){return i(A,{type:"danger",get children(){return i(ie,{get each(){return a()},children:l=>(()=>{var d=o(It);return s(d,l),d})()})}})}})]}function Nt(e){const[t,n]=N(e.store),r=e.showErrors==="ALWAYS",a=()=>r||t.isDirty?e.errors??[]:[];return[i(On,{get label(){return e.label},get name(){return e.name},get value(){return t.value},onValueUpdate:l=>n("value",l),onBlur:()=>n("isDirty",!0),get required(){return e.required},get size(){return e.size},get disabled(){return e.disabled}}),i(E,{get when(){return a().length>0},get children(){return i(A,{type:"danger",get children(){return i(ie,{get each(){return a()},children:l=>(()=>{var d=o(It);return s(d,l),d})()})}})}})]}var Bt=h("<br>"),Wn=h("<strong>Donnerstag, 21. August 2025"),Kn=h("<p>Deine Anmeldung wird geladen..."),Zn=h("<p>Das Programm wird geladen..."),Vn=h("<p>Leider ist ein unerwarteter Fehler passiert. Versuche deine Anmeldung erneut zu laden. Wiederholt sich dieser Fehler, bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>, da dies nicht passieren sollte."),qn=h("<p>Wir konnten leider keine Anmeldung finden. Wenn du bereits eine Anmeldung begonnen hast, solltest du den korrekten Link per E-Mail erhalten haben.<br><br> Falls du noch keine Anmeldung begonnen hast, kannst du <a href=/anmeldung>hier</a> deine persönliche Anmeldung beginnen. <br><br>Für generelle Fragen oder Probleme, schreibe uns doch bitte über unser <a href=/kontatk>Kontaktformular</a>."),Jn=h("<p>Wir konnten leider keine Spielrunde unter diesem Link finden.<br><br>Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das "),Qn=h("<p>Leider ist ein unerwarteter Fehler passiert. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),Xn=h("<p>Leider ist ein unerwarteter Fehler passiert beim Laden des Programmes. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>."),ei=h("<p>Leider ist ein unerwarteter Fehler passiert beim Laden von Daten. Vermutlich liegt es an uns. Bitte kontaktiere uns sobald als möglich über das <a href=/kontakt>Kontaktformular</a>.");const ti=["Deine Anmeldung wurde erfolgreich gestartet.",o(Bt),o(Bt),"Wir haben eine E-Mail an deine Adresse gesendet. In dieser E-Mail findest du einen persönlichen Link, um deine Anmeldung bis am"," ",o(Wn)," anzupassen."],ni={registration:o(Kn),program:o(Zn)},ii={general:o(Vn),secretError:o(qn),gameroundUuidError:o(Jn),ourMistake:o(Qn),program:o(Xn),help:o(ei)},ri="Neue Spielrunde erstellen",li="Meine Spielrunden",ai="Titel fehlt",si="kein System angegeben",di="kein Zeitslot ausgewählt",oi="keine Kategorien ausgewählt",ui="Kurzbeschreibung fehlt",ci="Die Eingabe scheint keine gültige E-Mail-Adresse zu sein.",gi="Dies ist ein Pflichtfeld.",hi="Dieses Feld ist auf {} Zeichen limitiert.",mi="Findest du, es gäbe noch weitere hilfreiche Kategorien? Schreibe uns deinen Vorschlag per Kontaktformular.",$i={SATURDAY:"Samstag",SUNDAY:"Sonntag"},Si={CHOOSE:"Übersicht",PLAYER:"Spielanmeldung",GAME:"Spielanmeldung",GAMEMASTER:"Spielleitung",EDIT_GAMEROUND:"Spielrunde editieren",HELPING:"Helfen","HELPING-SLOT":"Helfen",SUMMARY:"Zusammenfassung"},bi={draft:"Entwurf",published:"Veröffentlicht",archived:"Gelöscht"},_i="Meine Anmeldung: {} | Luzerner Rollenspieltage",p={registrationStarted:ti,loading:ni,error:ii,createNewGameRound:ri,myGameRounds:li,missingTitle:ai,missingSystem:si,missingSlot:di,missingTags:oi,missingShortDescription:ui,invalidEmail:ci,mandatoryField:gi,charLimitBy:hi,tagIdeas:mi,days:$i,pageTitle:Si,publishingSteps:bi,metaTitle:_i},at=f().transform(e=>({value:e,isDirty:!1}));function At(e){return{value:e,isDirty:!1}}const zt=se().transform(e=>({value:e,isDirty:!1})),Ne={SATURDAY:{open:{from:10,to:24},breaks:[{from:13,to:14},{from:18,to:19}]},SUNDAY:{open:{from:10,to:18},breaks:[{from:13,to:14}]}};ht(["SATURDAY","SUNDAY"]);function st(e,t){const{from:n,to:r}=t;return n<e&&e<r}function fi(e,t){const{from:n,to:r}=e,{from:a,to:l}=t;return st(n,t)||st(r,t)||st(a,e)||st(l,e)||n===a&&r===l}function tt(e,t=!1){const{from:n,to:r}=e;if(n>r)return[];const a=r-n;return Mt(t?a+1:a,n)}function Mt(e,t=0){return[...Array(e)].map((n,r)=>r+t)}function vi(e,t){return e===null?-1:t===null?1:e.day==="SATURDAY"&&t.day==="SUNDAY"?-1:e.day==="SUNDAY"&&t.day==="SATURDAY"?1:e.from===t.from?e.to-t.to:e.from-t.from}var ki=h("<div class=dynamic-columns style=gap:1rem;--min-width:30rem><!$><!/><!$><!/>"),yi=h("<div><h4 style=margin-block-end:1.5rem></h4><!$><!/>"),pi=h("<p>Konflikte gefunden! Bitte stelle sicher, dass du nicht zeitlich überlappende Spielrunden eingetragen hast:"),xi=h('<div style="display:grid;grid-template-columns:1fr max-content 1fr;gap:1rem;margin-block:0.5rem"><!$><!/><span style=color:var(--clr-warning-10);align-self:center;font-size:2rem></span><!$><!/>'),Ei=h("<div><!$><!/><div class=entries></div><div class=after-hour><div class=annotation>"),Ri=h("<div><div class=annotation></div><div class=background>"),Ci=h("<div class=entry>");function on(e){return(()=>{var t=o(ki),n=t.firstChild,[r,a]=c(n.nextSibling),l=r.nextSibling,[d,g]=c(l.nextSibling);return s(t,i(jt,{get programEntries(){return e.programEntries.SATURDAY},get openingHours(){return Ne.SATURDAY},day:"SATURDAY",get conflictsAllowed(){return e.conflictsAllowed??!1}}),r,a),s(t,i(jt,{get programEntries(){return e.programEntries.SUNDAY},get openingHours(){return Ne.SUNDAY},day:"SUNDAY",get conflictsAllowed(){return e.conflictsAllowed??!1}}),d,g),t})()}function jt(e){const t=e.conflictsAllowed?[]:Ai(e.programEntries);return(()=>{var n=o(yi),r=n.firstChild,a=r.nextSibling,[l,d]=c(a.nextSibling);return s(r,()=>p.days[e.day]),s(n,i(fe,{get fallback(){return[i(A,{type:"danger",get children(){return o(pi)}}),i(ie,{each:t,children:([g,u])=>(()=>{var m=o(xi),$=m.firstChild,[_,S]=c($.nextSibling),b=_.nextSibling,y=b.nextSibling,[v,x]=c(y.nextSibling);return s(m,()=>g.component(),_,S),s(b,i(ue,{icon:"triangle-exclamation"})),s(m,()=>u.component(),v,x),m})()})]},get children(){return i(T,{get when(){return t.length===0},get children(){return i(wi,{get programEntries(){return e.programEntries},get openingHours(){return e.openingHours},get day(){return e.day},get conflictsAllowed(){return e.conflictsAllowed}})}})}}),l,d),n})()}function wi(e){const t=tt(e.openingHours.open),n=e.openingHours.breaks.map(({from:d})=>d),r=(t[0]??0)-1,a=t.at(-1)??0,l=()=>{const d=["timetable"];return e.conflictsAllowed&&d.push("two-columns"),d.join(" ")};return(()=>{var d=o(Ei),g=d.firstChild,[u,m]=c(g.nextSibling),$=u.nextSibling,_=$.nextSibling,S=_.firstChild;return s(d,i(ie,{each:t,children:b=>{const y=n.includes(b);return(()=>{var v=o(Ri),x=v.firstChild;return _e(v,`hour ${y?"break":""}`),s(x,b),le(R=>wt(v,Wt({from:b,to:b},r,e.day),R)),v})()}}),u,m),s($,i(ie,{get each(){return e.programEntries},children:b=>(()=>{var y=o(Ci);return s(y,()=>b.component()),le(v=>wt(y,Wt(b.range,r,e.day),v)),y})()})),s(S,a+1),le(b=>{var y=l(),v=`grid-row: 1 / ${a-r+1};`;return y!==b.e&&_e(d,b.e=y),b.t=wt($,v,b.t),b},{e:void 0,t:void 0}),d})()}function Wt(e,t,n){const{from:r,to:a}=e,l=r-t,d=a-t,g=Ne[n].open.to;return Rt(l>0,`Entry can't start at ${r}.`),Rt(d>0,`Entry can't end at ${a}.`),Rt(a<=g,`Entry can't end at ${a}.`),`grid-row: ${l} / ${d};`}function Ai(e){const t=[];return e.forEach((n,r)=>{e.slice(r+1).forEach(a=>{fi(n.range,a.range)&&t.push([n,a])})}),t}var Ui=h("<span>");function ut(e){const t=()=>{const n=["chip"];return n.push(e.kind??"gray"),e.inverted&&n.push("inverted"),e.size==="small"&&n.push("small"),n.join(" ")};return(()=>{var n=o(Ui);return s(n,()=>e.children),le(r=>{var a=t(),l=e.title;return a!==r.e&&_e(n,r.e=a),l!==r.t&&et(n,"title",r.t=l),r},{e:void 0,t:void 0}),n})()}const nt={kitchen:{title:"Küche",description:"Mahlzeit vorbereiten, unterstützen beim Kochen und Abwaschen."},service:{title:"Essensausgabe",description:""},cleaning:{title:"Reinigung",description:"Unterstützen beim Küche aufräumen und putzen."},kiosk:{title:"Kiosk",description:"Am Kiosk Getränke (inkl. Kaffee) und Snacks verkaufen."}},ct={SATURDAY:{10:[{uuid:"90178258-734d-4c7d-9df0-891f6d46a5dc",count:1,kind:"kiosk"},{uuid:"9ebca7e9-f44a-4cc9-8961-73539f17d5d6",count:1,kind:"kitchen"}],11:[{uuid:"690037d9-bd4f-407c-b202-d0dd71d775d2",count:1,kind:"kiosk"},{uuid:"804c379d-c747-4d7c-9f0c-a53f8548216e",count:1,kind:"kitchen"}],12:[{uuid:"bfec6f59-14eb-45b9-a21c-d33ee2205b64",count:1,kind:"kiosk"},{uuid:"97507994-efa1-4e38-9191-3034f77005ad",count:2,kind:"kitchen"}],13:[{uuid:"8db23dfd-616e-4f1d-9a07-deb6e519d35a",count:2,kind:"service"}],14:[{uuid:"a155bb61-d1a6-4f3f-8da3-46eb57030a96",count:1,kind:"kiosk"},{uuid:"9faf0a19-45be-4968-9eb0-a9f48e94a616",count:1,kind:"cleaning"}],15:[{uuid:"30c6d6ea-3d65-4040-9dde-abb5f4b58e35",count:1,kind:"kiosk"}],16:[{uuid:"f70d01f6-cba3-4e3a-be3e-7cdea2cbdb4b",count:1,kind:"kiosk"},{uuid:"210e67fe-541e-48bc-a515-d0f5cac12c0b",count:1,kind:"kitchen"}],17:[{uuid:"8cdc6efb-d0ff-4a8e-8130-700d2284d2e1",count:1,kind:"kiosk"},{uuid:"40ad7820-f4cd-4c8b-914a-203f4cc7b00a",count:2,kind:"kitchen"}],18:[{uuid:"d4eac28b-130b-4a8e-ad5f-8aee57c2d4d8",count:2,kind:"service"}],19:[{uuid:"6fd5ef92-5bb3-4f1a-8673-e81596e53894",count:1,kind:"kiosk"},{uuid:"6333be4b-93d9-40c4-8167-dca4f9bb87e1",count:1,kind:"cleaning"}],20:[{uuid:"037c19be-79b5-4f94-967d-ffdf9e8c4cd0",count:1,kind:"kiosk"}],21:[{uuid:"ce9d82b2-7633-4741-ae58-c96872ffd6bd",count:1,kind:"kiosk"}]},SUNDAY:{10:[{uuid:"ff91d0b8-8bf3-4390-be69-3097d94b7ff0",count:1,kind:"kiosk"}],11:[{uuid:"f19c658b-5ad3-4c6a-b344-a2e6756385d9",count:1,kind:"kiosk"},{uuid:"ca76897c-844d-4be4-9f5f-8e22e04ee0af",count:1,kind:"kitchen"}],12:[{uuid:"21d3be63-10a6-4165-8203-b4d202d78718",count:1,kind:"kiosk"},{uuid:"90dfe7c7-1742-4bbf-8f83-cdf6b149af2e",count:2,kind:"kitchen"}],13:[{uuid:"9d189005-d51b-4fa8-81f1-22e5110fe684",count:2,kind:"service"}],14:[{uuid:"01fef159-e93c-4066-9a79-85ba7333dd02",count:1,kind:"kiosk"},{uuid:"1196df90-15a5-4c2b-b30e-722c868ebead",count:1,kind:"cleaning"}],15:[{uuid:"aef187b1-97f8-4607-844c-79c1404a3796",count:1,kind:"kiosk"}],16:[{uuid:"cd1077c1-8fea-42de-a769-32b255f89070",count:1,kind:"kiosk"}],17:[{uuid:"1231cecf-7aeb-45e7-b0dc-af8641ecdd94",count:1,kind:"kiosk"}]}};function un(e){return Kt("SATURDAY",ct.SATURDAY).concat(Kt("SUNDAY",ct.SUNDAY)).find(n=>n.entry.uuid===e)??null}function Kt(e,t){const n=[];return Object.entries(t).forEach(([r,a])=>{const l=Number(r);a.forEach(d=>{n.push({dateTime:{day:e,from:l,to:l+1},entry:d})})}),n}var cn=h("<br>"),Ti=h("<div>"),Di=h("<div style=display:grid;gap:1rem><h3>Meine Kontaktdaten</h3><p><strong>Name:</strong> <!$><!/></p><p><strong>E-Mail:</strong> <!$><!/></p><p><strong>Handynummer:</strong> <!$><!/></p><!$><!/>"),Li=h("<form novalidate><!$><!/><!$><!/><!$><!/><!$><!/>"),Ni=h("<h3>Mein Programm"),Oi=h("<div><!$><!/><!$><!/><h5></h5><p class=duration>von <!$><!/> bis <!$><!/> Uhr <em><small>(<!$><!/> <!$><!/>)");function Zt(e){return[i(Pi,{get store(){return e.store.init},get isEditable(){return e.isEditable}}),o(cn),i(fe,{get fallback(){return i(A,{get children(){return p.loading.program}})},get children(){return i(T,{get when(){return e.program()},children:t=>i(Fi,{get store(){return e.store},get program(){return t()},get isEditable(){return e.isEditable},get changePage(){return e.changePage}})})}})]}function Fi(e){const t=e.store.master.games.flatMap(u=>u.slots.map(m=>({status:u.kind,uuid:u.uuid,title:u.title.value,dateTime:m}))),n=()=>a().filter(u=>l().has(u.uuid)).map(u=>({uuid:u.uuid,title:u.title,dateTime:u.slot,playerNames:d(u.uuid)})),r=()=>e.store.helping.map(u=>{const m=un(u.helpEntryUuid);return m===null?null:{uuid:u.helpEntryUuid,title:nt[m.entry.kind].title,dateTime:m.dateTime,helperNames:g(u.helpEntryUuid)}}).filter(u=>u!==null),a=()=>e.program.kind==="SUCCESS"?e.program.data:[],l=()=>{const u=e.store.playing.reservations.map(m=>m.gameRound);return new Set(u)},d=u=>e.store.playing.reservations.filter(m=>m.gameRound===u).map(m=>m.kind==="SELF"?e.store.init.name:m.name),g=u=>e.store.helping.filter(m=>m.helpEntryUuid===u).map(m=>m.kind==="SELF"?e.store.init.name:m.name);return i(Mi,{get entries(){return{play:n(),master:t,help:r()}},get changePage(){return e.changePage},get isEditable(){return e.isEditable}})}function Pi(e){const[t,n]=N(e.store),[r,a]=N(pe());return i(A,{get children(){return[i(E,{get when(){return r.open},get children(){return i(Ii,{dialogStore:r,get currentState(){return e.store},updateCurrentState:n})}}),(()=>{var l=o(Di),d=l.firstChild,g=d.nextSibling,u=g.firstChild,m=u.nextSibling,$=m.nextSibling,[_,S]=c($.nextSibling),b=g.nextSibling,y=b.firstChild,v=y.nextSibling,x=v.nextSibling,[R,L]=c(x.nextSibling),F=b.nextSibling,I=F.firstChild,G=I.nextSibling,V=G.nextSibling,[D,B]=c(V.nextSibling),z=F.nextSibling,[q,j]=c(z.nextSibling);return s(g,()=>e.store.name,_,S),s(b,()=>e.store.email,R,L),s(F,()=>e.store.mobile,D,B),s(l,i(E,{get when(){return e.isEditable},get children(){var J=o(Ti);return s(J,i(Z,{icon:"pencil",label:"Kontaktdaten editieren",onClick:()=>a("open",!0)})),J}}),q,j),l})()]}})}function Ii(e){const[t]=N({name:At(e.currentState.name),email:At(e.currentState.email),mobile:At(e.currentState.mobile)}),n=mt(()=>{const l={name:[],email:[]};return t.name.value.trim().length===0&&l.name.push(p.mandatoryField),t.email.value.trim().length===0?l.email.push(p.mandatoryField):t.email.value.includes("@")||l.email.push(p.invalidEmail),{...l,hasErrors:l.name.length+l.email.length>0}}),[r,a]=N(e.dialogStore);return i(Ee,{get store(){return e.dialogStore},title:"Kontaktdaten editieren",onClose:()=>{},size:"medium",get children(){var l=o(Li),d=l.firstChild,[g,u]=c(d.nextSibling),m=g.nextSibling,[$,_]=c(m.nextSibling),S=$.nextSibling,[b,y]=c(S.nextSibling),v=b.nextSibling,[x,R]=c(v.nextSibling);return s(l,i(Xe,{get store(){return t.name},label:"Name",name:"name",showErrors:"ON_BLUR",get errors(){return n().name}}),g,u),s(l,i(Xe,{get store(){return t.email},label:"E-Mail",name:"email",showErrors:"ON_BLUR",get errors(){return n().email}}),$,_),s(l,i(Xe,{get store(){return t.mobile},label:"Handynummer",name:"mobile"}),b,y),s(l,i(re,{label:"Speichern",get disabled(){return n().hasErrors},onClick:()=>{n().hasErrors||(e.updateCurrentState({name:t.name.value,email:t.email.value,mobile:t.mobile.value}),a("open",!1))}}),x,R),l}})}function Mi(e){const t=Hi(e.entries,e.changePage,e.isEditable);return[o(Ni),o(cn),i(on,{programEntries:t})]}function Ut(e){const t=e.range.to-e.range.from,n={"master-draft":{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},master:{label:"SL",help:"Spielleitung",link:{icon:"pencil",label:"Spielrunde bearbeiten"}},play:{label:"TN",help:"Teilnehmer:in",link:{icon:"link",label:"Zur Spielrunde"}},help:{label:"HL",help:"Helfen",link:{icon:"link",label:"Zum Eintrag"}}}[e.kind],r=()=>{const a=["timeview-entry","box-simple"];return e.kind==="master-draft"&&a.push("gray"),e.kind==="master"&&a.push("special"),e.kind==="play"&&a.push("danger"),a.join(" ")};return(()=>{var a=o(Oi),l=a.firstChild,[d,g]=c(l.nextSibling),u=d.nextSibling,[m,$]=c(u.nextSibling),_=m.nextSibling,S=_.nextSibling,b=S.firstChild,y=b.nextSibling,[v,x]=c(y.nextSibling),R=v.nextSibling,L=R.nextSibling,[F,I]=c(L.nextSibling),G=F.nextSibling,V=G.nextSibling,D=V.firstChild,B=D.firstChild,z=B.nextSibling,[q,j]=c(z.nextSibling),J=q.nextSibling,W=J.nextSibling,[de,ce]=c(W.nextSibling);return de.nextSibling,s(a,i(ut,{get title(){return n.help},get inverted(){return e.kind!=="help"},size:"small",get children(){return n.label}}),d,g),s(a,i(E,{get when(){return e.onClick},children:Y=>i(xe,{get icon(){return n.link.icon},kind:"ghost",get onClick(){return Y()},get title(){return n.link.label}})}),m,$),s(_,()=>e.title),s(S,()=>e.range.from,v,x),s(S,()=>e.range.to,F,I),s(D,t,q,j),s(D,t===1?"Stunde":"Stunden",de,ce),le(Y=>{var ae=r(),Q=e.title;return ae!==Y.e&&_e(a,Y.e=ae),Q!==Y.t&&et(_,"title",Y.t=Q),Y},{e:void 0,t:void 0}),a})()}function Hi(e,t,n){const r={SATURDAY:[],SUNDAY:[]};if(!n)return r;e.play.forEach(l=>{const d=`${l.title} (${l.playerNames.join(", ")})`;r[l.dateTime.day].push({range:l.dateTime,component:()=>i(Ut,{title:d,get range(){return l.dateTime},kind:"play",onClick:()=>t({kind:"GAME",uuid:l.uuid})})})}),e.master.forEach(l=>{if(l.status==="archived")return;const d=[l.title];l.status==="draft"&&d.unshift("(noch nicht veröffentlicht)"),r[l.dateTime.day].push({range:l.dateTime,component:()=>i(Ut,{get title(){return d.join(" ")},get range(){return l.dateTime},get kind(){return l.status==="published"?"master":"master-draft"},onClick:()=>t({kind:"EDIT_GAMEROUND",uuid:l.uuid})})})});const a=Object.groupBy(e.help,l=>{const{day:d,from:g,to:u}=l.dateTime;return`${d}-${g}-${u}`});return Object.values(a).forEach(l=>{if(l===void 0)return;const d=l[0];if(d===void 0)return;const g=Object.groupBy(l,m=>m.title),u=Object.entries(g).map(([m,$])=>$===void 0?null:`${m} (${$.flatMap(_=>_.helperNames).join(", ")})`).filter(m=>m!==null).join(", ");r[d.dateTime.day].push({range:d.dateTime,component:()=>i(Ut,{title:`Helfen: ${u}`,get range(){return d.dateTime},kind:"help",onClick:()=>t({kind:"HELPING-SLOT",uuid:d.uuid})})})}),r}const Ye=[{name:"ab6jahren",label:"Ab 6 Jahren",description:"Spannungs- und Bedrohungsmomente werden kurz gehalten. In Begleitung oder nach Absprache mit einem Elternteil. Beispiele: My Little Pony, ..."},{name:"ab12jahren",label:"Ab 12 Jahren",description:"Antisoziales und destruktives wird auf ein Minimum begrenzt. Keine Diskriminierung, keine Radikalisierung, Sexualität wird nicht explizit dargestellt."},{name:"ab18jahren",label:"Ab 18 Jahren",description:"Keinerlei Richtlinien bezüglich Inhalt, in der Gruppe sollte aber diskutiert werden, was akzeptabel ist und was nicht. Beispiele: Vampire the Masquerade, ..."},{name:"fantasy",label:"Fantasy",description:"Spielt in einer alternativen Vergangenheit, in welcher Elemente wie: Ritterinnen, Hexenmeister, Rüstungen, Magie, Goblins, Turniere usw. vorkommen können. Beispiele: Das Schwarze Auge, Dungeons & Dragons, ..."},{name:"sciencefiction",label:"Science Fiction",description:"Spielt in einer alternativen Zukunft, in welcher Elemente wie: Raumschiffe, Sternenportale, Künstliche Intelligenzen, Laserkanonen usw. vorkommen können. Beispiele: Shadowrun, Alien, ..."},{name:"postapokalyptisch",label:"Postapokalyptisch",description:"Spielt in einer Welt mitten oder nach einem Kollaps, wo die Mehrheit ums Überleben kämpft. Beispiele: Mutant Year Zero, Apocalypse World"},{name:"horror",label:"Horror",description:"Eine gruselige Atmosphäre, psychologischer Druck oder unvorhersehbare Schreckensmomente. Beispiele: Cthulhu, ..."},{name:"offenewelt",label:"Offene Welt",description:"Es gibt nur einen losen Handlungsfaden, die Rollenspiel-Gruppe muss sich ihre Ziele selber festlegen. Beispiele: Ironsworn, Blades in the Dark, ..."},{name:"gemeinsamespielleitung",label:"Gemeinsame Spielleitung",description:"Die Regeln und die Umwelt werden gemeinsam von allen Spielenden umgesetzt. Beispiele: Microscope, The Quiet Year, ..."},{name:"regelleicht",label:"Regelleicht",description:"Die kompletten Regeln haben alle auf einer Seite Platz. Beispiele: Fiasco, Everyone is John, ..."},{name:"deutsch",label:"Deutsch",description:"Bei der Spielrunde reden die Spielenden miteinander Deutsch."},{name:"englisch",label:"Englisch",description:"Bei der Spielrunde reden die Spielenden miteinander Englisch."},{name:"workshop",label:"Workshop",description:"Unter Anleitung, gemeinsam ein Rollenspiel-Thema vertiefen. Kreative Techniken stehen im Vordergrund. Beispiele: Gemeinsam einen Dungeon erschaffen, gemeinsam eine Hintergrundgeschichte schreiben, ..."}];var Gi=h("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Spielleitung:</strong><br> <!$><!/></li><li><strong style=color:var(--clr-accent-1)>System:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Freie Plätze:</strong><br><!$><!/> (von <!$><!/>)</li><li><strong style=color:var(--clr-accent-1)>Kategorien:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1)>Kurze Beschreibung:</strong><br><!$><!/></li><li><strong style=color:var(--clr-accent-1)>Lange Beschreibung:</strong><br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),Yi=h("<em>kein System angegeben"),Bi=h("<em>keine Kategorien"),zi=h("<em>Keine lange Beschreibung angegeben."),ji=h("<div class=count>"),Wi=h("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),Ki=h('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),Zi=h('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>'),Vi=h('<form class=input-button style="display:grid;gap:0rem;grid-template-columns:1fr max-content"><input type=text style=border-color:var(--clr-special-9)><!$><!/>');function qi(e){const t=()=>e.reservations.filter(u=>u.gameRound===e.entry.uuid),n=Math.max(e.entry.playerCount.reserved+1-t.length,1),r=e.entry.tags.map(u=>Ye.find(({name:m})=>m===u)).filter(u=>u!==void 0).map(({label:u})=>u),a=e.entry.playerCount.max,l=()=>Mt(a).map(u=>{const m=t()[u];return m!==void 0?m:u+1===a?{kind:"RESERVED_SPONTANIOUS"}:a-n<=u?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),d=()=>t().find(u=>u.kind==="SELF")!==void 0,g=()=>{const u=l().filter($=>$.kind==="SELF"||$.kind==="FRIEND").length,m=e.entry.playerCount.max-1-e.entry.playerCount.reserved-u;return Math.max(m,0)};return(()=>{var u=o(Gi),m=u.firstChild,$=m.firstChild,_=$.firstChild,S=_.nextSibling,b=S.nextSibling,y=b.nextSibling,[v,x]=c(y.nextSibling),R=$.nextSibling,L=R.firstChild,F=L.nextSibling,I=F.nextSibling,[G,V]=c(I.nextSibling),D=R.nextSibling,B=D.firstChild,z=B.nextSibling,q=z.nextSibling,j=q.nextSibling,[J,W]=c(j.nextSibling),de=J.nextSibling,ce=de.nextSibling,[Y,ae]=c(ce.nextSibling),Q=Y.nextSibling,O=Q.nextSibling,[ge,C]=c(O.nextSibling);ge.nextSibling;var M=D.nextSibling,K=M.firstChild,X=K.nextSibling,H=X.nextSibling,[oe,he]=c(H.nextSibling),Se=oe.nextSibling,ve=Se.nextSibling,[me,Re]=c(ve.nextSibling);me.nextSibling;var ke=M.nextSibling,Ae=ke.firstChild,P=Ae.nextSibling,be=P.nextSibling,[Fe,Be]=c(be.nextSibling),Ue=ke.nextSibling,ze=Ue.firstChild,Ce=ze.nextSibling,ft=Ce.nextSibling,[vt,kt]=c(ft.nextSibling),je=Ue.nextSibling,yt=je.firstChild,pn=yt.nextSibling,xn=pn.nextSibling,[En,Rn]=c(xn.nextSibling),Cn=m.nextSibling,wn=Cn.firstChild,An=wn.nextSibling;return s($,()=>e.entry.gamemaster,v,x),s(R,(()=>{var ee=w(()=>e.entry.system.trim().length>0);return()=>ee()?e.entry.system:o(Yi)})(),G,V),s(D,()=>p.days[e.entry.slot.day],J,W),s(D,()=>e.entry.slot.from,Y,ae),s(D,()=>e.entry.slot.to,ge,C),s(M,g,oe,he),s(M,()=>e.entry.playerCount.max,me,Re),s(ke,(()=>{var ee=w(()=>r.length>0);return()=>ee()?r.join(", "):o(Bi)})(),Fe,Be),s(Ue,()=>e.entry.description.short,vt,kt),s(je,(()=>{var ee=w(()=>e.entry.description.long.trim().length>0);return()=>ee()?w(()=>e.entry.description.long):o(zi)})(),En,Rn),s(An,i(ie,{get each(){return l()},children:(ee,Un)=>[(()=>{var te=o(ji);return s(te,()=>Un()+1),te})(),i(fe,{get children(){return[i(T,{get when(){return ee.kind==="RESERVED_OTHER"},get children(){return i(A,{children:"Bereits reserviert"})}}),i(T,{get when(){return ee.kind==="RESERVED_SPONTANIOUS"},get children(){return i(A,{children:"Reserviert für spontane Spieler:innen"})}}),i(T,{get when(){return!e.isEditable},get children(){return i(A,{children:"Freier Platz"})}}),i(T,{get when(){return ee.kind==="SELF"},get children(){return i(ot,{type:"success",get children(){var te=o(Wi),Te=te.firstChild,Pe=Te.nextSibling,[We,Ie]=c(Pe.nextSibling);return s(te,i(xe,{icon:"trash",onClick:()=>e.removeReservation(ee.kind==="SELF"?ee.uuid:"should not happen")}),We,Ie),te}})}}),i(T,{get when(){return ee.kind==="FRIEND"},get children(){return i(ot,{type:"success",get children(){var te=o(Ki),Te=te.firstChild,Pe=Te.firstChild,We=Pe.nextSibling,[Ie,pt]=c(We.nextSibling);Ie.nextSibling;var xt=Te.nextSibling,[Et,Tn]=c(xt.nextSibling);return s(Te,(()=>{var Dn=w(()=>ee.kind==="FRIEND");return()=>Dn()?ee.name:"[Fehler beim Laden]"})(),Ie,pt),s(te,i(xe,{icon:"trash",onClick:()=>e.removeReservation(ee.kind==="FRIEND"?ee.uuid:"should not happen")}),Et,Tn),te}})}}),i(T,{get when(){return ee.kind==="FREE"},get children(){return i(E,{get when(){return d()},get fallback(){return(()=>{var te=o(Zi),Te=te.firstChild,[Pe,We]=c(Te.nextSibling),Ie=Pe.nextSibling,[pt,xt]=c(Ie.nextSibling);return s(te,i(Z,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",gameRound:e.entry.uuid})}),Pe,We),s(te,i(gt,{addFriend:Et=>e.addReservation({kind:"FRIEND",gameRound:e.entry.uuid,name:Et})}),pt,xt),te})()},get children(){return i(gt,{addFriend:te=>e.addReservation({kind:"FRIEND",gameRound:e.entry.uuid,name:te})})}})}})]}})]})),u})()}function gt(e){const[t,n]=Pt("");return(()=>{var r=o(Vi),a=r.firstChild,l=a.nextSibling,[d,g]=c(l.nextSibling);return r.addEventListener("submit",u=>{u.preventDefault();const m=t();m.trim().length>0&&e.addFriend(m)}),Le(r,"noValidate",!0),a.$$input=u=>n(u.target.value),s(r,i(Z,{icon:"arrow-right",type:"submit",label:"Begleitperson anmelden",kind:"special"}),d,g),le(()=>Le(a,"value",t())),St(),r})()}$t(["input"]);var Ji=h("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen. Wenn du bereit bist zu helfen, klicke in der jeweiligen Stunde auf das Handsymbol <!$><!/>."),Qi=h("<br>"),Xi=h("<p>Plan konnte nicht geladen werden."),er=h("<div><!$><!/><!$><!/><h5></h5><p class=duration><em>alle Helfer:innen gefunden"),tr=h("<div><!$><!/><!$><!/><h5></h5><p class=duration><!$><!/> <!$><!/> gesucht"),nr=h("<div class=game-dialog><ul role=list style=display:grid;gap:0.5rem><li><strong style=color:var(--clr-accent-1)>Tag, Zeit:</strong> <br><!$><!/>, <!$><!/> - <!$><!/> Uhr</li><li><strong style=color:var(--clr-accent-1)>Beschreibung:</strong> <br><!$><!/></li></ul><div class=reservations><h5 style=margin-block-start:0>Plätze reservieren</h5><div class=reservation-table>"),ir=h("<div class=count>"),rr=h("<div class=reservation-table-entry><p>Reserviert für mich </p><!$><!/>"),lr=h('<div class=reservation-table-entry><p>Reserviert für "<!$><!/>"</p><!$><!/>'),ar=h('<div style="display:grid;gap:1rem;grid-template-columns:max-content 1fr"><!$><!/><!$><!/>');function sr(e){const[t,n]=N(e.store);return[(()=>{var r=o(Ji),a=r.firstChild,l=a.nextSibling,[d,g]=c(l.nextSibling);return d.nextSibling,s(r,i(ue,{icon:"hand-heart"}),d,g),r})(),o(Qi),i(lt,{get fallback(){return i(A,{get children(){return p.loading.program}})},get children(){return i(E,{get when(){return e.help()},get fallback(){return i(A,{type:"danger",get children(){return p.error.help}})},children:r=>i(E,{get when(){return r().kind==="SUCCESS"},get fallback(){return i(A,{type:"danger",get children(){return o(Xi)}})},get children(){return i(dr,{get uuid(){return e.uuid},get helpReservations(){return t.helping},get externalHelpReservations(){return r().data},get isEditable(){return e.isEditable},get changePage(){return e.changePage},addReservation:a=>n("helping",t.helping.length,{...a,uuid:crypto.randomUUID()}),removeReservation:a=>{n("helping",t.helping.filter(l=>l.uuid!==a))}})}})})}})]}function dr(e){const[t,n]=N(pe(e.uuid!==null));Ft(()=>{n("open",e.uuid!==null)});const r=()=>un(e.uuid),a=()=>{const d=[];return e.helpReservations.forEach(g=>{d.push(g.helpEntryUuid)}),e.externalHelpReservations.forEach(g=>{d.push(g)}),d},l=()=>({SATURDAY:Vt({constants:ct.SATURDAY,alreadyReservedUuids:a(),myReservations:e.helpReservations,changePage:e.changePage}),SUNDAY:Vt({constants:ct.SUNDAY,alreadyReservedUuids:a(),myReservations:e.helpReservations,changePage:e.changePage})});return[i(E,{get when(){return r()},children:d=>i(Ee,{store:t,get title(){return nt[d().entry.kind].title},onClose:()=>e.changePage({kind:"HELPING"},{disableScroll:!0}),size:"large",get children(){return i(or,{get entry(){return d()},get helpReservations(){return e.helpReservations},get externalHelpReservations(){return e.externalHelpReservations},get isEditable(){return e.isEditable},get addReservation(){return e.addReservation},get removeReservation(){return e.removeReservation}})}})}),i(on,{get programEntries(){return l()},conflictsAllowed:!0})]}function Vt(e){const t=[],n=ur(e.alreadyReservedUuids);return Object.entries(e.constants).forEach(([r,a])=>{a.forEach(l=>{const d={from:Number(r),to:Number(r)+1},g=()=>l.count-(n[l.uuid]??0),u=()=>e.myReservations.filter($=>$.helpEntryUuid===l.uuid).length>0,m=()=>{const $=["box-simple","timeview-entry"];return u()&&$.push("success"),$.join(" ")};g()===0?t.push({range:d,component:()=>(()=>{var $=o(er),_=$.firstChild,[S,b]=c(_.nextSibling),y=S.nextSibling,[v,x]=c(y.nextSibling),R=v.nextSibling;return s($,i(ut,{title:"Helfer:innen gesucht",get inverted(){return u()},size:"small",children:"HL"}),S,b),s($,i(E,{get when(){return u()},get children(){return i(xe,{icon:"hand-heart",kind:"ghost",onClick:()=>e.changePage({kind:"HELPING-SLOT",uuid:l.uuid},{disableScroll:!0}),title:"Helfen"})}}),v,x),s(R,()=>nt[l.kind].title),le(()=>_e($,m())),$})()}):t.push({range:d,component:()=>(()=>{var $=o(tr),_=$.firstChild,[S,b]=c(_.nextSibling),y=S.nextSibling,[v,x]=c(y.nextSibling),R=v.nextSibling,L=R.nextSibling,F=L.firstChild,[I,G]=c(F.nextSibling),V=I.nextSibling,D=V.nextSibling,[B,z]=c(D.nextSibling);return B.nextSibling,s($,i(ut,{title:"Helfer:innen gesucht",get inverted(){return u()},size:"small",children:"HL"}),S,b),s($,i(xe,{icon:"hand-heart",kind:"ghost",onClick:()=>e.changePage({kind:"HELPING-SLOT",uuid:l.uuid},{disableScroll:!0}),title:"Helfen"}),v,x),s(R,()=>nt[l.kind].title),s(L,g,I,G),s(L,()=>g()===1?"Helfer:in":"Helfer:innen",B,z),le(()=>_e($,m())),$})()})})}),t}function or(e){const{dateTime:t,entry:n}=e.entry,r=nt[n.kind],a=()=>e.helpReservations.filter(u=>u.helpEntryUuid===n.uuid),l=e.externalHelpReservations.filter(u=>u===n.uuid).length,d=()=>Mt(n.count).map(u=>{const m=a()[u];return m!==void 0?m:n.count-l<=u?{kind:"RESERVED_OTHER"}:{kind:"FREE"}}),g=()=>a().find(u=>u.kind==="SELF")!==void 0;return(()=>{var u=o(nr),m=u.firstChild,$=m.firstChild,_=$.firstChild,S=_.nextSibling,b=S.nextSibling,y=b.nextSibling,[v,x]=c(y.nextSibling),R=v.nextSibling,L=R.nextSibling,[F,I]=c(L.nextSibling),G=F.nextSibling,V=G.nextSibling,[D,B]=c(V.nextSibling);D.nextSibling;var z=$.nextSibling,q=z.firstChild,j=q.nextSibling,J=j.nextSibling,W=J.nextSibling,[de,ce]=c(W.nextSibling),Y=m.nextSibling,ae=Y.firstChild,Q=ae.nextSibling;return s($,()=>p.days[t.day],v,x),s($,()=>t.from,F,I),s($,()=>t.to,D,B),s(z,()=>r.description,de,ce),s(Q,i(ie,{get each(){return d()},children:(O,ge)=>[(()=>{var C=o(ir);return s(C,()=>ge()+1),C})(),i(fe,{get children(){return[i(T,{get when(){return O.kind==="RESERVED_OTHER"},get children(){return i(A,{children:"Bereits reserviert"})}}),i(T,{get when(){return!e.isEditable},get children(){return i(A,{children:"Freier Platz"})}}),i(T,{get when(){return O.kind==="SELF"},get children(){return i(ot,{type:"success",get children(){var C=o(rr),M=C.firstChild,K=M.nextSibling,[X,H]=c(K.nextSibling);return s(C,i(xe,{icon:"trash",onClick:()=>e.removeReservation(O.kind==="SELF"?O.uuid:"should not happen")}),X,H),C}})}}),i(T,{get when(){return O.kind==="FRIEND"},get children(){return i(ot,{type:"success",get children(){var C=o(lr),M=C.firstChild,K=M.firstChild,X=K.nextSibling,[H,oe]=c(X.nextSibling);H.nextSibling;var he=M.nextSibling,[Se,ve]=c(he.nextSibling);return s(M,(()=>{var me=w(()=>O.kind==="FRIEND");return()=>me()?O.name:"[Fehler beim Laden]"})(),H,oe),s(C,i(xe,{icon:"trash",onClick:()=>e.removeReservation(O.kind==="FRIEND"?O.uuid:"should not happen")}),Se,ve),C}})}}),i(T,{get when(){return O.kind==="FREE"},get children(){return i(E,{get when(){return g()},get fallback(){return(()=>{var C=o(ar),M=C.firstChild,[K,X]=c(M.nextSibling),H=K.nextSibling,[oe,he]=c(H.nextSibling);return s(C,i(Z,{icon:"person-to-portal",label:"Mich anmelden",kind:"success",onClick:()=>e.addReservation({kind:"SELF",helpEntryUuid:n.uuid})}),K,X),s(C,i(gt,{addFriend:Se=>e.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:Se})}),oe,he),C})()},get children(){return i(gt,{addFriend:C=>e.addReservation({kind:"FRIEND",helpEntryUuid:n.uuid,name:C})})}})}})]}})]})),u})()}function ur(e){const t=Object.groupBy(e,r=>r),n={};for(const r of e)n[r]=t[r]?.length??0;return n}var cr=h("<div class=grid><!$><!/><div>"),gr=h("<div class=boxLink>");function Qe(e){const t=e.type??"special";return(()=>{var n=o(gr);return s(n,i(A,{type:t,get onClick(){return e.onClick},get children(){var r=o(cr),a=r.firstChild,[l,d]=c(a.nextSibling),g=l.nextSibling;return s(r,i(ue,{get icon(){return e.icon}}),l,d),s(g,()=>e.children),r}})),n})()}const Ht=ht(["SATURDAY","SUNDAY"]),gn=k({uuid:f().uuid(),day:Ht,from:se(),to:se()}).refine(e=>e.from<e.to,{message:"A TimeSlot can't end before it starts."});k({name:f(),label:f(),description:f()});const bt=ht(["draft","published","archived"]),hr=k({uuid:f().uuid(),kind:bt,title:f(),system:f(),description:k({short:f(),long:f()}),slots:ne(gn),playerCount:k({min:se().min(1),max:se()}).transform(e=>{const[t,n]=Fn([e.min,e.max]);return{min:t,max:n}}),tagNames:ne(f())}),hn=k({uuid:f().uuid(),kind:bt,title:at,system:at,description:k({short:at,long:at}),slots:ne(gn),playerCount:k({min:zt,max:zt}),tagNames:ne(f())});function mr(){const e={uuid:crypto.randomUUID(),kind:"draft",title:"",system:"",description:{short:"",long:""},slots:[],playerCount:{min:2,max:4},tagNames:["deutsch"]},t=$r(e);if(t.success)return t.data;throw console.error(t),Error("should not happen")}function $r(e){return hn.safeParse(e)}function Sr(e){return{...e,title:e.title.value,system:e.system.value,description:{short:e.description.short.value,long:e.description.long.value},playerCount:{min:e.playerCount.min.value,max:e.playerCount.max.value}}}const _t=200,mn=500,$n=200;function br(e){const t=e.title.value.trim().length===0,n=e.description.short.value.trim().length===0,r=e.description.short.value.length>_t,a=e.description.long.value.length>mn,l=e.slots.length===0;return{titleMissing:t,descriptionShortMissing:n,descriptionShortTooLong:r,descriptionLongTooLong:a,slotMissing:l,hasErrors:t||n||r||a||l}}function _r(e){const t=e.updateText.value.trim().length===0,n=e.updateText.value.length>$n;return{missing:t,tooLong:n,hasErrors:t||n}}var fr=h("<label class=input-checkbox><input type=checkbox><div><!$><!/><!$><!/>"),vr=h("<div class=checkbox-description>");function Gt(e){return(()=>{var t=o(fr),n=t.firstChild,r=n.nextSibling,a=r.firstChild,[l,d]=c(a.nextSibling),g=l.nextSibling,[u,m]=c(g.nextSibling);return n.addEventListener("change",$=>e.onValueUpdate($.target.checked)),s(r,()=>e.label,l,d),s(r,i(E,{get when(){return e.description},children:$=>(()=>{var _=o(vr);return s(_,$),_})()}),u,m),le($=>{var _=e.name,S=e.disabled===!0;return _!==$.e&&et(n,"name",$.e=_),S!==$.t&&Le(n,"disabled",$.t=S),$},{e:void 0,t:void 0}),le(()=>Le(n,"value",e.value)),le(()=>Le(n,"checked",e.checked)),t})()}var kr=h("<h3>"),yr=h("<br>"),pr=h("<div style=margin-top:2rem><h3 style=margin-bottom:1rem></h3><ul class=event-list role=list>"),xr=h('<li><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Status:</strong><!$><!/></div><div class=event-tags><strong>System:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><!$><!/></div><div class=event-tags><strong>Spielende:</strong> <!$><!/> - <!$><!/></div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li><button class=event-link><span>Bearbeiten'),Ze=h("<em>"),Er=h("<span><!$><!/>, <!$><!/> - <!$><!/> Uhr");function Rr(e){const[t,n]=N(e.store);function r(){const l=mr();n("games",t.games.length,l),e.changePage({kind:"EDIT_GAMEROUND",uuid:l.uuid})}const a=()=>e.store.games.flatMap(l=>l.slots.length===0?[{slot:null,game:l}]:l.slots.map(g=>({slot:g,game:l}))).toSorted((l,d)=>vi(l.slot,d.slot));return[i(E,{get when(){return e.isEditable},get children(){return i(Qe,{icon:"grid-2-plus",type:"success",onClick:r,get children(){var l=o(kr);return s(l,()=>p.createNewGameRound),l}})}}),o(yr),i(Gt,{label:"Ich habe wenig bis keine Spielleitung-Erfahrung und möchte gerne in der Vorbereitung und/oder während der Spielrunde unterstützt werden.",get checked(){return t.wantsHelp},name:"wantsHelp",value:"wantsHelp",onValueUpdate:l=>{n("wantsHelp",l)},get disabled(){return!e.isEditable}}),i(E,{get when(){return a()},children:l=>(()=>{var d=o(pr),g=d.firstChild,u=g.nextSibling;return s(g,()=>p.myGameRounds),s(u,i(ie,{get each(){return l().filter(({game:m})=>m.kind!=="archived")},children:({game:m,slot:$})=>{const _=Ye.filter(S=>m.tagNames.includes(S.name)).map(({label:S})=>S);return i(Cr,{game:m,slot:$,tags:_,get changePage(){return e.changePage}})}})),d})()})]}function Cr(e){const{game:t,slot:n,tags:r,changePage:a}=e;return(()=>{var l=o(xr),d=l.firstChild,g=d.nextSibling,u=g.firstChild,m=u.firstChild,$=m.nextSibling,[_,S]=c($.nextSibling),b=u.nextSibling,y=b.firstChild,v=y.nextSibling,[x,R]=c(v.nextSibling),L=b.nextSibling,F=L.firstChild,I=F.nextSibling,[G,V]=c(I.nextSibling),D=L.nextSibling,B=D.firstChild,z=B.nextSibling,q=z.nextSibling,[j,J]=c(q.nextSibling),W=j.nextSibling,de=W.nextSibling,[ce,Y]=c(de.nextSibling),ae=D.nextSibling,Q=ae.nextSibling,O=Q.firstChild,ge=O.nextSibling,C=ge.nextSibling,[M,K]=c(C.nextSibling),X=g.nextSibling,H=X.firstChild,oe=H.firstChild,he=oe.nextSibling,Se=he.nextSibling,[ve,me]=c(Se.nextSibling),Re=X.nextSibling,ke=Re.firstChild,Ae=ke.firstChild;return s(d,(()=>{var P=w(()=>t.title.value.length>0);return()=>P()?t.title.value:(()=>{var be=o(Ze);return s(be,()=>p.missingTitle),be})()})()),s(u,()=>p.publishingSteps[t.kind],_,S),s(b,()=>t.system.value||(()=>{var P=o(Ze);return s(P,()=>p.missingSystem),P})(),x,R),s(L,n!==null?(()=>{var P=o(Er),be=P.firstChild,[Fe,Be]=c(be.nextSibling),Ue=Fe.nextSibling,ze=Ue.nextSibling,[Ce,ft]=c(ze.nextSibling),vt=Ce.nextSibling,kt=vt.nextSibling,[je,yt]=c(kt.nextSibling);return je.nextSibling,s(P,()=>p.days[n.day],Fe,Be),s(P,()=>n.from,Ce,ft),s(P,()=>n.to,je,yt),P})():(()=>{var P=o(Ze);return s(P,()=>p.missingSlot),P})(),G,V),s(D,()=>t.playerCount.min.value,j,J),s(D,()=>t.playerCount.max.value,ce,Y),s(Q,()=>r.join(", ")||(()=>{var P=o(Ze);return s(P,()=>p.missingTags),P})(),M,K),s(H,(()=>{var P=w(()=>t.description.short.value.length===0);return()=>P()?(()=>{var be=o(Ze);return s(be,()=>p.missingShortDescription),be})():ln(t.description.short.value,_t)})(),ve,me),Ae.$$click=()=>a({kind:"EDIT_GAMEROUND",uuid:t.uuid}),le(()=>_e(l,["event-entry",t.kind==="draft"?"gray":""].join(" "))),St(),l})()}$t(["click"]);const wr="2024-08-15T07:45:21.335Z",ye={game:"37831e19-29d6-40bd-b99d-fb91b78aa7f9",slot:"bfcbd156-b703-4664-9944-8936aede8476",slot2:"f58e7242-e1ff-4cfc-a992-ca18dd5207c3",program:"16f387ab-0adf-406b-ba5c-2e4eb200fda8",program2:"11b6b38a-a4d3-40ed-9d4a-d2abcab661a5",program3:"5294bc63-4857-404e-b72d-53ecbd87a27b",program4:"6e9477f1-6dd5-4cd7-b3c3-03085022d967"};function Ar(e,t){const n=localStorage.getItem(e);return n===null?t:n}function Ur(e,t){localStorage.setItem(e,t)}const Sn="SAVE",Tr={version:1,init:{name:"John Doe",email:"john@doe.ch",mobile:"+41 66 123 45 67"},lastSaved:wr,playing:{wantsUpdates:!1,reservations:[]},master:{games:[{uuid:ye.game,kind:"published",title:"Grolle in der Dunkelheit",system:"Warhammer Fantasy Rollenspiel",description:{short:"Ein kurzes Abenteuer bei dem es um Fantasy, Action und einfaches Rollenspiel geht.",long:"Eine kleine Gruppe wagt sich in die dunklen Schächten einer Mine und weiter hinab, um einen mächtigen Gegenstand wieder zu erlangen. Wie werden die Gefährten auf die Gefahren des Untergrundes reagieren und welche Gefahren lauern in der Finsternis?"},slots:[{uuid:ye.slot,day:"SATURDAY",from:10,to:12},{uuid:ye.slot2,day:"SUNDAY",from:14,to:17}],playerCount:{min:1,max:3},tagNames:["deutsch"]}],wantsHelp:!1},helping:[],publishState:"published"};async function Dr(){return new Promise(e=>setTimeout(()=>e({kind:"SUCCESS",data:JSON.parse(Ar(Sn,JSON.stringify(Tr)))}),1e3))}async function Lr(e,t){return new Promise(n=>setTimeout(()=>(Ur(Sn,JSON.stringify(e)),n({kind:"SUCCESS",data:t})),1e3))}const Nr=[{uuid:ye.program,gamemaster:"Game Master",title:"Grolle in der Dunkelheit",system:"Warhammer Fantasy Rollenspiel",description:{short:"Ein kurzes Abenteuer bei dem es um Fantasy, Action und einfaches Rollenspiel geht.",long:"Eine kleine Gruppe wagt sich in die dunklen Schächten einer Mine und weiter hinab, um einen mächtigen Gegenstand wieder zu erlangen. Wie werden die Gefährten auf die Gefahren des Untergrundes reagieren und welche Gefahren lauern in der Finsternis?"},slot:{day:"SATURDAY",from:10,to:13},playerCount:{min:1,max:3,reserved:0},tags:["ab12jahren"]},{uuid:ye.program2,gamemaster:"Other Game Master",title:"Acrimony",system:"D&D",description:{short:"Ein Lo-Fi Space Western Abenteuer",long:'Ein Lo-Fi Space Western Abenteuer: "Eine frisch formierte Gruppe von Kopfgeldjägern wird mit einer riskanten Mission betraut: Sie müssen den berüchtigten Outlaw Jeb "Rusty" Rourke in der abgeschiedenen Grenzstadt aufspüren. Bei dieser unbarmherzigen Jagd lernen die Spieler die harte Realität der Kopfgeldjagd kennen, wo jeder Schuss und jede Entscheidung über ihr Schicksal entscheidet.'},slot:{day:"SATURDAY",from:10,to:13},playerCount:{min:2,max:8,reserved:3},tags:["ab12jahren","horror"]},{uuid:ye.program3,gamemaster:"Other Game Master",title:"Acrimony",system:"D&D",description:{short:"Ein Lo-Fi Space Western Abenteuer",long:'Ein Lo-Fi Space Western Abenteuer: "Eine frisch formierte Gruppe von Kopfgeldjägern wird mit einer riskanten Mission betraut: Sie müssen den berüchtigten Outlaw Jeb "Rusty" Rourke in der abgeschiedenen Grenzstadt aufspüren. Bei dieser unbarmherzigen Jagd lernen die Spieler die harte Realität der Kopfgeldjagd kennen, wo jeder Schuss und jede Entscheidung über ihr Schicksal entscheidet.'},slot:{day:"SATURDAY",from:14,to:18},playerCount:{min:2,max:8,reserved:3},tags:["ab12jahren","horror"]},{uuid:ye.program4,gamemaster:"Some Other Game Master",title:"Solo RPGs",system:"",description:{short:"Wir spielen primär das Solo Rollenspiel NoteQuest, werden aber kurz auch noch ein paar andere Solo Rollenspiele miteinander anschauen.",long:""},slot:{day:"SATURDAY",from:14,to:18},playerCount:{min:2,max:4,reserved:3},tags:[]}];async function Or(){return new Promise(e=>setTimeout(()=>e({kind:"SUCCESS",data:Nr}),5e3))}const Fr=[{uuid:ye.slot,name:"Alice"},{uuid:ye.slot,name:"Bob"}];async function Pr(e){return new Promise(t=>setTimeout(()=>t({kind:"SUCCESS",data:Fr.filter(n=>e.includes(n.uuid))}),5e3))}const Ir={version:1,init:{name:"",email:"",mobile:""},lastSaved:new Date().toISOString(),playing:{wantsUpdates:!0,reservations:[]},master:{games:[],wantsHelp:!1},helping:[],publishState:"draft"};async function Mr(e){const t=new URL(Oe("/rst25/load"));t.searchParams.append("secret",e);const n=await fetch(t);if(!n.ok)return{kind:"FAILURE"};const r=await n.json();return typeof r=="object"&&r!==null?{kind:"SUCCESS",data:Object.assign(Ir,r)}:(console.error("`last_save` not found on ",r),{kind:"FAILURE"})}async function Hr(e,t){try{const n=await fetch(Oe("/rst25/save"),{method:"post",body:JSON.stringify({secret:t,save:e}),headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:t}:(console.error(await n.text()),{kind:"FAILURE"})}catch(n){return console.error(n),{kind:"FAILURE"}}}async function Gr(e){try{const t=new URL(Oe("/rst25/program"));e!==void 0&&t.searchParams.append("secret",e);const n=await fetch(t,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}async function Yr(e){try{const t=new URL(Oe("/rst25/reservations"));t.searchParams.append("secret",e);const n=await fetch(t);return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}async function Br(e){try{const t=await fetch(Oe("/rst25/publishGameround"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return t.ok?{kind:"SUCCESS",data:e.gameroundUuid}:(console.error(await t.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}async function zr(e){try{const t=await fetch(Oe("/rst25/sendGameroundUpdate"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});return t.ok?{kind:"SUCCESS",data:e.gameroundUuid}:(console.error(await t.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}async function jr(e){try{const t=new URL(Oe("/rst25/help"));t.searchParams.append("secret",e);const n=await fetch(t,{headers:{"Content-Type":"application/json"}});return n.ok?{kind:"SUCCESS",data:await n.json()}:(console.error(await n.text()),{kind:"FAILURE"})}catch(t){return console.error(t),{kind:"FAILURE"}}}const Wr=k({uuid:f().uuid(),title:f(),system:f(),gamemaster:f(),description:k({short:f(),long:f()}),slot:k({day:Ht,from:se(),to:se()}),playerCount:k({min:se(),max:se(),reserved:se()}),tags:ne(f())}),Kr=ne(Wr),Zr=k({uuid:f().uuid(),title:f(),system:f(),gamemaster:f(),description:k({short:f(),long:f()}),slot:k({day:Ht,from:se(),to:se()}),playerCount:k({min:se(),max:se(),reserved:se()}),tags:ne(f())}),Vr=ne(Zr);async function qr(e){const t=e==="demo"?await Or():await Gr(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Kr.safeParse(t.data);if(!n.success)return{kind:"FAILURE"};const r=Jr(n.data);return r.success?{kind:"SUCCESS",data:r.data}:{kind:"FAILURE"}}function Jr(e){return Vr.safeParse(e)}function Qr(e){const t=Object.groupBy(e,n=>n.slot.day);return{SATURDAY:t.SATURDAY??[],SUNDAY:t.SUNDAY??[]}}function Xr(e){function t(d,g){const{from:u,to:m}=d.slot,{from:$,to:_}=g.slot;return u===$?m-_:u-$}const n=e.SATURDAY.toSorted(t),r=e.SUNDAY.toSorted(t),a=tt(Ne.SATURDAY.open).reduce((d,g)=>(d[g]=n.filter(u=>u.slot.from===g),d),{}),l=tt(Ne.SUNDAY.open).reduce((d,g)=>(d[g]=r.filter(u=>u.slot.from===g),d),{});return{SATURDAY:a,SUNDAY:l}}var el=h("<div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><h5 style=margin:0>Filter</h5><!$><!/>"),tl=h("<h6 style=margin-block:0.5rem>Tage"),nl=h("<div style=display:flex;flex-wrap:wrap;gap:0.5rem><!$><!/><!$><!/>"),il=h("<h6 style=margin-block:0.5rem>Kategorien <span>"),rl=h("<div style=display:flex;flex-wrap:wrap;gap:0.5rem>");const $e={day:"fDay",tags:"fTags",options:"fOpts"};function ll(){const e=new URL(location.href),t=e.searchParams.get($e.day),n=t==="SATURDAY"||t==="SUNDAY"?t:null,r=e.searchParams.getAll($e.tags),a=e.searchParams.getAll($e.options);return{day:n,tags:r,withOpenSeats:a.includes("withOpenSeats"),iHaveTime:a.includes("iHaveTime")}}function al(e,t){return{toggleDay:n=>{const r=e.day===n,a=new URL(location.href);r?(a.searchParams.delete($e.day),t("day",null)):(a.searchParams.set($e.day,n),t("day",n)),history.pushState(Je(e),"",a)},toggleTag:n=>{const r=e.tags.includes(n),a=new URL(location.href);r?(a.searchParams.delete($e.tags),t("tags",e.tags.filter(l=>l!==n)),e.tags.forEach(l=>{a.searchParams.append($e.tags,l)})):(a.searchParams.append($e.tags,n),t("tags",e.tags.length,n)),history.pushState(Je(e),"",a)},toggleOption:n=>{const r=e[n],a=new URL(location.href);t(n,!r),["withOpenSeats","iHaveTime"].forEach(l=>{e[l]&&a.searchParams.append($e.options,l)}),history.pushState(Je(e),"",a)},reset:()=>{t({day:null,tags:[],withOpenSeats:!1,iHaveTime:!1});const n=new URL(location.href);n.searchParams.delete($e.day),n.searchParams.delete($e.tags),n.searchParams.delete($e.options),history.pushState(Je(e),"",n)}}}function sl(e){const[t,n]=N(e.activeFilter),r=al(t,n);return i(A,{get children(){return[(()=>{var a=o(el),l=a.firstChild,d=l.nextSibling,[g,u]=c(d.nextSibling);return s(a,i(Z,{label:"Filter zurücksetzen",icon:"circle-xmark",kind:"ghost-danger",onClick:()=>r.reset()}),g,u),a})(),o(tl),(()=>{var a=o(nl),l=a.firstChild,[d,g]=c(l.nextSibling),u=d.nextSibling,[m,$]=c(u.nextSibling);return s(a,i(re,{label:"Samstag",get kind(){return t.day!=="SUNDAY"?"success":"gray"},onClick:()=>r.toggleDay("SATURDAY")}),d,g),s(a,i(re,{label:"Sonntag",get kind(){return t.day!=="SATURDAY"?"success":"gray"},onClick:()=>r.toggleDay("SUNDAY")}),m,$),a})(),(()=>{var a=o(il),l=a.firstChild,d=l.nextSibling;return s(d,i(xe,{icon:"circle-question",kind:"ghost",title:"Erklärungen der Kategorien",get onClick(){return e.showExplanationOfCategories}})),a})(),(()=>{var a=o(rl);return s(a,i(ie,{each:Ye,children:l=>i(re,{get label(){return l.label},get kind(){return t.tags.length===0||t.tags.includes(l.name)?"success":"gray"},onClick:()=>r.toggleTag(l.name)})})),a})()]}})}function dl(e,t){return e.filter(n=>!(t.day!==n.slot.day&&t.day!==null||!ol(n.tags,t.tags)))}function ol(e,t){return t.length===0?!0:t.filter(r=>!e.includes(r)).length===0}var Me=h("<br>"),ul=h("<ul style=padding:0;padding-block-start:1rem;margin:0;max-inline-size:100%;display:grid;gap:0.5rem>"),cl=h("<li><strong></strong><br><p>"),gl=h("<p>Programm konnte nicht geladen werden."),hl=h("<em><!$><!/> von <!$><!/> Runden gefunden."),ml=h("<h3>"),$l=h("<h4 style=margin-block-start:2rem;margin-block-end:1rem>Start: <!$><!/> Uhr"),Sl=h('<ul class="event-list max"role=list>'),bl=h("<small><!$><!/> - <!$><!/> Uhr"),_l=h("<h4 style=margin-block-end:0.5rem>"),fl=h("<em>Das Menü wird zu einem späteren Zeitpunkt kommuniziert."),vl=h("<div style=margin-block-start:2rem>"),kl=h('<li><h3 class=event-title></h3><div class=event-details><div class=event-tags><strong>Spielleitung:</strong><!$><!/></div><div class=event-tags><strong>System:</strong><!$><!/></div><div class=event-tags><strong>Tag, Zeit:</strong><span><!$><!/>, <!$><!/> - <!$><!/> Uhr</span></div><div class=event-tags><strong>Freie Plätze:</strong> <!$><!/> (von <!$><!/>)</div> <div class=event-tags><strong>Kategorien:</strong> <!$><!/></div></div><div class="event-description content"><p><strong>Kurzbeschreibung:</strong><br><!$><!/></p></div><ul role=list class=event-links><li><button class=event-link><span>Details & Teilnahme'),yl=h("<em>kein System angegeben"),pl=h("<em>keine Kategorien");function xl(e){const[t,n]=N({playing:e.store,activeFilter:ll(),categoryDialog:pe()});return[i(Gt,{label:"Schickt mir bitte E-Mails, wenn neue Spielrunden veröffentlicht werden.",get checked(){return t.playing.wantsUpdates},name:"wantsUpdates",value:"wantsUpdates",onValueUpdate:r=>{n("playing","wantsUpdates",r)}}),o(Me),i(sl,{get activeFilter(){return t.activeFilter},showExplanationOfCategories:()=>n("categoryDialog","open",!0)}),i(Ee,{get store(){return t.categoryDialog},title:"Erklärungen der Kategorien",onClose:()=>{},size:"medium",get children(){var r=o(ul);return s(r,()=>Ye.map(a=>(()=>{var l=o(cl),d=l.firstChild,g=d.nextSibling,u=g.nextSibling;return s(d,()=>a.label),s(u,()=>a.description),l})())),r}}),o(Me),i(lt,{get fallback(){return i(A,{get children(){return p.loading.program}})},get children(){return i(E,{get when(){return e.program()},get fallback(){return i(A,{type:"danger",get children(){return p.error.program}})},children:r=>i(E,{get when(){return r().kind==="SUCCESS"},get fallback(){return i(A,{type:"danger",get children(){return o(gl)}})},get children(){return i(El,{get program(){return r().data},get filter(){return t.activeFilter},get reservations(){return t.playing.reservations},get isEditable(){return e.isEditable},addReservation:a=>n("playing","reservations",t.playing.reservations.length,{...a,uuid:crypto.randomUUID()}),removeReservation:a=>{n("playing","reservations",t.playing.reservations.filter(l=>l.uuid!==a))},get uuid(){return e.uuid},get changePage(){return e.changePage}})}})})}})]}function El(e){const[t,n]=N(pe(e.uuid!==null));Ft(()=>{n("open",e.uuid!==null)});const r=()=>e.program.find(d=>d.uuid===e.uuid),a=()=>dl(e.program,e.filter),l=()=>Xr(Qr(a()));return[(()=>{var d=o(hl),g=d.firstChild,[u,m]=c(g.nextSibling),$=u.nextSibling,_=$.nextSibling,[S,b]=c(_.nextSibling);return S.nextSibling,s(d,()=>a().length,u,m),s(d,()=>e.program.length,S,b),d})(),o(Me),i(E,{get when(){return r()},children:d=>i(Ee,{store:t,get title(){return d().title},onClose:()=>e.changePage({kind:"PLAYER"},{disableScroll:!0}),size:"large",get children(){return i(qi,{get entry(){return d()},get reservations(){return e.reservations},get isEditable(){return e.isEditable},get addReservation(){return e.addReservation},get removeReservation(){return e.removeReservation}})}})}),o(Me),i(qt,{day:"SATURDAY",get programOfDay(){return l().SATURDAY},get changePage(){return e.changePage}}),o(Me),o(Me),i(qt,{day:"SUNDAY",get programOfDay(){return l().SUNDAY},get changePage(){return e.changePage}})]}function qt(e){const t=()=>Object.values(e.programOfDay).flat().length>0,r=Ne[e.day].breaks.map(l=>l.from),a=l=>r.indexOf(l)===0?"LUNCH":"DINNER";return[(()=>{var l=o(ml);return s(l,()=>p.days[e.day]),l})(),i(E,{get when(){return t()},get fallback(){return i(A,{get children(){return["Keine Spielrunden mit den ausgewählten Filtern am"," ",w(()=>p.days[e.day])," gefunden."]}})},get children(){return i(ie,{get each(){return Object.entries(e.programOfDay)},children:([l,d])=>r.includes(Number(l))?i(Rl,{get type(){return a(Number(l))},get range(){return{from:Number(l),to:Number(l)+1}}}):d.length===0?null:[(()=>{var g=o($l),u=g.firstChild,m=u.nextSibling,[$,_]=c(m.nextSibling);return $.nextSibling,s(g,l,$,_),g})(),(()=>{var g=o(Sl);return s(g,i(ie,{each:d,children:u=>i(Cl,{entry:u,get changePage(){return e.changePage}})})),g})()]})}})]}function Rl(e){const t=e.type==="LUNCH"?"Mittagessen":"Nachtessen";return(()=>{var n=o(vl);return s(n,i(A,{get children(){return[(()=>{var r=o(bl),a=r.firstChild,[l,d]=c(a.nextSibling),g=l.nextSibling,u=g.nextSibling,[m,$]=c(u.nextSibling);return m.nextSibling,s(r,()=>e.range.from,l,d),s(r,()=>e.range.to,m,$),r})(),(()=>{var r=o(_l);return s(r,t),r})(),o(fl)]}})),n})()}function Cl(e){const t=Ye.filter(n=>e.entry.tags.includes(n.name)).map(({label:n})=>n);return(()=>{var n=o(kl),r=n.firstChild,a=r.nextSibling,l=a.firstChild,d=l.firstChild,g=d.nextSibling,[u,m]=c(g.nextSibling),$=l.nextSibling,_=$.firstChild,S=_.nextSibling,[b,y]=c(S.nextSibling),v=$.nextSibling,x=v.firstChild,R=x.nextSibling,L=R.firstChild,[F,I]=c(L.nextSibling),G=F.nextSibling,V=G.nextSibling,[D,B]=c(V.nextSibling),z=D.nextSibling,q=z.nextSibling,[j,J]=c(q.nextSibling);j.nextSibling;var W=v.nextSibling,de=W.firstChild,ce=de.nextSibling,Y=ce.nextSibling,[ae,Q]=c(Y.nextSibling),O=ae.nextSibling,ge=O.nextSibling,[C,M]=c(ge.nextSibling);C.nextSibling;var K=W.nextSibling,X=K.nextSibling,H=X.firstChild,oe=H.nextSibling,he=oe.nextSibling,[Se,ve]=c(he.nextSibling),me=a.nextSibling,Re=me.firstChild,ke=Re.firstChild,Ae=ke.nextSibling,P=Ae.nextSibling,[be,Fe]=c(P.nextSibling),Be=me.nextSibling,Ue=Be.firstChild,ze=Ue.firstChild;return s(r,()=>e.entry.title),s(l,()=>e.entry.gamemaster,u,m),s($,(()=>{var Ce=w(()=>e.entry.system.trim().length>0);return()=>Ce()?e.entry.system:o(yl)})(),b,y),s(R,()=>p.days[e.entry.slot.day],F,I),s(R,()=>e.entry.slot.from,D,B),s(R,()=>e.entry.slot.to,j,J),s(W,()=>Math.max(e.entry.playerCount.max-1-e.entry.playerCount.reserved,0),ae,Q),s(W,()=>e.entry.playerCount.max,C,M),s(X,(()=>{var Ce=w(()=>t.length>0);return()=>Ce()?t.join(", "):o(pl)})(),Se,ve),s(Re,()=>ln(e.entry.description.short,_t),be,Fe),ze.$$click=()=>e.changePage({kind:"GAME",uuid:e.entry.uuid},{disableScroll:!0}),le(()=>_e(n,["event-entry"].join(" "))),St(),n})()}$t(["click"]);var wl=h("<h3>Spielrunden ansehen"),Al=h("<p>Melde dich (und deine Freunde) für diverse Spielrunden an."),Tt=h("<br>"),Ul=h("<h3>Spielrunden erstellen"),Tl=h("<p>Falls du wenig oder gar keine Erfahrung als Spielleiter:in hast, werden wir dich vor und während dem Anlass unterstützen."),Dl=h("<h3>Helfen"),Ll=h("<p>Beim Kiosk und der Essensausgabe können wir immer ein paar helfende Hände gebrauchen."),Nl=h("<h3>Zusammenfassung"),Ol=h("<p>Erhalte einen Überblick über dein gesamtes Programm.");function Fl(e){return[i(Qe,{icon:"dice-d20",onClick:()=>e.changePage({kind:"PLAYER"}),get children(){return[o(wl),o(Al)]}}),o(Tt),i(Qe,{icon:"grid-2-plus",onClick:()=>e.changePage({kind:"GAMEMASTER"}),get children(){return[o(Ul),o(Tl)]}}),o(Tt),i(Qe,{icon:"hand-heart",onClick:()=>e.changePage({kind:"HELPING"}),get children(){return[o(Dl),o(Ll)]}}),o(Tt),i(Qe,{icon:"list",onClick:()=>e.changePage({kind:"SUMMARY"}),get children(){return[o(Nl),o(Ol)]}})]}var Pl=h("<fieldset><legend>Zeitslots</legend><!$><!/><!$><!/>"),Jt=h("<br>"),Il=h("<div style=margin-block-end:0.5rem>Zeitslot: <!$><!/>, <!$><!/> -<!$><!/> Uhr"),Ml=h("<ul class=event-list role=list>"),Hl=h("<em>werden geladen..."),Gl=h("<li class=event-entry><h3 class=event-title><!$><!/>, <!$><!/> - <!$><!/> Uhr</h3><div class=event-details><div class=event-tags><strong>Dauer:</strong><!$><!/> <!$><!/></div><div class=event-tags><strong>Spielende:</strong> <!$><!/></div></div><div></div><ul role=list class=event-links>"),Yl=h("<em>Fehler beim Laden."),Bl=h("<em>noch keine Anmeldungen"),zl=h("<li><em style=font-size:smaller>Aktionen werden geladen..."),Qt=h("<li><em style=font-size:smaller>kann nicht gelöscht werden"),jl=h("<li><button type=button class=event-link><div style=display:flex;gap:0.25rem;align-items:center><!$><!/><span>Löschen"),Wl=h("<div style=display:grid;gap:0.5rem>"),Kl=h("<div style=display:grid;gap:0.5rem><!$><!/><!$><!/>"),Zl=h("<div style=display:grid;gap:0.5rem><!$><!/><!$><!/><!$><!/>"),Vl=h("<div style=display:grid;gap:0.5rem><!$><!/><!$><!/><!$><!/><div style=margin-block-start:1rem>"),ql=h("<div style=display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center><!$><!/> <span>Neuen Slot erfassen"),Jl=h("<em>Wähle eine Tag:"),Ql=h("<div style=display:flex;flex-wrap:wrap;gap:.5rem><!$><!/><!$><!/>"),Xl=h("<em>Wähle eine Startzeit:"),bn=h("<div style=display:flex;flex-wrap:wrap;gap:.5rem>"),_n=h("<span style=white-space:nowrap><!$><!/> Uhr"),ea=h("<em>Wähle eine Endzeit:");function ta(e){return(()=>{var t=o(Pl),n=t.firstChild,r=n.nextSibling,[a,l]=c(r.nextSibling),d=a.nextSibling,[g,u]=c(d.nextSibling);return s(t,i(ia,{get store(){return e.store},get registrations(){return e.registrations},get isEditable(){return e.isEditable}}),a,l),s(t,i(E,{get when(){return e.slotMissing},get children(){return i(A,{type:"danger",children:"Wähle mindestens einen Zeitslot aus."})}}),g,u),t})()}const Xt=1;function na(e){function t(n){const r=tt(n.open,!0);return n.breaks.map(l=>tt(l,!0)).reduce((l,d)=>{const g=d.at(0),u=d.at(-1);if(g===void 0||u===void 0)return l;const m=[];return l.forEach($=>{const _=[],S=[];$.forEach(b=>{b<=g&&_.push(b),u<=b&&S.push(b)}),_.length>0&&m.push(_),S.length>0&&m.push(S)}),m},[r]).map(l=>{const d=l.slice(0,Xt*-1);return Pn(d.map(g=>{const u=l.filter(m=>m>=g+Xt);return[g,u]}))}).reduce((l,d)=>({...l,...d}),{})}return{SATURDAY:t(e.SATURDAY),SUNDAY:t(e.SUNDAY)}}function ia(e){const[t,n]=N(e.store),[r,a]=N({dialog:pe()}),l=mt(()=>na(Ne));function d(m){n(t.concat(m))}function g(m){a("dialog","open",!1),a("slot",void 0),n(t.filter($=>$.uuid!==m))}function u(m){a("dialog","open",!0),a("slot",t.find($=>$.uuid===m))}return[i(la,{get daySections(){return l()},chooseTimeSlot:d,get isEditable(){return e.isEditable}}),o(Jt),o(Jt),i(Ee,{get store(){return r.dialog},title:"Zeitslot löschen",onClose:()=>a("slot",void 0),get children(){return[(()=>{var m=o(Il),$=m.firstChild,_=$.nextSibling,[S,b]=c(_.nextSibling),y=S.nextSibling,v=y.nextSibling,[x,R]=c(v.nextSibling),L=x.nextSibling,F=L.nextSibling,[I,G]=c(F.nextSibling);return I.nextSibling,s(m,()=>p.days[r.slot?.day],S,b),s(m,()=>r.slot?.from,x,R),s(m,()=>r.slot?.to,I,G),m})(),i(Z,{kind:"danger",icon:"trash",label:"Löschen",onClick:()=>g(r.slot?.uuid)})]}}),i(ra,{slots:t,get registrations(){return e.registrations},confirmRemoval:u,get isEditable(){return e.isEditable}})]}function ra(e){return(()=>{var t=o(Ml);return s(t,i(ie,{get each(){return aa(e.slots)},children:n=>(()=>{var r=o(Gl),a=r.firstChild,l=a.firstChild,[d,g]=c(l.nextSibling),u=d.nextSibling,m=u.nextSibling,[$,_]=c(m.nextSibling),S=$.nextSibling,b=S.nextSibling,[y,v]=c(b.nextSibling);y.nextSibling;var x=a.nextSibling,R=x.firstChild,L=R.firstChild,F=L.nextSibling,[I,G]=c(F.nextSibling),V=I.nextSibling,D=V.nextSibling,[B,z]=c(D.nextSibling),q=R.nextSibling,j=q.firstChild,J=j.nextSibling,W=J.nextSibling,[de,ce]=c(W.nextSibling),Y=x.nextSibling,ae=Y.nextSibling;return s(a,()=>p.days[n.day],d,g),s(a,()=>n.from,$,_),s(a,()=>n.to,y,v),s(R,()=>n.to-n.from,I,G),s(R,()=>n.to-n.from>1?"Stunden":"Stunde",B,z),s(q,i(fe,{get children(){return[i(T,{get when(){return e.registrations.loading},get children(){return o(Hl)}}),i(T,{get when(){return e.registrations()},children:Q=>{const O=Q();if(O.kind==="FAILURE")return o(Yl);const ge=O.data.filter(C=>C.uuid===n.uuid).map(C=>C.name);return w(()=>ge.join(", ")||o(Bl))}})]}}),de,ce),s(ae,i(lt,{get fallback(){return o(zl)},get children(){return i(E,{get when(){return e.registrations()},children:Q=>{const O=Q();return O.kind==="FAILURE"?o(Qt):O.data.filter(C=>C.uuid===n.uuid).map(C=>C.name).length>0?o(Qt):(()=>{var C=o(jl),M=C.firstChild,K=M.firstChild,X=K.firstChild,[H,oe]=c(X.nextSibling);return H.nextSibling,M.$$click=()=>e.confirmRemoval(n.uuid),s(K,i(ue,{icon:"trash"}),H,oe),le(()=>Le(M,"disabled",!e.isEditable)),St(),C})()}})}})),r})()})),t})()}function la(e){const[t,n]=N({slot:{kind:"CHOOSE_DAY"},dialog:pe()});function r(){n("slot",{kind:"CHOOSE_DAY"}),n("dialog","open",!1)}function a(l){e.chooseTimeSlot(l),r()}return[i(re,{kind:"success",get label(){return(()=>{var l=o(ql),d=l.firstChild,[g,u]=c(d.nextSibling);return g.nextSibling,s(l,i(ue,{icon:"circle-plus"}),g,u),l})()},onClick:()=>n("dialog","open",!0),get disabled(){return!e.isEditable}}),i(Ee,{title:"Zeitslot erfassen",get store(){return t.dialog},size:"medium",onClose:r,get children(){return i(fe,{get children(){return[i(T,{get when(){return t.slot.kind==="CHOOSE_DAY"},get children(){var l=o(Wl);return s(l,i(dt,{changeDay:d=>n("slot",{kind:"CHOOSE_START",day:d})})),l}}),i(T,{get when(){return t.slot.kind==="CHOOSE_START"},get children(){var l=o(Kl),d=l.firstChild,[g,u]=c(d.nextSibling),m=g.nextSibling,[$,_]=c(m.nextSibling);return s(l,i(dt,{get chosenDay(){return w(()=>t.slot.kind==="CHOOSE_START")()?t.slot.day:void 0},changeDay:S=>n("slot",{kind:"CHOOSE_START",day:S})}),g,u),s(l,i(Dt,{get startTimes(){return w(()=>t.slot.kind==="CHOOSE_START")()?Ct(e.daySections[t.slot.day]):[]},changeStart:S=>n("slot",{kind:"CHOOSE_END",start:S})}),$,_),l}}),i(T,{get when(){return t.slot.kind==="CHOOSE_END"},get children(){var l=o(Zl),d=l.firstChild,[g,u]=c(d.nextSibling),m=g.nextSibling,[$,_]=c(m.nextSibling),S=$.nextSibling,[b,y]=c(S.nextSibling);return s(l,i(dt,{get chosenDay(){return w(()=>t.slot.kind==="CHOOSE_END")()?t.slot.day:void 0},changeDay:v=>n("slot",{kind:"CHOOSE_START",day:v})}),g,u),s(l,i(Dt,{get chosenStart(){return w(()=>t.slot.kind==="CHOOSE_END")()?t.slot.start:void 0},get startTimes(){return w(()=>t.slot.kind==="CHOOSE_END")()?Ct(e.daySections[t.slot.day]):[]},changeStart:v=>n("slot",{kind:"CHOOSE_END",start:v})}),$,_),s(l,i(en,{get endTimes(){return w(()=>t.slot.kind==="CHOOSE_END")()?e.daySections[t.slot.day][t.slot.start]??[]:[]},changeEnd:v=>{t.slot.kind==="CHOOSE_END"&&n("slot",{kind:"WAIT_FOR_CONFIRMATION",day:t.slot.day,start:t.slot.start,end:v})}}),b,y),l}}),i(T,{get when(){return t.slot.kind==="WAIT_FOR_CONFIRMATION"},get children(){var l=o(Vl),d=l.firstChild,[g,u]=c(d.nextSibling),m=g.nextSibling,[$,_]=c(m.nextSibling),S=$.nextSibling,[b,y]=c(S.nextSibling),v=b.nextSibling;return s(l,i(dt,{get chosenDay(){return w(()=>t.slot.kind==="WAIT_FOR_CONFIRMATION")()?t.slot.day:void 0},changeDay:x=>n("slot",{kind:"CHOOSE_START",day:x})}),g,u),s(l,i(Dt,{get chosenStart(){return w(()=>t.slot.kind==="WAIT_FOR_CONFIRMATION")()?t.slot.start:void 0},get startTimes(){return w(()=>t.slot.kind==="WAIT_FOR_CONFIRMATION")()?Ct(e.daySections[t.slot.day]):[]},changeStart:x=>n("slot",{kind:"CHOOSE_END",start:x})}),$,_),s(l,i(en,{get chosenEnd(){return w(()=>t.slot.kind==="WAIT_FOR_CONFIRMATION")()?t.slot.end:void 0},get endTimes(){return w(()=>t.slot.kind==="WAIT_FOR_CONFIRMATION")()?e.daySections[t.slot.day][t.slot.start]??[]:[]},changeEnd:x=>{t.slot.kind==="WAIT_FOR_CONFIRMATION"&&n("slot",{kind:"WAIT_FOR_CONFIRMATION",day:t.slot.day,start:t.slot.start,end:x})}}),b,y),s(v,i(re,{get label(){return`Slot "${t.slot.kind==="WAIT_FOR_CONFIRMATION"?`${p.days[t.slot.day]}, von ${t.slot.start} bis ${t.slot.end} Uhr`:""}" erstellen`},kind:"success",onClick:()=>{t.slot.kind==="WAIT_FOR_CONFIRMATION"&&a({uuid:crypto.randomUUID(),day:t.slot.day,from:t.slot.start,to:t.slot.end})}})),l}})]}})}})]}function dt(e){return[o(Jl),(()=>{var t=o(Ql),n=t.firstChild,[r,a]=c(n.nextSibling),l=r.nextSibling,[d,g]=c(l.nextSibling);return s(t,i(re,{get kind(){return e.chosenDay==="SATURDAY"?"success":"gray"},label:"Samstag",onClick:()=>e.changeDay("SATURDAY")}),r,a),s(t,i(re,{get kind(){return e.chosenDay==="SUNDAY"?"success":"gray"},label:"Sonntag",onClick:()=>e.changeDay("SUNDAY")}),d,g),t})()]}function Dt(e){return[o(Xl),(()=>{var t=o(bn);return s(t,i(ie,{get each(){return e.startTimes},children:n=>i(re,{get kind(){return e.chosenStart===n?"success":"gray"},get label(){return(()=>{var r=o(_n),a=r.firstChild,[l,d]=c(a.nextSibling);return l.nextSibling,s(r,n,l,d),r})()},onClick:()=>e.changeStart(n)})})),t})()]}function en(e){return[o(ea),(()=>{var t=o(bn);return s(t,i(ie,{get each(){return e.endTimes},children:n=>i(re,{get kind(){return e.chosenEnd===n?"success":"gray"},get label(){return(()=>{var r=o(_n),a=r.firstChild,[l,d]=c(a.nextSibling);return l.nextSibling,s(r,n,l,d),r})()},onClick:()=>e.changeEnd(n)})})),t})()]}function aa(e){return e.toSorted((t,n)=>t.day!==n.day?t.day==="SATURDAY"?-1:1:t.from-n.from)}$t(["click"]);function sa(e){return async()=>{await Br(e)}}function da(e){return async()=>{await zr(e)}}var it=h("<br>"),oa=h("<div class=content><p>Möchtest du diese Spielrunde gerne veröffentlichen?</p><!$><!/>"),ua=h("<em>Informationen zu den Anmeldungen müssen geladen werden..."),ca=h("<em>Du kannst kein Update versenden, da sich noch niemand für diese Spielrunde angemeldet hat."),ga=h("<p>An: <!$><!/>"),ha=h("<em>Du kannst die Spielrunde nur löschen, wenn du zuerst alle Zeitslots entfernt hast."),ma=h("<div class=content><p>Bist du sicher, dass du die Spielrunde löschen möchtest?</p><!$><!/>"),$a=h('<form novalidate><!$><!/><!$><!/><!$><!/><div style="display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem"><!$><!/><!$><!/></div><!$><!/><!$><!/><!$><!/><fieldset><legend>Kategorien (optional)</legend><!$><!/></fieldset><!$><!/><div style=display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between><!$><!/><div style=display:flex;flex-wrap:wrap;gap:1rem><!$><!/><!$><!/><!$><!/>'),Sa=h("<h4>Spielrunde inkomplett"),ba=h("<p>Du hast noch einen oder mehre Fehler/fehlende Informationen in dieser Spielrunde:"),_a=h("<li>«Titel» ist ein Pflichtfeld."),fa=h("<li>«kurz Beschreibung» ist ein Pflichtfeld."),va=h("<li>«kurz Beschreibung» ist zu lang."),ka=h("<li>«lange Beschreibung» ist zu lang."),ya=h("<li>Mindest einen Zeitslot muss ausgewählt werden."),pa=h("<ul><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),xa=h("<p><strong>Erklärung:</strong> Hast du eine wichtige Änderung an dieser Spielrunde durchgeführt, während bereits Spielende angemeldet waren? Lass hiermit die Angemeldeten wissen, was du geändert hast. Wichtige Änderungen können sein: System geändert, Kategorien geändert. Für kleine Änderungen, wie z.B. Rechtschreibfehler, sollte dies nicht genutzt werden."),Ea=h("<p><em>Halte dich kurz und am besten Stichwortartig."),Ra=h("<form><!$><!/><!$><!/>"),Ca=h("<div style=display:grid;gap:0.5rem;margin-block-end:1rem>");function wa(e){const t=e.allRounds.find(n=>n.uuid===e.uuid);return i(E,{get fallback(){return e.fallback},when:t,children:n=>e.children(n())})}function Aa(e){const[t,n]=N(e.store),[r,a]=N({delete:pe(),publish:pe(),sendUpdate:pe()});function l(g){g.preventDefault(),a("publish","open",!0)}function d(){e.changePage({kind:"GAMEMASTER"})}return[i(ut,{kind:"special",get children(){return["Status: ",w(()=>p.publishingSteps[t.kind])]}}),o(it),o(it),i(La,{store:t,get registrations(){return e.registrations},onSubmit:l,onCancel:()=>a("delete","open",!0),onSendUpdate:()=>a("sendUpdate","open",!0),goBack:d,get isEditable(){return e.isEditable}}),i(Ua,{get store(){return r.publish},get title(){return t.title.value},onPublish:()=>{n("kind","published"),a("publish","open",!1),e.queue.enqueue(sa({secret:e.secret,gameroundUuid:t.uuid}))}}),i(Ta,{get store(){return r.sendUpdate},get players(){return Fa(e.registrations,t.slots.map(g=>g.uuid))},onSend:g=>{e.queue.enqueue(da({update:g,slotUuids:t.slots.map(u=>u.uuid),gameroundUuid:t.uuid}))}}),i(Da,{get store(){return r.delete},get hasSlots(){return t.slots.length!==0},get title(){return t.title.value},onDelete:()=>{n("kind","archived"),e.changePage({kind:"GAMEMASTER"})}})]}function Ua(e){return i(Ee,{get store(){return e.store},title:"Spielrunde veröffentlichen",onClose:()=>{},get children(){var t=o(oa),n=t.firstChild,r=n.nextSibling,[a,l]=c(r.nextSibling);return s(t,i(Z,{kind:"success",icon:"circle-plus",get label(){return`Ja, bitte "${e.title||"["+p.missingTitle+"]"}" veröffentlichen.`},get onClick(){return e.onPublish}}),a,l),t}})}function Ta(e){return i(Ee,{get store(){return e.store},title:"Update senden",onClose:()=>{},size:"medium",get children(){return()=>e.players.kind==="LOADING"?o(ua):e.players.kind==="ERROR"?w(()=>p.error.general):e.players.data.length===0?o(ca):[(()=>{var t=o(ga),n=t.firstChild,r=n.nextSibling,[a,l]=c(r.nextSibling);return s(t,()=>e.players.data.map(d=>d.name).join(", "),a,l),t})(),o(it),i(Na,{get onSend(){return e.onSend}})]}})}function Da(e){return i(Ee,{get store(){return e.store},title:"Spielrunde löschen",onClose:()=>{},get children(){return[i(E,{get when(){return e.hasSlots},get children(){return o(ha)}}),i(E,{get when(){return!e.hasSlots},get children(){var t=o(ma),n=t.firstChild,r=n.nextSibling,[a,l]=c(r.nextSibling);return s(t,i(Z,{kind:"danger",icon:"trash",get label(){return`Ja, bitte "${e.title||"["+p.missingTitle+"]"}" löschen.`},get onClick(){return e.onDelete}}),a,l),t}})]}})}function La(e){const[t]=N(e.store),n=mt(()=>br(t));return(()=>{var r=o($a),a=r.firstChild,[l,d]=c(a.nextSibling),g=l.nextSibling,[u,m]=c(g.nextSibling),$=u.nextSibling,[_,S]=c($.nextSibling),b=_.nextSibling,y=b.firstChild,[v,x]=c(y.nextSibling),R=v.nextSibling,[L,F]=c(R.nextSibling),I=b.nextSibling,[G,V]=c(I.nextSibling),D=G.nextSibling,[B,z]=c(D.nextSibling),q=B.nextSibling,[j,J]=c(q.nextSibling),W=j.nextSibling,de=W.firstChild,ce=de.nextSibling,[Y,ae]=c(ce.nextSibling),Q=W.nextSibling,[O,ge]=c(Q.nextSibling),C=O.nextSibling,M=C.firstChild,[K,X]=c(M.nextSibling),H=K.nextSibling,oe=H.firstChild,[he,Se]=c(oe.nextSibling),ve=he.nextSibling,[me,Re]=c(ve.nextSibling),ke=me.nextSibling,[Ae,P]=c(ke.nextSibling);return s(r,i(E,{get when(){return t.kind==="published"},get children(){return i(tn,{get errors(){return n()}})}}),l,d),s(r,i(Xe,{get store(){return t.title},label:"Titel",name:"title",get showErrors(){return t.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return w(()=>!!n().titleMissing)()?[p.mandatoryField]:[]},get disabled(){return!e.isEditable}}),u,m),s(r,i(Xe,{get store(){return t.system},label:"System (optional)",name:"System",get disabled(){return!e.isEditable}}),_,S),s(b,i(Yt,{get store(){return t.playerCount.min},label:"Anzahl Mitspielende (Minimum)",name:"playerCountMin",min:1,get max(){return t.playerCount.max.value},get disabled(){return!e.isEditable}}),v,x),s(b,i(Yt,{get store(){return t.playerCount.max},label:"Anzahl Mitspielende (Maximum)",name:"playerCountMax",get min(){return t.playerCount.min.value},get disabled(){return!e.isEditable}}),L,F),s(r,i(Nt,{get store(){return t.description.short},label:"kurze Beschreibung",name:"descriptionShort",size:"small",get showErrors(){return t.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return w(()=>!!n().descriptionShortMissing)()?[p.mandatoryField]:w(()=>!!n().descriptionShortTooLong)()?[p.charLimitBy.replace("{}",String(_t))]:[]},get disabled(){return!e.isEditable}}),G,V),s(r,i(Nt,{get store(){return t.description.long},label:"lange Beschreibung (optional)",name:"descriptionLong",get showErrors(){return t.kind==="published"?"ALWAYS":"ON_BLUR"},get errors(){return w(()=>!!n().descriptionLongTooLong)()?[p.charLimitBy.replace("{}",String(mn))]:[]},get disabled(){return!e.isEditable}}),B,z),s(r,i(ta,{get store(){return e.store.slots},get registrations(){return e.registrations},get slotMissing(){return n().slotMissing},get isEditable(){return e.isEditable}}),j,J),s(W,i(Oa,{get store(){return t.tagNames},get isEditable(){return e.isEditable}}),Y,ae),s(r,i(tn,{get errors(){return n()}}),O,ge),s(C,i(Z,{icon:"backward",label:"Zurück zu deinen Spielrunden",get onClick(){return e.goBack}}),K,X),s(H,i(E,{get when(){return t.kind!=="archived"},get children(){return i(Z,{icon:"trash",kind:"danger",label:"Löschen",onClick:()=>e.onCancel(),get disabled(){return!e.isEditable}})}}),he,Se),s(H,i(E,{get when(){return t.kind==="draft"},get children(){return i(Z,{icon:"circle-plus",get kind(){return n().hasErrors?"gray":"success"},get disabled(){return n().hasErrors||!e.isEditable},label:"Spielrunde veröffentlichen",get onClick(){return w(()=>!!n().hasErrors)()?void 0:e.onSubmit}})}}),me,Re),s(H,i(E,{get when(){return t.kind==="published"},get children(){return i(Z,{icon:"circle-plus",kind:"success",label:"Update an Spielende schicken",get onClick(){return e.onSendUpdate},get disabled(){return!e.isEditable}})}}),Ae,P),r})()}function tn(e){return i(E,{get when(){return e.errors.hasErrors},get children(){return i(A,{type:"danger",get children(){return[o(Sa),o(ba),(()=>{var t=o(pa),n=t.firstChild,[r,a]=c(n.nextSibling),l=r.nextSibling,[d,g]=c(l.nextSibling),u=d.nextSibling,[m,$]=c(u.nextSibling),_=m.nextSibling,[S,b]=c(_.nextSibling),y=S.nextSibling,[v,x]=c(y.nextSibling);return s(t,i(E,{get when(){return e.errors.titleMissing},get children(){return o(_a)}}),r,a),s(t,i(E,{get when(){return e.errors.descriptionShortMissing},get children(){return o(fa)}}),d,g),s(t,i(E,{get when(){return e.errors.descriptionShortTooLong},get children(){return o(va)}}),m,$),s(t,i(E,{get when(){return e.errors.descriptionLongTooLong},get children(){return o(ka)}}),S,b),s(t,i(E,{get when(){return e.errors.slotMissing},get children(){return o(ya)}}),v,x),t})()]}})}})}function Na(e){const[t,n]=N({updateText:{value:"",isDirty:!1},hasBeenSent:!1}),r=mt(()=>_r(t));return i(fe,{get fallback(){return i(A,{type:"success",children:"Nachricht wurde registriert und wird in den nächsten 24 Stunden an die Spielenden verschickt."})},get children(){return i(T,{get when(){return!t.hasBeenSent},get children(){return[o(xa),o(it),o(Ea),o(it),(()=>{var a=o(Ra),l=a.firstChild,[d,g]=c(l.nextSibling),u=d.nextSibling,[m,$]=c(u.nextSibling);return Le(a,"noValidate",!0),s(a,i(Nt,{get store(){return t.updateText},label:"Zusammenfassung der Änderung",name:"updateText",size:"small",showErrors:"ALWAYS",get errors(){return w(()=>!!r().missing)()?[p.mandatoryField]:w(()=>!!r().tooLong)()?[p.charLimitBy.replace("{}",String($n))]:[]}}),d,g),s(a,i(Z,{icon:"paper-plane",label:"Spielende informieren",get kind(){return r().hasErrors?"gray":"success"},get disabled(){return r().hasErrors},get onClick(){return r().hasErrors?void 0:()=>{e.onSend(t.updateText.value),n("hasBeenSent",!0)}}}),m,$),a})()]}})}})}function Oa(e){const[t,n]=N(e.store);return[(()=>{var r=o(Ca);return s(r,i(ie,{each:Ye,children:a=>i(Gt,{get label(){return a.label},get description(){return a.description},get checked(){return t.includes(a.name)},get name(){return a.name},get value(){return a.name},onValueUpdate:l=>{n(l?t.concat([a.name]):t.filter(d=>d!==a.name))},get disabled(){return!e.isEditable}})})),r})(),i(A,{get children(){return p.tagIdeas}})]}const Fa=(e,t)=>{if(e.loading)return{kind:"LOADING"};if(e.error)return{kind:"ERROR"};const n=e();return n===void 0||n.kind==="FAILURE"?{kind:"ERROR"}:{kind:"SUCCESS",data:n.data.filter(r=>t.includes(r.uuid))}},Pa=an("kind",[k({kind:U("CHOOSE"),uuid:Ke()}),k({kind:U("PLAYER"),uuid:Ke()}),k({kind:U("GAME"),uuid:f().uuid()}),k({kind:U("GAMEMASTER"),uuid:Ke()}),k({kind:U("HELPING"),uuid:Ke()}),k({kind:U("HELPING-SLOT"),uuid:f().uuid()}),k({kind:U("SUMMARY"),uuid:Ke()}),k({kind:U("EDIT_GAMEROUND"),uuid:f().uuid()})]);an("kind",[k({kind:U("CHOOSE")}),k({kind:U("PLAYER")}),k({kind:U("GAME"),uuid:f().uuid()}),k({kind:U("GAMEMASTER")}),k({kind:U("HELPING")}),k({kind:U("HELPING-SLOT"),uuid:f().uuid()}),k({kind:U("SUMMARY")}),k({kind:U("EDIT_GAMEROUND"),uuid:f().uuid()})]);const Ia=ht(["SAVING","IDLE","ERROR"]),Ma=k({saveState:Ia,page:Pa,secret:f(),showCreateMessage:He(),isDebugging:He()});function fn(e){const t=e.searchParams.get("page")??"",n=e.searchParams.get("uuid")??null,r=e.searchParams.get("secret")??"",a=e.searchParams.get("showCreateMessage")==="true",l=e.searchParams.get("debug")==="true",d=Ma.safeParse({saveState:"IDLE",page:{kind:t.toUpperCase(),uuid:n},secret:r,showCreateMessage:a,isDebugging:l});return d.success?d.data:{saveState:"IDLE",page:{kind:"CHOOSE",uuid:null},secret:r,showCreateMessage:a,isDebugging:l}}function Ha(e,t){return e.kind!==t.kind?!1:e.kind==="EDIT_GAMEROUND"&&t.kind==="EDIT_GAMEROUND"||e.kind==="GAME"&&t.kind==="GAME"?e.uuid===t.uuid:!0}var Ga=h("<div aria-atomic=true><!$><!/><!$><!/>"),Ya=h("<div class=toast-container aria-live=polite aria-atomic=true>");const[we,rt]=N([]);function Ba(e){const t=()=>{const n=["toast"];return e.options.kind!==void 0&&n.push(`toast-${e.options.kind}`),n.join(" ")};return(()=>{var n=o(Ga),r=n.firstChild,[a,l]=c(r.nextSibling),d=a.nextSibling,[g,u]=c(d.nextSibling);return s(n,()=>e.options.message,a,l),s(n,i(E,{get when(){return e.options.dismissable},get children(){return i(re,{kind:"ghost",get label(){return i(ue,{icon:"xmark",classes:["toast-dismiss"]})},get onClick(){return e.dismiss}})}}),g,u),le(m=>{var $=t(),_=e.options.kind==="danger"?"alert":"status",S=e.options.kind==="danger"?"assertive":"polite";return $!==m.e&&_e(n,m.e=$),_!==m.t&&et(n,"role",m.t=_),S!==m.a&&et(n,"aria-live",m.a=S),m},{e:void 0,t:void 0,a:void 0}),n})()}function za(){function e(t){we.find(n=>n.uuid===t)?.cleanup(),rt(we.filter(n=>n.uuid!==t))}return(()=>{var t=o(Ya);return s(t,i(ie,{each:we,children:n=>i(Ba,{options:n,dismiss:()=>e(n.uuid)})})),t})()}function vn(e,t){if(t?.uuid!==void 0&&we.find(g=>g.uuid===t.uuid)!==void 0)return Ot(t.uuid,e,t);const n=t?.uuid??crypto.randomUUID(),r=t?.duration??5e3,a=t?.kind??"gray",l=t?.dismissable??!0,d=setTimeout(()=>{rt(we.filter(g=>g.uuid!==n))},r);return rt(we.length,{uuid:n,kind:a,message:e,duration:r,dismissable:l,cleanup:()=>clearTimeout(d)}),n}function Ot(e,t,n){const r=we.find(u=>u.uuid===e);if(r===void 0)return e;r.cleanup();const a=n.duration??r.duration,l=n.kind??r.kind,d=n?.dismissable??r.dismissable,g=setTimeout(()=>{rt(we.filter(u=>u.uuid!==e))},a);return rt(u=>u.uuid===e,{uuid:e,kind:l,message:t,duration:a,dismissable:d,cleanup:()=>clearTimeout(g)}),e}const ja=k({name:f(),email:f(),mobile:f()}),Wa=k({name:f(),email:f(),mobile:f()}),Ka=Ge([k({kind:U("SELF"),gameRound:f().uuid(),uuid:f().uuid()}),k({kind:U("FRIEND"),gameRound:f().uuid(),name:f(),uuid:f().uuid()})]),Za=k({wantsUpdates:He(),reservations:ne(Ka)}),Va=Ge([k({kind:U("SELF"),gameRound:f().uuid(),uuid:f().uuid()}),k({kind:U("FRIEND"),gameRound:f().uuid(),name:f(),uuid:f().uuid()})]);Ge([k({kind:U("SELF"),gameRound:f().uuid()}),k({kind:U("FRIEND"),gameRound:f().uuid(),name:f()})]);const qa=k({wantsUpdates:He(),reservations:ne(Va)}),Ja=k({games:ne(hr),wantsHelp:He()}),Qa=k({games:ne(hn),wantsHelp:He()}),Xa=Ge([k({kind:U("SELF"),helpEntryUuid:f().uuid(),uuid:f().uuid()}),k({kind:U("FRIEND"),helpEntryUuid:f().uuid(),name:f(),uuid:f().uuid()})]),es=ne(Xa),ts=Ge([k({kind:U("SELF"),helpEntryUuid:f().uuid(),uuid:f().uuid()}),k({kind:U("FRIEND"),helpEntryUuid:f().uuid(),name:f(),uuid:f().uuid()})]),ns=ne(ts);Ge([k({kind:U("SELF"),helpEntryUuid:f().uuid()}),k({kind:U("FRIEND"),helpEntryUuid:f().uuid(),name:f()})]);const is=k({version:U(1),init:ja,lastSaved:f(),playing:Za,master:Ja,helping:es,publishState:bt}),rs=k({version:U(1),init:Wa,lastSaved:In.date(),playing:qa,master:Qa,helping:ns,publishState:bt});async function ls(e){if(e.length!==36&&e.length!==4)return{kind:"SECRET_INVALID"};const t=e==="demo"?await Dr():await Mr(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=is.safeParse(t.data);if(!n.success)return console.error(n.error),{kind:"FAILURE"};const r=as(n.data);return r.success?{kind:"SUCCESS",data:r.data}:{kind:"FAILURE"}}function as(e){return rs.safeParse(e)}const Lt=crypto.randomUUID();async function ss(e,t,n){const[r,a]=N(e);a("saveState","SAVING"),vn("Am Speichern...",{uuid:Lt,dismissable:!1});const l=new Date;t.lastSaved=l;const d=ds(t);try{if((n==="demo"?await Lr(d,n):await Hr(d,n)).kind==="FAILURE")throw Error("")}catch(g){return a("saveState","ERROR"),console.error(g),Ot(Lt,"Speichern war nicht möglich!",{kind:"danger",duration:1e4,dismissable:!0}),{kind:"FAILURE"}}return Ot(Lt,`Zuletzt gespeichert um: ${sn(l)} Uhr`,{kind:"success",dismissable:!0}),a("saveState","IDLE"),{kind:"SUCCESS",data:l}}function ds(e){return{...e,lastSaved:String(e.lastSaved),master:{...e.master,games:e.master.games.map(Sr)}}}const os=Mn(ss,1e3);var us=h("<div class=tooltip-wrapper><div class=tooltip></div><!$><!/>");function Ve(e){return(()=>{var t=o(us),n=t.firstChild,r=n.nextSibling,[a,l]=c(r.nextSibling);return s(n,()=>e.tooltip),s(t,()=>e.children,a,l),t})()}var cs=h("<div class=quickmenu-wrapper><div class=quickmenu><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>"),gs=h('<div class="quickmenu extended"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/>'),hs=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Zuletzt gespeichert um: <!$><!/> Uhr"),ms=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Am Speichern..."),$s=h("<div style=margin-block-start:1rem;display:flex;gap:0.5rem;align-items:center><!$><!/><em>Speichern war nicht möglich!");function Ss(e){return(()=>{var t=o(cs),n=t.firstChild,r=n.firstChild,[a,l]=c(r.nextSibling),d=a.nextSibling,[g,u]=c(d.nextSibling),m=g.nextSibling,[$,_]=c(m.nextSibling),S=$.nextSibling,[b,y]=c(S.nextSibling),v=b.nextSibling,[x,R]=c(v.nextSibling);return s(n,i(Ve,{tooltip:"Zur Übersicht",get children(){return i(re,{get label(){return i(ue,{icon:"backward"})},onClick:()=>e.changePage({kind:"CHOOSE"})})}}),a,l),s(n,i(Ve,{tooltip:"Zu den Spielrunden",get children(){return i(re,{get label(){return i(ue,{icon:"dice-d20"})},onClick:()=>e.changePage({kind:"PLAYER"})})}}),g,u),s(n,i(Ve,{tooltip:"Zu deinen Spielrunden",get children(){return i(re,{get label(){return i(ue,{icon:"grid-2-plus"})},onClick:()=>e.changePage({kind:"GAMEMASTER"})})}}),$,_),s(n,i(Ve,{tooltip:"Zum Helferplan",get children(){return i(re,{get label(){return i(ue,{icon:"hand-heart"})},onClick:()=>e.changePage({kind:"HELPING"})})}}),b,y),s(n,i(Ve,{tooltip:"Zur Zusammenfassung",get children(){return i(re,{get label(){return i(ue,{icon:"list"})},onClick:()=>e.changePage({kind:"SUMMARY"})})}}),x,R),t})()}function bs(e){return[i(A,{type:"gray",get children(){var t=o(gs),n=t.firstChild,[r,a]=c(n.nextSibling),l=r.nextSibling,[d,g]=c(l.nextSibling),u=d.nextSibling,[m,$]=c(u.nextSibling),_=m.nextSibling,[S,b]=c(_.nextSibling),y=S.nextSibling,[v,x]=c(y.nextSibling);return s(t,i(Z,{icon:"backward",label:"Zur Übersicht",onClick:()=>e.changePage({kind:"CHOOSE"})}),r,a),s(t,i(Z,{icon:"dice-d20",label:"Zu den Spielrunden",onClick:()=>e.changePage({kind:"PLAYER"})}),d,g),s(t,i(Z,{icon:"grid-2-plus",label:"Zu deinen Spielrunden",onClick:()=>e.changePage({kind:"GAMEMASTER"})}),m,$),s(t,i(Z,{icon:"hand-heart",label:"Zum Helferplan",onClick:()=>e.changePage({kind:"HELPING"})}),S,b),s(t,i(Z,{icon:"list",label:"Zur Zusammenfassung",onClick:()=>e.changePage({kind:"SUMMARY"})}),v,x),t}}),i(_s,{get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})]}function _s(e){return i(fe,{get children(){return[i(T,{get when(){return e.saveState==="IDLE"},get children(){var t=o(hs),n=t.firstChild,[r,a]=c(n.nextSibling),l=r.nextSibling,d=l.firstChild,g=d.nextSibling,[u,m]=c(g.nextSibling);return u.nextSibling,s(t,i(ue,{icon:"circle-check"}),r,a),s(l,()=>sn(e.lastSaved),u,m),t}}),i(T,{get when(){return e.saveState==="SAVING"},get children(){var t=o(ms),n=t.firstChild,[r,a]=c(n.nextSibling);return r.nextSibling,s(t,i(ue,{icon:"floppy-disk-circle-arrow-right"}),r,a),t}}),i(T,{get when(){return e.saveState==="ERROR"},get children(){var t=o($s),n=t.firstChild,[r,a]=c(n.nextSibling);return r.nextSibling,s(t,i(ue,{icon:"triangle-exclamation"}),r,a),t}})]}})}var fs=h("<div class=page><!$><!/><div class=page-content><h2></h2><br><!$><!/></div><!$><!/>"),vs=h("<div class=extended-wrapper style=margin-block-start:1rem>");function De(e){return(()=>{var t=o(fs),n=t.firstChild,[r,a]=c(n.nextSibling),l=r.nextSibling,d=l.firstChild,g=d.nextSibling,u=g.nextSibling,[m,$]=c(u.nextSibling),_=l.nextSibling,[S,b]=c(_.nextSibling);return s(t,(()=>{var y=w(()=>e.showQuickmenu!==!1);return()=>y()?i(Ss,{get changePage(){return e.changePage},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}}):null})(),r,a),s(d,()=>e.title),s(l,()=>e.children,m,$),s(t,(()=>{var y=w(()=>e.showQuickmenu!==!1);return()=>y()?(()=>{var v=o(vs);return s(v,i(bs,{get changePage(){return e.changePage},get saveState(){return e.saveState},get lastSaved(){return e.lastSaved}})),v})():null})(),S,b),t})()}const ks=k({uuid:f().uuid(),name:f()}),kn=ne(ks),ys=kn;async function ps(e,t){const n=e==="demo"?await Pr(t):await Yr(e);if(n.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const r=kn.safeParse(n.data);if(!r.success)return{kind:"FAILURE"};const a=xs(r.data);return a.success?{kind:"SUCCESS",data:a.data}:{kind:"FAILURE"}}function xs(e){return ys.safeParse(e)}const Es=ne(f().uuid()),Rs=ne(f().uuid());async function Cs(e){const t=await jr(e);if(t.kind==="FAILURE")return console.error("Unexpected error. Maybe network, maybe server error."),{kind:"FAILURE"};const n=Es.safeParse(t.data);if(!n.success)return{kind:"FAILURE"};const r=ws(n.data);return r.success?{kind:"SUCCESS",data:r.data}:{kind:"FAILURE"}}function ws(e){return Rs.safeParse(e)}var nn=h("<br>"),rn=h("<pre>"),As=h("<hr>"),Us=h("<div><code>Reservations (read-only)"),Ts=h("<em>loading...");function Ds(e){const t=new URL(location.href);t.searchParams.set("page",e.page.kind.toLowerCase()),e.page.kind==="EDIT_GAMEROUND"&&t.searchParams.set("uuid",e.page.uuid),t.searchParams.delete("showCreateMessage"),history.replaceState({page:e},"",t);const n=p.pageTitle[e.page.kind];document.title=p.metaTitle.replace("{}",n)}function Ls(e){const[t,n]=N(e.page);return(r,a)=>{if(Ha(r,t))return;const l=a?.backButton??!1,d=a?.disableScroll??!1,g=new URL(location.href);g.searchParams.set("page",r.kind.toLowerCase()),r.kind==="EDIT_GAMEROUND"||r.kind==="GAME"||r.kind==="HELPING-SLOT"?(g.searchParams.set("uuid",r.uuid),n(r)):(g.searchParams.delete("uuid"),n({...r,uuid:null})),l||history.pushState({page:r},"",g);const u=p.pageTitle[r.kind];document.title=p.metaTitle.replace("{}",u),d||window.scrollTo({top:0})}}function Ns(e){Ds(e.meta);const[t,n]=N({meta:e.meta,save:e.save}),r=()=>t.save.master.games.flatMap(S=>S.slots.map(b=>b.uuid)),[a]=qe(r(),S=>ps(t.meta.secret,S)),[l]=qe(()=>qr(t.meta.secret)),[d]=qe(()=>Cs(t.meta.secret)),g=crypto.randomUUID(),[u,m]=Pt(!1);qe(()=>JSON.stringify(t.save),async()=>{if(!u()){m(!0);return}if(t.save.publishState!=="published"){vn("Diese Anmeldung wurde deaktiviert und kann nicht editiert werden.",{kind:"danger",uuid:g});return}const S=Je(t.save);try{const b=await os(t.meta,S,t.meta.secret);b.kind==="FAILURE"?console.error(b):n("save","lastSaved",b.data)}catch(b){console.error(b),n("meta","saveState","ERROR")}});const $=Ls(t.meta),_=Hn();return dn(()=>{window.addEventListener("popstate",S=>{if(typeof S=="object"&&S!==null&&"state"in S){const b=new URL(location.href),y=fn(b);$(y.page,{backButton:!0})}}),setInterval(async()=>{const S=_.dequeue();S.kind==="NEXT_ELEMENT"&&await S.data()},1e3)}),[i(E,{get when(){return t.meta.showCreateMessage},get children(){return[i(A,{type:"success",get children(){return p.registrationStarted}}),o(nn)]}}),i(E,{get when(){return t.save.publishState!=="published"},get children(){return[i(A,{type:"danger",children:"Diese Anmeldung wurde deaktiviert. Sollte dies ein Fehler sein, kontaktiere uns bitte."}),o(nn)]}}),i(fe,{get fallback(){return i(De,{title:"Wo möchtest du starten?",showQuickmenu:!1,changePage:$,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return i(Fl,{changePage:$,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved}})}})},get children(){return[i(T,{get when(){return!t.meta.isDebugging},get children(){return i(De,{title:"Zusammenfassung",changePage:$,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},showQuickmenu:!1,get children(){return i(Zt,{get store(){return t.save},program:l,get isEditable(){return t.save.publishState==="published"},changePage:$})}})}}),i(T,{get when(){return t.meta.page.kind==="PLAYER"||t.meta.page.kind==="GAME"},get children(){return i(De,{title:"Spielrundenübersicht",changePage:$,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return i(xl,{get store(){return t.save.playing},program:l,get uuid(){return w(()=>t.meta.page.kind==="GAME")()?t.meta.page.uuid:null},get isEditable(){return t.save.publishState==="published"},changePage:$})}})}}),i(T,{get when(){return t.meta.page.kind==="GAMEMASTER"},get children(){return i(De,{title:"Meine Spielrunden",changePage:$,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return i(Rr,{get store(){return t.save.master},get isEditable(){return t.save.publishState==="published"},changePage:$})}})}}),i(T,{get when(){return t.meta.page.kind==="EDIT_GAMEROUND"},get children(){return i(De,{title:"Spielrunde editieren",changePage:$,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return i(wa,{get allRounds(){return t.save.master.games},get uuid(){return w(()=>t.meta.page.kind==="EDIT_GAMEROUND")()?t.meta.page.uuid:"should never happen"},get fallback(){return i(A,{type:"danger",get children(){return p.error.gameroundUuidError}})},children:S=>i(Aa,{store:S,registrations:a,queue:_,get isEditable(){return t.save.publishState==="published"},changePage:$,get secret(){return t.meta.secret}})})}})}}),i(T,{get when(){return t.meta.page.kind==="HELPING"||t.meta.page.kind==="HELPING-SLOT"},get children(){return i(De,{title:"Helfen",changePage:$,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return i(sr,{get store(){return t.save},help:d,get uuid(){return w(()=>t.meta.page.kind==="HELPING-SLOT")()?t.meta.page.uuid:null},get isEditable(){return t.save.publishState==="published"},changePage:$})}})}}),i(T,{get when(){return t.meta.page.kind==="SUMMARY"},get children(){return i(De,{title:"Zusammenfassung",changePage:$,get saveState(){return t.meta.saveState},get lastSaved(){return t.save.lastSaved},get children(){return i(Zt,{get store(){return t.save},program:l,get isEditable(){return t.save.publishState==="published"},changePage:$})}})}})]}}),i(E,{get when(){return t.meta.isDebugging},get children(){return[(()=>{var S=o(rn);return s(S,()=>JSON.stringify(t,null,2)),S})(),o(As),o(Us),i(lt,{get fallback(){return o(Ts)},get children(){return i(E,{get when(){return a()},children:S=>(()=>{var b=o(rn);return s(b,()=>JSON.stringify(S(),null,2)),b})()})}})]}}),i(za,{})]}function yn(){return i(A,{get children(){return p.loading.registration}})}function Hs(){const[e,t]=Pt(null);return dn(()=>{const n=new URL(location.href);t(fn(n))}),i(E,{get fallback(){return i(yn,{})},get when(){return e()},children:n=>i(Os,{get page(){return n()}})})}function Os(e){const[t]=qe(()=>ls(e.page.secret));return i(Bn,{fallback:n=>(console.error(n),i(A,{type:"danger",get children(){return p.error.general}})),get children(){return i(lt,{get fallback(){return i(yn,{})},get children(){return i(fe,{get children(){return i(T,{get when(){return t()},children:n=>{const{kind:r,value:a}=Gn(n());return r==="SECRET_INVALID"?i(A,{type:"danger",get children(){return p.error.secretError}}):r==="FAILURE"?(console.error(a),i(A,{type:"danger",get children(){return p.error.ourMistake}})):i(Ns,{get meta(){return e.page},get save(){return a.data}})}})}})}})}})}export{Hs as MeineAnmeldungWrapper};
